const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SectionHero-B5ysFe18.js","assets/vue-BpT-YuJn.js","assets/SectionProductList-DY7BGvgS.js"])))=>i.map(i=>d[i]);
import{o as Xe,A as Ye,F as Ze,B as Le,N as et,D as tt}from"./vendor-Bllg3nBx.js";import{m as Pe}from"./alpine-S4M4TpEG.js";import{c as o,a as T,b as e,d as B,t as i,n as F,o as s,e as re,f as Te,w as ee,T as ye,g as Z,r as me,h,v as Y,F as N,i as L,j as te,k as V,l as st,m as P,u as ce,p as fe,q as _e,s as Q,x as be,y as se,z as ge,A as ne,B as ot,C as he,D as rt,E as nt,G as lt,H as qe,I as it,J as De,K as at}from"./vue-BpT-YuJn.js";import{a as X}from"./axios-B9ygI19o.js";const dt="mini-store-db",ve="sync-queue",Ve=Xe(dt,1,{upgrade(l){l.createObjectStore(ve,{keyPath:"id",autoIncrement:!0})}}),Re={async queueRequest(l,t={}){const a=await Ve;let b=t.body,f=b instanceof FormData,p=b;if(f){p=[];for(const[u,x]of b.entries())p.push({key:u,value:x})}const n={url:l,method:t.method||"POST",headers:t.headers?Array.from(new Headers(t.headers).entries()):[],body:p,isFormData:f,timestamp:Date.now()};await a.add(ve,n),console.log("ðŸ”Œ Request queued for offline sync:",n.url),window.dispatchEvent(new CustomEvent("offline-queue-updated"))},async processQueue(){const l=await Ve,t=await l.getAll(ve);if(t.length!==0){console.log(`ðŸ”„ Processing ${t.length} offline requests...`);for(const a of t)try{let b=a.body;const f=new Headers(a.headers);f.set("X-Offline-Sync","true"),a.isFormData&&(b=new FormData,a.body.forEach(n=>{b.append(n.key,n.value)}),f.delete("Content-Type"));const p=await fetch(a.url,{method:a.method,headers:f,body:b});p.ok?(console.log("âœ… Synced:",a.url),await l.delete(ve,a.id)):(console.error("âŒ Sync failed for:",a.url,p.status),p.status===422&&await l.delete(ve,a.id))}catch(b){console.error("âŒ Sync network error:",b);break}window.dispatchEvent(new CustomEvent("offline-queue-updated"))}},async getQueueCount(){return await(await Ve).count(ve)}};window.addEventListener("online",()=>{console.log("ðŸŒ Online - Attempting sync..."),Re.processQueue()});const ut={init(){"serviceWorker"in navigator&&navigator.serviceWorker.controller&&setTimeout(()=>{this.warmRoutes()},3e3)},async warmRoutes(){console.log("ðŸ”¥ CacheWarmer: Starting background fetch...");const t=window.location.pathname.split("/")[1];if(!t){console.warn("ðŸ”¥ CacheWarmer: Could not determine tenant slug.");return}const a=[`/${t}/admin/pos`,`/${t}/admin/products`,`/${t}/admin/purchase-orders`,`/${t}/admin/incomes`,`/${t}/admin/expenses`,`/${t}/admin/reports/inventory`];for(const b of a)try{await fetch(b,{priority:"low"}),console.log(`ðŸ”¥ Cached: ${b}`)}catch(f){console.debug(`ðŸ”¥ Failed to warm: ${b}`,f)}console.log("ðŸ”¥ CacheWarmer: Complete.")}},xe=(l,t)=>{const a=l.__vccOpts||l;for(const[b,f]of t)a[b]=f;return a},ct={props:{initialStatus:{type:Boolean,required:!0},hasFeature:{type:Boolean,required:!0},tenantSlug:{type:String,required:!0}},data(){return{isEnabled:this.initialStatus,canAccessStorefrontFeature:this.hasFeature,showWarning:!1,isProcessing:!1}},methods:{handleToggle(){this.isProcessing||(this.isEnabled?this.showWarning=!0:this.confirmToggle())},async confirmToggle(){this.isProcessing=!0,this.showWarning=!1;try{const l=await X.post(`/${this.tenantSlug}/api/tenant/settings/toggle-storefront`);this.isEnabled=l.data.enabled,this.isEnabled&&(window.location.href=`/${this.tenantSlug}/admin/wizard`)}catch(l){console.error("Failed to toggle storefront:",l),l.response&&l.response.status===403?alert("You do not have permission to access this feature."):alert("An error occurred. Please try again.")}finally{this.isProcessing=!1}}}},pt={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mt-6"},mt={class:"p-6"},gt={class:"flex items-center justify-between"},ft={class:"text-sm text-gray-600"},bt={class:"flex items-center"},yt=["aria-checked"],xt={class:"ml-3 text-sm font-medium text-gray-900"},vt={key:0,class:"mt-4 p-4 bg-amber-50 rounded-xl border border-amber-200"},ht={class:"flex"},wt={class:"ml-3"},_t={class:"mt-4 flex space-x-3"};function kt(l,t,a,b,f,p){return f.canAccessStorefrontFeature?(s(),o("div",pt,[t[9]||(t[9]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Storefront Visibility"),e("p",{class:"text-sm text-gray-500"},"Enable or disable your public-facing online store.")],-1)),e("div",mt,[e("div",gt,[e("div",null,[t[5]||(t[5]=e("h4",{class:"text-sm font-bold text-gray-700 uppercase tracking-wide mb-1"},"Status",-1)),e("p",ft,[t[3]||(t[3]=B(" Your store is currently ",-1)),e("strong",null,i(f.isEnabled?"Online":"Offline"),1),t[4]||(t[4]=B(". ",-1))])]),e("div",bt,[e("button",{type:"button",onClick:t[0]||(t[0]=(...n)=>p.handleToggle&&p.handleToggle(...n)),class:F([f.isEnabled?"bg-indigo-600":"bg-gray-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2"]),role:"switch","aria-checked":f.isEnabled},[e("span",{class:F([f.isEnabled?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,yt),e("span",xt,i(f.isEnabled?"Enabled":"Disabled"),1)])]),f.showWarning?(s(),o("div",vt,[e("div",ht,[t[8]||(t[8]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",wt,[t[6]||(t[6]=e("p",{class:"text-sm text-amber-700 font-bold"}," Warning: Disabling this will take your public store offline. ",-1)),t[7]||(t[7]=e("div",{class:"mt-2 text-sm text-amber-600"}," Customers will not be able to browse products or place orders until re-enabled. ",-1)),e("div",_t,[e("button",{onClick:t[1]||(t[1]=(...n)=>p.confirmToggle&&p.confirmToggle(...n)),class:"bg-amber-100 hover:bg-amber-200 text-amber-800 px-3 py-1.5 rounded-lg text-xs font-bold transition"}," Disable Anyway "),e("button",{onClick:t[2]||(t[2]=n=>f.showWarning=!1),class:"text-amber-800 px-3 py-1.5 rounded-lg text-xs font-bold transition"}," Cancel ")])])])])):T("",!0)])])):T("",!0)}const ze=xe(ct,[["render",kt]]),$t={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},St={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ue={__name:"CommonModal",props:{isOpen:Boolean,maxWidth:{type:String,default:"md"}},emits:["close"],setup(l,{emit:t}){const a=l,b=t,f=()=>{b("close")},p=re(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[a.maxWidth]||"sm:max-w-lg");return(n,u)=>(s(),Te(ye,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ee(()=>[l.isOpen?(s(),o("div",$t,[e("div",St,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:f}),u[0]||(u[0]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),Z(ye,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:ee(()=>[l.isOpen?(s(),o("div",{key:0,class:F(["inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:w-full",p.value])},[me(n.$slots,"default")],2)):T("",!0)]),_:3})])])):T("",!0)]),_:3}))}},Ct={name:"PurchaseOrderForm",props:{suppliers:{type:Array,required:!0},warehouses:{type:Array,required:!0},products:{type:Array,required:!0},taxCodes:{type:Array,required:!0},initialData:{type:Object,default:null},submitUrl:{type:String,required:!0},redirectUrl:{type:String,required:!0},method:{type:String,default:"POST"},currency:{type:String,default:"â‚¦"},supplierStoreUrl:{type:String,default:""}},components:{CommonModal:ue},data(){return{isSubmitting:!1,localSuppliers:[...this.suppliers],showSupplierModal:!1,newSupplier:{name:"",email:"",phone:""},supplierError:"",error:null,form:{supplier_id:"",warehouse_id:"",order_date:new Date().toISOString().substr(0,10),expected_delivery_date:"",notes:"",discount:0,shipping:0,items:[{product_id:"",quantity:1,unit_cost:0,tax_code_id:""}]},barcodeBuffer:"",barcodeTimeout:null}},watch:{suppliers(l){this.localSuppliers=[...l]}},mounted(){this.initialData&&Object.assign(this.form,{...this.initialData,items:this.initialData.items?this.initialData.items.map(l=>({id:l.id,product_id:l.product_id,quantity:l.quantity_ordered,unit_cost:parseFloat(l.unit_cost)||0,tax_code_id:l.tax_code_id||""})):this.form.items}),document.addEventListener("keypress",this.handleKeyPress)},beforeUnmount(){document.removeEventListener("keypress",this.handleKeyPress)},methods:{openSupplierModal(){this.showSupplierModal=!0},async createSupplier(){if(!this.newSupplier.name){this.supplierError="Name is required";return}this.supplierError="";try{const l=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),t=await X.post(this.supplierStoreUrl,this.newSupplier,{headers:{"X-CSRF-TOKEN":l}});if(t.data.success||t.status<300){const a=t.data.supplier||t.data;this.localSuppliers.push(a),this.form.supplier_id=a.id,this.showSupplierModal=!1,this.newSupplier={name:"",email:"",phone:""}}}catch(l){this.supplierError=l.response?.data?.message||"Failed to create supplier"}},handleProductChange(l){const t=this.form.items[l],a=this.products.find(b=>b.id===t.product_id);a&&(t.unit_cost=parseFloat(a.cost_price)||0)},addItem(){this.form.items.push({product_id:"",quantity:1,unit_cost:0,tax_code_id:""})},removeItem(l){this.form.items.length>1&&this.form.items.splice(l,1)},calculateRowTotal(l){const t=parseFloat(l.quantity)||0,a=parseFloat(l.unit_cost)||0,b=t*a,f=this.getTaxRate(l.tax_code_id);return b+b*(f/100)},getTaxRate(l){const t=this.taxCodes.find(a=>a.id===l);return t?parseFloat(t.rate):0},formatCurrency(l){return this.currency+(parseFloat(l)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},async handleSubmit(){this.isSubmitting=!0,this.error=null;try{const l={...this.form};this.method==="PUT"&&(l._method="PUT");const t=await X.post(this.submitUrl,l);if(t.status<300)window.location.href=this.redirectUrl;else throw new Error(t.data.message||"Error")}catch(l){this.error=l.response?.data?.message||"Check form inputs and try again."}finally{this.isSubmitting=!1}},handleKeyPress(l){l.target.tagName==="INPUT"||l.target.tagName==="TEXTAREA"||(this.barcodeTimeout&&clearTimeout(this.barcodeTimeout),l.key==="Enter"?(this.barcodeBuffer.length>3&&this.handleBarcodeScanned(this.barcodeBuffer),this.barcodeBuffer=""):(this.barcodeBuffer+=l.key,this.barcodeTimeout=setTimeout(()=>this.barcodeBuffer="",100)))},handleBarcodeScanned(l){const t=this.products.find(a=>a.sku===l||a.barcode===l);if(t){const a=this.form.items.find(b=>b.product_id===t.id);if(a)a.quantity++,this.playBeep();else{const b=this.form.items[this.form.items.length-1];this.form.items.length===1&&!b.product_id?(b.product_id=t.id,b.unit_cost=parseFloat(t.cost_price)||0,this.playBeep()):(this.form.items.push({product_id:t.id,quantity:1,unit_cost:parseFloat(t.cost_price)||0,tax_code_id:""}),this.playBeep())}}else console.log("Product not found for barcode: "+l)},playBeep(){try{const l=window.AudioContext||window.webkitAudioContext;if(!l)return;const t=new l,a=t.createOscillator(),b=t.createGain();a.connect(b),b.connect(t.destination),a.frequency.value=800,a.type="sine",b.gain.setValueAtTime(.1,t.currentTime),b.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),a.start(t.currentTime),a.stop(t.currentTime+.1)}catch{}}},computed:{totals(){let l=0,t=0;this.form.items.forEach(b=>{const f=(parseFloat(b.quantity)||0)*(parseFloat(b.unit_cost)||0);l+=f,t+=f*(this.getTaxRate(b.tax_code_id)/100)});const a=Math.max(0,l-(parseFloat(this.form.discount)||0)+t+(parseFloat(this.form.shipping)||0));return{subtotal:l,tax:t,total:a}}}},Pt={class:"purchase-order-form-container"},Tt={key:0,class:"mb-6 p-5 bg-red-50 border-l-4 border-red-500 rounded-xl flex items-center justify-between shadow-sm"},jt={class:"flex items-center"},Ut=["textContent"],At={class:"grid grid-cols-1 md:grid-cols-2 gap-8 bg-white p-8 rounded-3xl border border-gray-100 shadow-sm"},Mt={class:"space-y-2"},Vt={class:"flex gap-2"},Et=["value","textContent"],Ot={class:"space-y-2"},It=["value","textContent"],qt={class:"space-y-2"},Dt={class:"space-y-2"},Ft={class:"space-y-2"},Bt={class:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden"},Nt={class:"px-8 py-6 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center"},Lt={class:"p-8 space-y-6"},Rt={class:"col-span-12 lg:col-span-4 space-y-2"},zt=["onUpdate:modelValue","onChange"],Ht=["value","textContent"],Wt={class:"col-span-4 lg:col-span-2 space-y-2"},Gt=["onUpdate:modelValue"],Kt={class:"col-span-4 lg:col-span-2 space-y-2"},Jt=["onUpdate:modelValue"],Qt={class:"col-span-4 lg:col-span-2 space-y-2"},Xt=["onUpdate:modelValue"],Yt=["value","textContent"],Zt={class:"col-span-12 lg:col-span-2 flex items-center justify-end gap-3"},es={class:"text-right"},ts=["textContent"],ss=["onClick","disabled"],os={class:"flex justify-end pt-4"},rs={class:"w-full md:w-80 bg-white rounded-3xl p-8 border-2 border-indigo-50 space-y-4 shadow-sm"},ns={class:"flex justify-between items-center text-sm font-bold text-gray-500"},ls=["textContent"],is={class:"flex justify-between items-center text-sm font-bold text-gray-500"},as={class:"flex justify-between items-center text-sm font-bold text-gray-500"},ds=["textContent"],us={class:"flex justify-between items-center text-sm font-bold text-gray-500"},cs={class:"pt-4 border-t-2 border-indigo-50 flex justify-between items-center"},ps=["textContent"],ms={class:"pt-8 flex justify-end"},gs=["disabled"],fs=["textContent"],bs={class:"bg-white px-8 pt-8 pb-8 sm:p-10 sm:pb-8"},ys={class:"space-y-6"},xs={key:0,class:"text-red-500 text-xs mt-1"},vs={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"};function hs(l,t,a,b,f,p){const n=st("CommonModal");return s(),o("div",Pt,[f.error?(s(),o("div",Tt,[e("div",jt,[t[17]||(t[17]=e("svg",{class:"w-6 h-6 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",{class:"text-red-700 font-bold",textContent:i(f.error)},null,8,Ut)]),e("button",{onClick:t[0]||(t[0]=u=>f.error=null),class:"text-red-500 hover:text-red-700 font-black text-2xl",type:"button"},"Ã—")])):T("",!0),e("form",{onSubmit:t[10]||(t[10]=te((...u)=>p.handleSubmit&&p.handleSubmit(...u),["prevent"])),class:"space-y-8"},[e("div",At,[e("div",Mt,[t[20]||(t[20]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Supplier",-1)),e("div",Vt,[h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=u=>f.form.supplier_id=u),required:"",class:"flex-1 rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-4 py-3 text-base font-bold text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},[t[18]||(t[18]=e("option",{value:""},"Select Supplier",-1)),(s(!0),o(N,null,L(f.localSuppliers,u=>(s(),o("option",{key:u.id,value:u.id,textContent:i(u.name)},null,8,Et))),128))],512),[[Y,f.form.supplier_id]]),e("button",{type:"button",onClick:t[2]||(t[2]=te((...u)=>p.openSupplierModal&&p.openSupplierModal(...u),["stop"])),class:"relative z-10 bg-gray-100 px-4 rounded-2xl border-2 border-gray-100 hover:bg-indigo-50 hover:border-indigo-100 transition-colors text-gray-600 cursor-pointer flex-shrink-0"},[...t[19]||(t[19]=[e("svg",{class:"w-6 h-6 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])])]),e("div",Ot,[t[22]||(t[22]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Destination Warehouse",-1)),h(e("select",{"onUpdate:modelValue":t[3]||(t[3]=u=>f.form.warehouse_id=u),required:"",class:"w-full rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-4 py-3 text-base font-bold text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},[t[21]||(t[21]=e("option",{value:""},"Select Warehouse",-1)),(s(!0),o(N,null,L(a.warehouses,u=>(s(),o("option",{key:u.id,value:u.id,textContent:i(u.name)},null,8,It))),128))],512),[[Y,f.form.warehouse_id]])]),e("div",qt,[t[23]||(t[23]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Order Date",-1)),h(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=u=>f.form.order_date=u),required:"",class:"w-full rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-4 py-3 text-base font-bold text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},null,512),[[V,f.form.order_date]])]),e("div",Dt,[t[24]||(t[24]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Expected Delivery",-1)),h(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=u=>f.form.expected_delivery_date=u),class:"w-full rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-4 py-3 text-base font-bold text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},null,512),[[V,f.form.expected_delivery_date]])])]),e("div",Ft,[t[25]||(t[25]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Notes",-1)),h(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=u=>f.form.notes=u),rows:"3",class:"w-full rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-6 py-4 text-base font-medium text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none",placeholder:"Enter instructions..."},null,512),[[V,f.form.notes]])]),e("div",Bt,[e("div",Nt,[t[26]||(t[26]=e("h4",{class:"text-xl font-black text-gray-900"},"Order Items",-1)),e("button",{type:"button",onClick:t[7]||(t[7]=(...u)=>p.addItem&&p.addItem(...u)),class:"bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 shadow-lg transition-all text-sm"}," Add Item ")]),e("div",Lt,[(s(!0),o(N,null,L(f.form.items,(u,x)=>(s(),o("div",{key:x,class:"grid grid-cols-12 gap-5 items-end bg-gray-50/30 p-6 rounded-3xl border-2 border-gray-100 transition-all duration-300"},[e("div",Rt,[t[28]||(t[28]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Product",-1)),h(e("select",{"onUpdate:modelValue":m=>u.product_id=m,onChange:m=>p.handleProductChange(x),required:"",class:"w-full rounded-xl border-2 border-gray-100 bg-white px-3 py-2.5 text-sm font-bold text-gray-800 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},[t[27]||(t[27]=e("option",{value:""},"Select Product",-1)),(s(!0),o(N,null,L(a.products,m=>(s(),o("option",{key:m.id,value:m.id,textContent:i(m.name)},null,8,Ht))),128))],40,zt),[[Y,u.product_id]])]),e("div",Wt,[t[29]||(t[29]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Quantity",-1)),h(e("input",{type:"number","onUpdate:modelValue":m=>u.quantity=m,required:"",class:"w-full rounded-xl border-2 border-gray-100 bg-white px-3 py-2.5 text-sm font-black text-center text-gray-800 outline-none",min:"1"},null,8,Gt),[[V,u.quantity,void 0,{number:!0}]])]),e("div",Kt,[t[30]||(t[30]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Unit Cost",-1)),h(e("input",{type:"number","onUpdate:modelValue":m=>u.unit_cost=m,step:"0.01",required:"",class:"w-full rounded-xl border-2 border-gray-100 bg-white px-3 py-2.5 text-sm font-black text-right text-indigo-600 outline-none",min:"0"},null,8,Jt),[[V,u.unit_cost,void 0,{number:!0}]])]),e("div",Qt,[t[32]||(t[32]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Tax Code",-1)),h(e("select",{"onUpdate:modelValue":m=>u.tax_code_id=m,class:"w-full rounded-xl border-2 border-gray-100 bg-white px-3 py-2.5 text-sm font-bold text-gray-800 outline-none"},[t[31]||(t[31]=e("option",{value:""},"No Tax",-1)),(s(!0),o(N,null,L(a.taxCodes,m=>(s(),o("option",{key:m.id,value:m.id,textContent:i(m.name+" ("+m.rate+"%)")},null,8,Yt))),128))],8,Xt),[[Y,u.tax_code_id]])]),e("div",Zt,[e("div",es,[e("div",{class:"text-base font-black text-gray-900",textContent:i(p.formatCurrency(p.calculateRowTotal(u)))},null,8,ts)]),e("button",{type:"button",onClick:m=>p.removeItem(x),disabled:f.form.items.length===1,class:"text-red-400 hover:text-red-500 hover:bg-red-50 p-2 rounded-xl transition-all disabled:opacity-0",title:"Remove"},[...t[33]||(t[33]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ss)])]))),128))])]),e("div",os,[e("div",rs,[e("div",ns,[t[34]||(t[34]=e("span",null,"Subtotal",-1)),e("span",{class:"text-gray-800",textContent:i(p.formatCurrency(p.totals.subtotal))},null,8,ls)]),e("div",is,[t[35]||(t[35]=e("span",null,"Discount",-1)),h(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=u=>f.form.discount=u),step:"0.01",class:"w-24 bg-gray-50 rounded-lg text-right text-xs font-black px-2 py-1 outline-none"},null,512),[[V,f.form.discount,void 0,{number:!0}]])]),e("div",as,[t[36]||(t[36]=e("span",null,"Tax",-1)),e("span",{class:"text-gray-800",textContent:i(p.formatCurrency(p.totals.tax))},null,8,ds)]),e("div",us,[t[37]||(t[37]=e("span",null,"Shipping",-1)),h(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=u=>f.form.shipping=u),step:"0.01",class:"w-24 bg-gray-50 rounded-lg text-right text-xs font-black px-2 py-1 outline-none"},null,512),[[V,f.form.shipping,void 0,{number:!0}]])]),e("div",cs,[t[38]||(t[38]=e("span",{class:"text-sm font-black text-gray-900 uppercase tracking-widest"},"Total",-1)),e("div",{class:"text-2xl font-black text-indigo-600",textContent:i(p.formatCurrency(p.totals.total))},null,8,ps)])])]),e("div",ms,[e("button",{type:"submit",disabled:f.isSubmitting,class:"bg-indigo-600 text-white px-12 py-5 rounded-2xl font-black text-xl hover:bg-indigo-700 shadow-xl transition-all disabled:opacity-50"},[e("span",{textContent:i(f.isSubmitting?"Saving...":a.initialData?"Update Order":"Place Order")},null,8,fs)],8,gs)])],32),Z(n,{"is-open":f.showSupplierModal,title:"Quick Add Supplier",onClose:t[16]||(t[16]=u=>f.showSupplierModal=!1)},{default:ee(()=>[e("div",bs,[t[42]||(t[42]=e("h3",{class:"text-2xl font-black text-gray-900 mb-6"},"Quick Add Supplier",-1)),e("div",ys,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest mb-1"},"Supplier Name",-1)),h(e("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=u=>f.newSupplier.name=u),class:"w-full rounded-xl border-2 border-gray-100 px-4 py-2 outline-none focus:border-indigo-500"},null,512),[[V,f.newSupplier.name]]),f.supplierError?(s(),o("p",xs,i(f.supplierError),1)):T("",!0)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest mb-1"},"Email (Optional)",-1)),h(e("input",{type:"email","onUpdate:modelValue":t[12]||(t[12]=u=>f.newSupplier.email=u),class:"w-full rounded-xl border-2 border-gray-100 px-4 py-2 outline-none focus:border-indigo-500"},null,512),[[V,f.newSupplier.email]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest mb-1"},"Phone (Optional)",-1)),h(e("input",{type:"tel","onUpdate:modelValue":t[13]||(t[13]=u=>f.newSupplier.phone=u),class:"w-full rounded-xl border-2 border-gray-100 px-4 py-2 outline-none focus:border-indigo-500"},null,512),[[V,f.newSupplier.phone]])])])]),e("div",vs,[e("button",{onClick:t[14]||(t[14]=(...u)=>p.createSupplier&&p.createSupplier(...u)),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"},"Create Supplier"),e("button",{onClick:t[15]||(t[15]=u=>f.showSupplierModal=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")])]),_:1},8,["is-open"])])}const ws=xe(Ct,[["render",hs]]),_s={key:0,class:"origin-top-right absolute right-0 mt-2 w-80 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},ks={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},$s=["href"],Ss={class:"max-h-60 overflow-y-auto"},Cs={class:"text-sm font-medium text-gray-900"},Ps={class:"text-xs text-gray-500 mt-1"},Ts={class:"mt-2 flex justify-between items-center"},js={class:"text-xs text-gray-400"},Us=["href"],As={key:0,class:"px-4 py-6 text-center text-sm text-gray-500"},Ms={__name:"NotificationDropdown",props:{notifications:{type:Array,default:()=>[]},markAllReadUrl:String,readUrlPrefix:String},setup(l){const t=l,a=P(!1),b=()=>{a.value=!a.value},f=()=>{a.value=!0},p=()=>{a.value=!1},n=u=>`${t.readUrlPrefix}${u}`;return(u,x)=>(s(),o("div",{class:"relative mr-2 md:mr-4",onMouseenter:f,onMouseleave:p},[e("button",{onClick:b,class:"relative p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none"},[...x[0]||(x[0]=[e("span",{class:"sr-only"},"View notifications",-1),e("svg",{class:"h-5 md:h-6 w-5 md:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)])]),Z(ye,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:ee(()=>[a.value?(s(),o("div",_s,[e("div",ks,[x[1]||(x[1]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),l.notifications.length>0?(s(),o("a",{key:0,href:l.markAllReadUrl,class:"text-xs text-indigo-600 hover:text-indigo-800"}," Mark all read ",8,$s)):T("",!0)]),e("div",Ss,[(s(!0),o(N,null,L(l.notifications,m=>(s(),o("div",{key:m.id,class:"px-4 py-3 hover:bg-gray-50 transition border-b border-gray-100 last:border-0"},[e("p",Cs,i(m.data?.title||"Notification"),1),e("p",Ps,i(m.data?.message||""),1),e("div",Ts,[e("span",js,i(m.created_time_ago),1),e("a",{href:n(m.id),class:"text-xs text-indigo-600 hover:text-indigo-800"}," Dismiss ",8,Us)])]))),128)),l.notifications.length===0?(s(),o("div",As," No new notifications ")):T("",!0)])])):T("",!0)]),_:1})],32))}};class Vs{constructor(){this.driverObj=null,this.tours={},this.currentTourId=null,this.tenantSlug=window.location.pathname.split("/")[1]||"demo",this.completedTours=window.user?window.user.tours_completed||[]:[]}init(t){this.tours=t,!this.hasCompleted("full_tour")&&window.location.pathname.endsWith("/admin/dashboard")&&setTimeout(()=>this.startTour("full_tour"),1500)}startTour(t){const a=this.tours[t];if(!a){console.error(`Tour '${t}' not found.`);return}this.currentTourId=t;const b=window.innerWidth<768;this.driverObj=Ye({showProgress:!0,animate:!0,allowClose:!0,doneBtnText:"Finish",nextBtnText:"Next",prevBtnText:"Previous",onHighlightStarted:(p,n,u)=>{if(b&&n.popover&&n.popover.side==="right"){const x=document.querySelector('[data-tour="sidebar-toggle"]');x&&x.click()}},onDestroyed:()=>{this.driverObj.hasNextStep()?console.log("Tour paused/closed early"):this.markAsCompleted(this.currentTourId)}});const f=a.map(p=>JSON.parse(JSON.stringify(p)));this.driverObj.setSteps(f),this.driverObj.drive()}hasCompleted(t){return this.completedTours.includes(t)}async markAsCompleted(t){if(!this.completedTours.includes(t)){this.completedTours.push(t);try{await fetch(`/${this.tenantSlug}/api/user/tour-complete`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({tour_id:t})}),console.log(`Tour '${t}' marked as completed.`)}catch(a){console.error("Failed to save tour progress",a)}}}}const He=new Vs,Es={class:"text-right mr-3 hidden sm:block"},Os={class:"font-semibold text-slate-700"},Is={class:"text-xs text-slate-500"},qs={class:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold border border-indigo-200"},Ds={key:0,class:"origin-top-right absolute right-0 top-10 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},Fs={class:"px-4 py-3 border-b border-gray-100 md:hidden"},Bs={class:"text-sm font-medium text-gray-900"},Ns={class:"text-xs text-gray-500 truncate"},Ls=["href"],Rs={class:"border-t border-gray-100"},zs=["action"],Hs=["value"],Ws={__name:"UserDropdown",props:{userName:String,userEmail:String,userRole:{type:String,default:"Admin"},userInitial:String,profileUrl:String,logoutUrl:String,csrfToken:String},setup(l){const t=P(!1),a=()=>{t.value=!t.value},b=()=>{t.value=!0},f=()=>{t.value=!1},p=()=>{t.value=!1,He.startTour("full_tour")};return(n,u)=>(s(),o("div",{class:"flex items-center text-sm border-l pl-6 border-slate-200 h-8 relative",onMouseenter:b,onMouseleave:f},[e("button",{onClick:a,class:"flex items-center focus:outline-none"},[e("div",Es,[e("p",Os,i(l.userName),1),e("p",Is,i(l.userRole),1)]),e("div",qs,i(l.userInitial),1)]),Z(ye,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:ee(()=>[t.value?(s(),o("div",Ds,[e("div",Fs,[e("p",Bs,i(l.userName),1),e("p",Ns,i(l.userEmail),1)]),e("a",{href:l.profileUrl,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...u[0]||(u[0]=[e("i",{class:"fas fa-user-circle mr-2 w-4"},null,-1),B(" My Profile ",-1)])],8,Ls),e("button",{onClick:p,class:"block w-full text-left px-4 py-2 text-sm text-indigo-600 hover:bg-gray-100 font-medium"},[...u[1]||(u[1]=[e("i",{class:"fas fa-play-circle mr-2 w-4"},null,-1),B(" Replay Tour ",-1)])]),e("div",Rs,[e("form",{method:"POST",action:l.logoutUrl},[e("input",{type:"hidden",name:"_token",value:l.csrfToken},null,8,Hs),u[2]||(u[2]=e("button",{type:"submit",class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"},[e("i",{class:"fas fa-sign-out-alt mr-2 w-4"}),B(" Sign Out ")],-1))],8,zs)])])):T("",!0)]),_:1})],32))}},Gs={__name:"SidebarToggle",setup(l){const t=()=>{window.uiState&&(window.uiState.sidebarOpen=!window.uiState.sidebarOpen)};return(a,b)=>(s(),o("button",{onClick:t,class:"text-slate-500 focus:outline-none md:hidden mr-2 md:mr-4 hover:text-slate-700 flex-shrink-0"},[...b[0]||(b[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]))}},Ks={key:0,class:"fixed inset-y-0 left-0 w-64 bg-slate-900 z-30 md:hidden overflow-y-auto"},Js={__name:"MobileSidebar",setup(l){const t=re(()=>window.uiState?.sidebarOpen||!1),a=()=>{window.uiState&&(window.uiState.sidebarOpen=!1)};return(b,f)=>(s(),o("div",null,[Z(ye,{"enter-active-class":"transition-opacity ease-linear duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity ease-linear duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ee(()=>[t.value?(s(),o("div",{key:0,onClick:a,class:"fixed inset-0 bg-slate-900/80 z-20 md:hidden"})):T("",!0)]),_:1}),Z(ye,{"enter-active-class":"transition ease-in-out duration-300 transform","enter-from-class":"-translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in-out duration-300 transform","leave-from-class":"translate-x-0","leave-to-class":"-translate-x-full"},{default:ee(()=>[t.value?(s(),o("div",Ks,[me(b.$slots,"default")])):T("",!0)]),_:3})]))}},Qs={class:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50"},Xs={class:"grid grid-cols-4 h-16"},Ys=["href"],Zs=["href"],eo=["href"],to=["href"],so={__name:"MobileBottomNav",props:{productsUrl:String,posUrl:String,ordersUrl:String,dashboardUrl:String,activeRoute:String},setup(l){const t=l,a=t.activeRoute.includes("products"),b=t.activeRoute.includes("pos"),f=t.activeRoute.includes("orders"),p=t.activeRoute==="dashboard";return(n,u)=>(s(),o("nav",Qs,[e("div",Xs,[e("a",{href:l.productsUrl,class:F(["flex flex-col items-center justify-center text-xs transition",ce(a)?"text-indigo-600":"text-gray-600 hover:text-indigo-600"])},[...u[0]||(u[0]=[e("svg",{class:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),e("span",{class:"font-medium"},"Products",-1)])],10,Ys),e("a",{href:l.posUrl,class:F(["flex flex-col items-center justify-center text-xs transition",ce(b)?"text-indigo-600":"text-gray-600 hover:text-indigo-600"])},[...u[1]||(u[1]=[e("svg",{class:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1),e("span",{class:"font-medium"},"POS",-1)])],10,Zs),e("a",{href:l.ordersUrl,class:F(["flex flex-col items-center justify-center text-xs transition",ce(f)?"text-indigo-600":"text-gray-600 hover:text-indigo-600"])},[...u[2]||(u[2]=[e("svg",{class:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})],-1),e("span",{class:"font-medium"},"Orders",-1)])],10,eo),e("a",{href:l.dashboardUrl,class:F(["flex flex-col items-center justify-center text-xs transition",p?"text-indigo-600":"text-gray-600 hover:text-indigo-600"])},[...u[3]||(u[3]=[e("svg",{class:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),e("span",{class:"font-medium"},"Dashboard",-1)])],10,to)])]))}},oo={id:"offline-indicator",class:"fixed bottom-4 right-4 bg-slate-800 text-white px-4 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-3 transition-transform duration-300"},ro={key:0,class:"flex items-center"},no={key:1,class:"flex items-center"},lo={key:2,class:"ml-2 bg-white text-slate-800 text-xs font-bold px-2 py-0.5 rounded-full"},io={__name:"OfflineIndicator",setup(l){const t=P(navigator.onLine),a=P(0),b=async()=>{window.OfflineManager&&(a.value=await window.OfflineManager.getQueueCount())},f=()=>{t.value=!0,setTimeout(()=>{t.value&&a.value},3e3)},p=()=>{t.value=!1},n=async()=>{await b()};return fe(async()=>{await b(),window.addEventListener("online",f),window.addEventListener("offline",p),window.addEventListener("offline-queue-updated",n)}),_e(()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p),window.removeEventListener("offline-queue-updated",n)}),(u,x)=>h((s(),o("div",oo,[t.value?a.value>0?(s(),o("div",no,[...x[1]||(x[1]=[e("svg",{class:"animate-spin w-5 h-5 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"font-medium"},"Syncing data...",-1)])])):T("",!0):(s(),o("div",ro,[...x[0]||(x[0]=[e("svg",{class:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 011.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})],-1),e("span",{class:"font-medium"},"You are offline.",-1)])])),a.value>0?(s(),o("div",lo,i(a.value)+" pending ",1)):T("",!0)],512)),[[Q,!t.value||a.value>0]])}},ao={props:{tenantSlug:{type:String,required:!0}},data(){return{isVisible:!1,query:"",selectedIndex:0,fuse:null,actions:[{title:"Dashboard",url:"/admin/dashboard",category:"General",keywords:"home stats overview",icon:"fas fa-home"},{title:"Settings",url:"/admin/settings",category:"Settings",keywords:"config setup profile preferences",icon:"fas fa-cog"},{title:"Notifications",url:"/admin/notifications",category:"General",keywords:"alerts messages",icon:"fas fa-bell"},{title:"POS System",url:"/admin/pos",category:"Sales",keywords:"point of sale retail checkout sell",icon:"fas fa-cash-register"},{title:"Orders",url:"/admin/orders",category:"Sales",keywords:"sales transactions history",icon:"fas fa-shopping-cart"},{title:"Create Order",url:"/admin/orders/create",category:"Sales",keywords:"new sale manual order",icon:"fas fa-plus"},{title:"Customers",url:"/admin/customers",category:"Sales",keywords:"clients people buyers",icon:"fas fa-users"},{title:"Products",url:"/admin/products",category:"Inventory",keywords:"items stock catalogue merchandising",icon:"fas fa-box"},{title:"Add Product",url:"/admin/products/create",category:"Inventory",keywords:"new item create stock",icon:"fas fa-plus-circle"},{title:"Categories",url:"/admin/categories",category:"Inventory",keywords:"groups collections taxonomy",icon:"fas fa-tags"},{title:"Warehouses",url:"/admin/warehouses",category:"Inventory",keywords:"locations storage depots",icon:"fas fa-warehouse"},{title:"Stock Transfers",url:"/admin/stock-transfers",category:"Inventory",keywords:"move stock shipment relocation",icon:"fas fa-truck"},{title:"Purchase Orders",url:"/admin/purchase-orders",category:"Inventory",keywords:"procurement buy supply supplier",icon:"fas fa-file-invoice"},{title:"Incomes",url:"/admin/incomes",category:"Finance",keywords:"revenue money in earnings",icon:"fas fa-arrow-up"},{title:"Expenses",url:"/admin/expenses",category:"Finance",keywords:"costs bills money out spending",icon:"fas fa-arrow-down"},{title:"Reports: Sales",url:"/admin/reports/sales",category:"Reports",keywords:"analytics charts performance",icon:"fas fa-chart-line"},{title:"Reports: Inventory",url:"/admin/reports/inventory",category:"Reports",keywords:"stock level valuation value",icon:"fas fa-chart-bar"},{title:"Pages",url:"/admin/pages",category:"Website",keywords:"cms content site",icon:"fas fa-file-alt"},{title:"Banners",url:"/admin/banners",category:"Website",keywords:"sliders promo ads",icon:"fas fa-image"},{title:"Coupons",url:"/admin/coupons",category:"Marketing",keywords:"discounts promo codes",icon:"fas fa-ticket-alt"}]}},computed:{filteredResults(){return this.query?this.fuse.search(this.query).slice(0,10):[]}},mounted(){this.actions.forEach(t=>{t.url.startsWith("/admin")&&(t.url=`/${this.tenantSlug}${t.url}`)});const l={keys:["title","keywords","category"],threshold:.4,includeScore:!0};this.fuse=new Ze(this.actions,l),window.addEventListener("keydown",this.onKeydown)},beforeUnmount(){window.removeEventListener("keydown",this.onKeydown)},methods:{open(){this.isVisible=!0,this.query="",this.selectedIndex=0,this.$nextTick(()=>{this.$refs.searchInput&&this.$refs.searchInput.focus()})},close(){this.isVisible=!1,this.query=""},onKeydown(l){(l.metaKey||l.ctrlKey)&&l.key==="k"&&(l.preventDefault(),this.isVisible?this.close():this.open())},onArrowDown(){this.selectedIndex<this.filteredResults.length-1&&this.selectedIndex++},onArrowUp(){this.selectedIndex>0&&this.selectedIndex--},onEnter(){this.filteredResults.length>0&&this.navigate(this.filteredResults[this.selectedIndex].item.url)},navigate(l){window.location.href=l,this.close()}}},uo={key:0,class:"fixed inset-0 z-[60] overflow-y-auto p-4 sm:p-6 md:p-20",role:"dialog","aria-modal":"true"},co={class:"mx-auto max-w-xl transform divide-y divide-gray-100 overflow-hidden rounded-xl bg-white shadow-2xl ring-1 ring-black ring-opacity-5 transition-all"},po={class:"relative"},mo={key:0,class:"max-h-80 scroll-py-2 overflow-y-auto py-2 text-sm text-gray-800",id:"options",role:"listbox"},go=["onMouseenter","onClick"],fo={class:"flex items-center"},bo={key:1,class:"py-14 px-6 text-center text-sm sm:px-14"};function yo(l,t,a,b,f,p){return s(),o("div",null,[e("button",{onClick:t[0]||(t[0]=(...n)=>p.open&&p.open(...n)),class:"flex items-center gap-2 bg-slate-100 hover:bg-slate-200 text-slate-500 px-3 py-1.5 rounded-lg text-sm border border-slate-200 transition-colors mr-2"},[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),e("span",{class:"hidden md:inline"},"Search...",-1),e("span",{class:"hidden md:inline-flex items-center justify-center bg-white border border-slate-300 rounded px-1.5 text-xs font-mono ml-2"},"âŒ˜K",-1)])]),f.isVisible?(s(),o("div",uo,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-25 transition-opacity",onClick:t[1]||(t[1]=(...n)=>p.close&&p.close(...n)),"aria-hidden":"true"}),e("div",co,[e("div",po,[t[8]||(t[8]=e("svg",{class:"pointer-events-none absolute top-3.5 left-4 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),h(e("input",{ref:"searchInput",type:"text",class:"h-12 w-full border-0 bg-transparent pl-11 pr-4 text-gray-800 placeholder-gray-400 focus:ring-0 sm:text-sm",placeholder:"Search for pages, features, or settings...","onUpdate:modelValue":t[2]||(t[2]=n=>f.query=n),onKeydown:[t[3]||(t[3]=be(te((...n)=>p.onArrowDown&&p.onArrowDown(...n),["prevent"]),["down"])),t[4]||(t[4]=be(te((...n)=>p.onArrowUp&&p.onArrowUp(...n),["prevent"]),["up"])),t[5]||(t[5]=be(te((...n)=>p.onEnter&&p.onEnter(...n),["prevent"]),["enter"])),t[6]||(t[6]=be((...n)=>p.close&&p.close(...n),["esc"]))]},null,544),[[V,f.query]])]),p.filteredResults.length>0?(s(),o("ul",mo,[(s(!0),o(N,null,L(p.filteredResults,(n,u)=>(s(),o("li",{key:u,class:F(["cursor-default select-none px-4 py-2",{"bg-indigo-600 text-white":u===f.selectedIndex}]),onMouseenter:x=>f.selectedIndex=u,onClick:x=>p.navigate(n.item.url)},[e("div",fo,[e("span",{class:F([{"text-indigo-200":u===f.selectedIndex,"text-gray-500":u!==f.selectedIndex},"mr-3"])},[e("i",{class:F(n.item.icon||"fas fa-link")},null,2)],2),e("span",{class:F({"font-semibold":u===f.selectedIndex})},i(n.item.title),3),n.item.category?(s(),o("span",{key:0,class:F([{"text-indigo-200":u===f.selectedIndex,"text-gray-400":u!==f.selectedIndex},"ml-auto text-xs"])},i(n.item.category),3)):T("",!0)])],42,go))),128))])):T("",!0),f.query&&p.filteredResults.length===0?(s(),o("div",bo,[...t[9]||(t[9]=[e("svg",{class:"mx-auto h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),e("p",{class:"mt-4 font-semibold text-gray-900"},"No results found",-1),e("p",{class:"mt-2 text-gray-500"},"No components found for this search term. Please try again.",-1)])])):T("",!0)])])):T("",!0)])}const xo=xe(ao,[["render",yo]]),vo={class:"flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3 mb-8"},ho={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden overflow-x-auto text-sm"},wo={class:"w-full text-left"},_o={class:"divide-y divide-gray-100"},ko={class:"px-6 py-4 font-medium text-indigo-600"},$o=["href"],So={class:"px-6 py-4"},Co={class:"px-6 py-4 text-gray-500"},Po={class:"px-6 py-4 text-right font-medium"},To={class:"px-6 py-4 text-right text-green-600"},jo={class:"px-6 py-4 text-right font-bold text-red-600"},Uo={class:"px-6 py-4 text-right"},Ao=["onClick"],Mo={key:0},Vo={key:0,class:"px-6 py-4 border-t border-gray-200"},Eo={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden overflow-x-auto text-sm"},Oo={class:"w-full text-left"},Io={class:"divide-y divide-gray-100"},qo={class:"px-6 py-4 font-medium text-gray-900 font-mono text-xs"},Do={class:"px-6 py-4"},Fo={class:"px-6 py-4 text-gray-500"},Bo={class:"px-6 py-4 text-right font-medium"},No={class:"px-6 py-4 text-right text-green-600"},Lo={class:"px-6 py-4 text-right font-bold text-red-600"},Ro={class:"px-6 py-4 text-right"},zo=["onClick"],Ho={key:0},Wo={key:0,class:"px-6 py-4 border-t border-gray-200"},Go={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden overflow-x-auto text-sm"},Ko={class:"w-full text-left"},Jo={class:"divide-y divide-gray-100"},Qo={class:"px-6 py-4 text-gray-500"},Xo={class:"px-6 py-4 font-medium"},Yo={class:"px-6 py-4 text-xs"},Zo={class:"px-6 py-4 text-right font-medium"},er={class:"px-6 py-4 text-right font-bold text-green-600"},tr={class:"px-6 py-4 text-right"},sr=["onClick"],or={key:0},rr={key:0,class:"px-6 py-4 border-t border-gray-200"},nr=["action"],lr=["value"],ir={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ar={class:"sm:flex sm:items-start"},dr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ur={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},cr={class:"mt-2 text-sm text-gray-500"},pr={class:"font-bold font-mono"},mr={class:"mt-4 space-y-4"},gr={class:"mt-1 relative rounded-md shadow-sm"},fr={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},br={class:"text-gray-500 sm:text-sm"},yr={class:"grid grid-cols-2 gap-4"},xr=["value"],vr={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg"},hr=["action"],wr=["value"],_r={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},kr={class:"sm:flex sm:items-start"},$r={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Sr={class:"mt-4 space-y-4"},Cr={class:"mt-1 flex space-x-2"},Pr=["value"],Tr={key:0},jr={class:"block text-sm font-medium text-gray-700"},Ur={name:"entity_id",required:"",class:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},Ar={value:""},Mr=["value"],Vr={class:"mt-1 relative rounded-md shadow-sm"},Er={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Or={class:"text-gray-500 sm:text-sm"},Ir={class:"grid grid-cols-2 gap-4"},qr=["value"],Dr={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg"},Fr=["action"],Br=["value"],Nr={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Lr={class:"sm:flex sm:items-start"},Rr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},zr={class:"mt-2 text-sm text-gray-600"},Hr={class:"font-bold"},Wr={class:"font-bold text-green-600"},Gr={class:"mt-4 space-y-4"},Kr={class:"block text-sm font-medium text-gray-700 text-left"},Jr={name:"allocatable_id",required:"",class:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},Qr={value:""},Xr=["value"],Yr=["value"],Zr={class:"mt-1 relative rounded-md shadow-sm"},en={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},tn={class:"text-gray-500 sm:text-sm"},sn=["max","value"],on={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg"},rn={__name:"OutstandingPayments",props:{receivables:{type:Array,default:()=>[]},payables:{type:Array,default:()=>[]},unallocatedPayments:{type:Array,default:()=>[]},customers:{type:Array,default:()=>[]},suppliers:{type:Array,default:()=>[]},receivablesTotal:Number,payablesTotal:Number,unallocatedTotal:Number,receivablesHasPages:Boolean,payablesHasPages:Boolean,unallocatedHasPages:Boolean,currencySymbol:String,tenantSlug:String,csrfToken:String,initialTab:{type:String,default:"receivables"}},setup(l){const t=l,a=P(t.initialTab),b=se({open:!1,type:"",id:null,amount:0,ref:""}),f=se({open:!1,type:"customer"}),p=se({open:!1,payment:null}),n=new Date().toISOString().split("T")[0],u=(j,d,v,O)=>{b.type=j,b.id=d,b.amount=v,b.ref=O,b.open=!0},x=j=>{p.payment=j,p.open=!0},m=j=>j?j.entity_type.includes("Customer"):!1,k=j=>j?m(j)?t.receivables.filter(d=>d.customer_id==j.entity_id):t.payables.filter(d=>d.supplier_id==j.entity_id):[],U=j=>`/${t.tenantSlug}/admin/orders/${j}`,_=()=>b.type==="customer"?`/${t.tenantSlug}/admin/orders/${b.id}/payment`:`/${t.tenantSlug}/admin/supplier-invoices/${b.id}/payment`,M=j=>j?new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",$=j=>j==null?"0.00":parseFloat(j).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return(j,d)=>(s(),o("div",null,[e("div",vo,[e("button",{type:"button",onClick:d[0]||(d[0]=v=>a.value="receivables"),class:F([a.value==="receivables"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100 ring-2 ring-indigo-600 ring-offset-2":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200","whitespace-nowrap py-2.5 px-6 rounded-xl font-bold text-sm transition-all duration-300 flex items-center"])},[d[13]||(d[13]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1)),d[14]||(d[14]=B(" Receivables ",-1)),l.receivablesTotal>0?(s(),o("span",{key:0,class:F([a.value==="receivables"?"bg-white text-indigo-600":"bg-indigo-100 text-indigo-600","ml-2 py-0.5 px-2.5 rounded-full text-xs transition-colors duration-300"])},i(l.receivablesTotal),3)):T("",!0)],2),e("button",{type:"button",onClick:d[1]||(d[1]=v=>a.value="payables"),class:F([a.value==="payables"?"bg-red-600 text-white shadow-lg shadow-red-100 ring-2 ring-red-600 ring-offset-2":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200","whitespace-nowrap py-2.5 px-6 rounded-xl font-bold text-sm transition-all duration-300 flex items-center"])},[d[15]||(d[15]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6"})],-1)),d[16]||(d[16]=B(" Payables ",-1)),l.payablesTotal>0?(s(),o("span",{key:0,class:F([a.value==="payables"?"bg-white text-red-600":"bg-red-100 text-red-600","ml-2 py-0.5 px-2.5 rounded-full text-xs transition-colors duration-300"])},i(l.payablesTotal),3)):T("",!0)],2),e("button",{type:"button",onClick:d[2]||(d[2]=v=>a.value="unallocated"),class:F([a.value==="unallocated"?"bg-green-600 text-white shadow-lg shadow-green-100 ring-2 ring-green-600 ring-offset-2":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200","whitespace-nowrap py-2.5 px-6 rounded-xl font-bold text-sm transition-all duration-300 flex items-center"])},[d[17]||(d[17]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),d[18]||(d[18]=B(" Unallocated ",-1)),l.unallocatedTotal>0?(s(),o("span",{key:0,class:F([a.value==="unallocated"?"bg-white text-green-600":"bg-green-100 text-green-600","ml-2 py-0.5 px-2.5 rounded-full text-xs transition-colors duration-300"])},i(l.unallocatedTotal),3)):T("",!0)],2),d[20]||(d[20]=e("div",{class:"hidden md:block flex-grow"},null,-1)),e("button",{onClick:d[3]||(d[3]=v=>f.open=!0),class:"w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2.5 rounded-xl font-bold text-sm transition-all duration-300 flex items-center shadow-lg shadow-indigo-100"},[...d[19]||(d[19]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),B(" Post Advance Payment ",-1)])])]),h(e("div",null,[e("div",ho,[e("table",wo,[d[22]||(d[22]=e("thead",{class:"bg-gray-50 text-gray-500 border-b border-gray-100 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Order #"),e("th",{class:"px-6 py-3"},"Customer"),e("th",{class:"px-6 py-3"},"Date"),e("th",{class:"px-6 py-3 text-right"},"Total"),e("th",{class:"px-6 py-3 text-right"},"Paid"),e("th",{class:"px-6 py-3 text-right"},"Balance Due"),e("th",{class:"px-6 py-3 text-right"},"Action")])],-1)),e("tbody",_o,[(s(!0),o(N,null,L(l.receivables,v=>(s(),o("tr",{key:v.id,class:"hover:bg-gray-50 transition-colors"},[e("td",ko,[e("a",{href:U(v.id)},i(v.order_number),9,$o)]),e("td",So,i(v.customer?.name),1),e("td",Co,i(M(v.created_at)),1),e("td",Po,i(l.currencySymbol)+i($(v.total)),1),e("td",To,i(l.currencySymbol)+i($(v.amount_paid)),1),e("td",jo,i(l.currencySymbol)+i($(v.total-v.amount_paid)),1),e("td",Uo,[e("button",{onClick:O=>u("customer",v.id,v.total-v.amount_paid,v.order_number),class:"text-indigo-600 hover:text-indigo-900 font-bold uppercase border border-indigo-200 px-3 py-1 rounded-full hover:bg-indigo-50 transition text-[10px]"}," Record Payment ",8,Ao)])]))),128)),l.receivables.length===0?(s(),o("tr",Mo,[...d[21]||(d[21]=[e("td",{colspan:"7",class:"px-6 py-12 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center justify-center text-sm"},[e("svg",{class:"w-12 h-12 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("p",null,"No outstanding receivables found."),e("p",{class:"text-xs mt-1"},"Great job! All customer orders are paid.")])],-1)])])):T("",!0)])]),l.receivablesHasPages?(s(),o("div",Vo,[me(j.$slots,"receivables-pagination")])):T("",!0)])],512),[[Q,a.value==="receivables"]]),h(e("div",null,[e("div",Eo,[e("table",Oo,[d[24]||(d[24]=e("thead",{class:"bg-gray-50 text-gray-500 border-b border-gray-100 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Invoice #"),e("th",{class:"px-6 py-3"},"Supplier"),e("th",{class:"px-6 py-3"},"Date"),e("th",{class:"px-6 py-3 text-right"},"Total"),e("th",{class:"px-6 py-3 text-right"},"Paid"),e("th",{class:"px-6 py-3 text-right"},"Balance Due"),e("th",{class:"px-6 py-3 text-right"},"Action")])],-1)),e("tbody",Io,[(s(!0),o(N,null,L(l.payables,v=>(s(),o("tr",{key:v.id,class:"hover:bg-gray-50 transition-colors"},[e("td",qo,i(v.invoice_number),1),e("td",Do,i(v.supplier?.name),1),e("td",Fo,i(M(v.invoice_date)),1),e("td",Bo,i(l.currencySymbol)+i($(v.total)),1),e("td",No,i(l.currencySymbol)+i($(v.amount_paid)),1),e("td",Lo,i(l.currencySymbol)+i($(v.total-v.amount_paid)),1),e("td",Ro,[e("button",{onClick:O=>u("supplier",v.id,v.total-v.amount_paid,v.invoice_number),class:"text-red-600 hover:text-red-900 font-bold uppercase border border-red-200 px-3 py-1 rounded-full hover:bg-red-50 transition text-[10px]"}," Pay Bill ",8,zo)])]))),128)),l.payables.length===0?(s(),o("tr",Ho,[...d[23]||(d[23]=[e("td",{colspan:"7",class:"px-6 py-12 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center justify-center text-sm"},[e("svg",{class:"w-12 h-12 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("p",null,"No outstanding bills found.")])],-1)])])):T("",!0)])]),l.payablesHasPages?(s(),o("div",Wo,[me(j.$slots,"payables-pagination")])):T("",!0)])],512),[[Q,a.value==="payables"]]),h(e("div",null,[e("div",Go,[e("table",Ko,[d[26]||(d[26]=e("thead",{class:"bg-gray-50 text-gray-500 border-b border-gray-100 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Date"),e("th",{class:"px-6 py-3"},"Entity"),e("th",{class:"px-6 py-3"},"Source"),e("th",{class:"px-6 py-3 text-right"},"Total Amount"),e("th",{class:"px-6 py-3 text-right"},"Unallocated"),e("th",{class:"px-6 py-3 text-right"},"Action")])],-1)),e("tbody",Jo,[(s(!0),o(N,null,L(l.unallocatedPayments,v=>(s(),o("tr",{key:v.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Qo,i(M(v.payment_date)),1),e("td",Xo,i(v.entity?.name),1),e("td",Yo,[e("span",{class:F([v.entity_type.includes("Customer")?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700","px-2 py-0.5 rounded-full font-semibold"])},i(v.entity_type.includes("Customer")?"Customer":"Supplier"),3)]),e("td",Zo,i(l.currencySymbol)+i($(v.amount)),1),e("td",er,i(l.currencySymbol)+i($(v.unallocated_amount)),1),e("td",tr,[e("button",{onClick:O=>x(v),class:"text-green-600 hover:text-green-900 font-bold uppercase border border-green-200 px-3 py-1 rounded-full hover:bg-green-50 transition text-[10px]"}," Allocate ",8,sr)])]))),128)),l.unallocatedPayments.length===0?(s(),o("tr",or,[...d[25]||(d[25]=[e("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center justify-center text-sm"},[e("svg",{class:"w-12 h-12 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm3-2a2 2 0 11-4 0 2 2 0 014 0z"})]),e("p",null,"No unallocated payments found.")])],-1)])])):T("",!0)])]),l.unallocatedHasPages?(s(),o("div",rr,[me(j.$slots,"unallocated-pagination")])):T("",!0)])],512),[[Q,a.value==="unallocated"]]),Z(ue,{"is-open":b.open,"max-width":"lg",onClose:d[6]||(d[6]=v=>b.open=!1)},{default:ee(()=>[e("form",{method:"POST",action:_(),class:"w-full"},[e("input",{type:"hidden",name:"_token",value:l.csrfToken},null,8,lr),e("div",ir,[e("div",ar,[d[34]||(d[34]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",dr,[e("h3",ur,[d[27]||(d[27]=B(" Record Payment ",-1)),e("span",null,i(b.type==="customer"?"from Customer":"to Supplier"),1)]),e("div",cr,[d[28]||(d[28]=B(" Record payment for ",-1)),e("span",pr,i(b.ref),1),d[29]||(d[29]=B(". ",-1))]),e("div",mr,[e("div",null,[d[30]||(d[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amount",-1)),e("div",gr,[e("div",fr,[e("span",br,i(l.currencySymbol),1)]),h(e("input",{type:"number",name:"amount",step:"0.01","onUpdate:modelValue":d[4]||(d[4]=v=>b.amount=v),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md border-2"},null,512),[[V,b.amount]])])]),e("div",yr,[e("div",null,[d[31]||(d[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Payment Date",-1)),e("input",{type:"date",name:"payment_date",value:ce(n),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md border-2"},null,8,xr)]),d[32]||(d[32]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Method"),e("select",{name:"payment_method",class:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[e("option",{value:"bank_transfer"},"Bank Transfer"),e("option",{value:"cash"},"Cash"),e("option",{value:"check"},"Check"),e("option",{value:"credit_card"},"Credit Card")])],-1))]),d[33]||(d[33]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Reference / Notes"),e("input",{type:"text",name:"reference",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md border-2"})],-1))])])])]),e("div",vr,[d[35]||(d[35]=e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm"}," Confirm Payment ",-1)),e("button",{onClick:d[5]||(d[5]=v=>b.open=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border-2 border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],8,nr)]),_:1},8,["is-open"]),Z(ue,{"is-open":f.open,"max-width":"lg",onClose:d[10]||(d[10]=v=>f.open=!1)},{default:ee(()=>[e("form",{method:"POST",action:`/${l.tenantSlug}/admin/payments/advance`,class:"w-full"},[e("input",{type:"hidden",name:"_token",value:l.csrfToken},null,8,wr),e("div",_r,[e("div",kr,[d[44]||(d[44]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 sm:mx-0 sm:h-10 sm:w-10 text-indigo-600"},[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1)),e("div",$r,[d[42]||(d[42]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Post Advance Payment",-1)),d[43]||(d[43]=e("div",{class:"mt-2 text-sm text-gray-500"},"Record a payment that isn't yet tied to a specific order or bill.",-1)),e("div",Sr,[e("div",null,[d[36]||(d[36]=e("label",{class:"block text-sm font-medium text-gray-700"},"Source Type",-1)),e("div",Cr,[e("button",{type:"button",onClick:d[7]||(d[7]=v=>f.type="customer"),class:F([f.type==="customer"?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500","flex-1 border py-2 px-3 rounded-md text-sm font-medium transition-all"])},"Customer",2),e("button",{type:"button",onClick:d[8]||(d[8]=v=>f.type="supplier"),class:F([f.type==="supplier"?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500","flex-1 border py-2 px-3 rounded-md text-sm font-medium transition-all"])},"Supplier",2),e("input",{type:"hidden",name:"type",value:f.type},null,8,Pr)])]),f.type?(s(),o("div",Tr,[e("label",jr,i(f.type==="customer"?"Customer":"Supplier"),1),e("select",Ur,[e("option",Ar,"Select "+i(f.type==="customer"?"Customer":"Supplier"),1),(s(!0),o(N,null,L(f.type==="customer"?l.customers:l.suppliers,v=>(s(),o("option",{key:v.id,value:v.id},i(v.name),9,Mr))),128))])])):T("",!0),e("div",null,[d[38]||(d[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amount",-1)),e("div",Vr,[e("div",Er,[e("span",Or,i(l.currencySymbol),1)]),d[37]||(d[37]=e("input",{type:"number",name:"amount",required:"",step:"0.01",class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md border-2"},null,-1))])]),e("div",Ir,[e("div",null,[d[39]||(d[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),e("input",{type:"date",name:"payment_date",value:ce(n),required:"",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md border-2"},null,8,qr)]),d[40]||(d[40]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Method"),e("select",{name:"payment_method",class:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[e("option",{value:"bank_transfer"},"Bank Transfer"),e("option",{value:"cash"},"Cash"),e("option",{value:"check"},"Check")])],-1))]),d[41]||(d[41]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Reference / Notes"),e("input",{type:"text",name:"notes",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md border-2"})],-1))])])])]),e("div",Dr,[d[45]||(d[45]=e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm"}," Save Advance Payment ",-1)),e("button",{onClick:d[9]||(d[9]=v=>f.open=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border-2 border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],8,hr)]),_:1},8,["is-open"]),Z(ue,{"is-open":p.open,"max-width":"lg",onClose:d[12]||(d[12]=v=>p.open=!1)},{default:ee(()=>[p.payment?(s(),o("form",{key:0,method:"POST",action:`/${l.tenantSlug}/admin/payments/${p.payment.id}/allocate`,class:"w-full"},[e("input",{type:"hidden",name:"_token",value:l.csrfToken},null,8,Br),e("div",Nr,[e("div",Lr,[d[51]||(d[51]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10 text-green-600"},[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Rr,[d[50]||(d[50]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Allocate Payment",-1)),e("div",zr,[d[46]||(d[46]=B(" Allocating credit from ",-1)),e("span",Hr,i(p.payment.entity?.name),1),d[47]||(d[47]=e("br",null,null,-1)),d[48]||(d[48]=B(" Available: ",-1)),e("span",Wr,i(l.currencySymbol)+i($(p.payment.unallocated_amount)),1)]),e("div",Gr,[e("div",null,[e("label",Kr,"Match to Outstanding "+i(m(p.payment)?"Order":"Invoice"),1),e("select",Jr,[e("option",Qr,"Select "+i(m(p.payment)?"Order":"Invoice"),1),(s(!0),o(N,null,L(k(p.payment),v=>(s(),o("option",{key:v.id,value:v.id},i(m(p.payment)?v.order_number:v.invoice_number)+" ("+i(l.currencySymbol)+i($(v.total-v.amount_paid))+" due) ",9,Xr))),128))]),e("input",{type:"hidden",name:"allocatable_type",value:m(p.payment)?"Order":"SupplierInvoice"},null,8,Yr)]),e("div",null,[d[49]||(d[49]=e("label",{class:"block text-sm font-medium text-gray-700 text-left"},"Amount to Allocate",-1)),e("div",Zr,[e("div",en,[e("span",tn,i(l.currencySymbol),1)]),e("input",{type:"number",name:"amount",required:"",step:"0.01",max:p.payment.unallocated_amount,value:p.payment.unallocated_amount,class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 pr-12 sm:text-sm border-2 border-gray-300 rounded-md"},null,8,sn)])])])])])]),e("div",on,[d[52]||(d[52]=e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm"}," Allocate Credit ",-1)),e("button",{onClick:d[11]||(d[11]=v=>p.open=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border-2 border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],8,Fr)):T("",!0)]),_:1},8,["is-open"])]))}},nn={class:"relative group flex-shrink-0"},ln=["src","alt"],an={key:1,class:"h-10 w-10 md:h-16 md:w-16 bg-gray-200 rounded flex items-center justify-center text-gray-400"},dn={key:0,class:"fas fa-upload text-white text-xs md:text-sm"},un={key:1,class:"fas fa-spinner fa-spin text-white text-xs md:text-sm"},Fe={__name:"ProductImageUpload",props:{productId:{type:Number,required:!0},initialImageUrl:{type:String,default:null},productName:{type:String,default:"Product Image"},uploadUrl:{type:String,required:!0},csrfToken:{type:String,required:!0}},setup(l){const t=l,a=P(t.initialImageUrl),b=P(!1),f=P(!1),p=x=>{f.value=!1;const m=x.dataTransfer.files[0];m&&m.type.startsWith("image/")&&u(m)},n=x=>{const m=x.target.files[0];m&&u(m)},u=async x=>{b.value=!0;const m=new FormData;m.append("image",x),m.append("_token",t.csrfToken);try{const U=await(await fetch(t.uploadUrl,{method:"POST",body:m,headers:{"X-CSRF-TOKEN":t.csrfToken,Accept:"application/json"}})).json();U.success?a.value=U.url:alert("Upload failed: "+(U.message||"Unknown error"))}catch(k){console.error("Upload error:",k),alert("Upload failed. Please try again.")}finally{b.value=!1}};return(x,m)=>(s(),o("div",nn,[a.value?(s(),o("img",{key:0,src:a.value,alt:l.productName,class:"h-10 w-10 md:h-16 md:w-16 rounded object-cover"},null,8,ln)):(s(),o("div",an,[...m[3]||(m[3]=[e("span",{class:"text-xl md:text-2xl"},"ðŸ“¦",-1)])])),e("div",{onDragover:m[0]||(m[0]=te(k=>f.value=!0,["prevent"])),onDragleave:m[1]||(m[1]=k=>f.value=!1),onDrop:te(p,["prevent"]),onClick:m[2]||(m[2]=k=>x.$refs.fileInput.click()),class:F([f.value?"opacity-100":"opacity-0 group-hover:opacity-100","absolute inset-0 bg-black bg-opacity-60 rounded flex items-center justify-center cursor-pointer transition-opacity duration-200"])},[b.value?(s(),o("i",un)):(s(),o("i",dn))],34),e("input",{type:"file",ref:"fileInput",onChange:n,accept:"image/*",class:"hidden"},null,544)]))}},cn={class:"content-wrapper"},pn={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 md:mb-6 gap-3"},mn={class:"flex gap-2 w-full md:w-auto"},gn={class:"relative"},fn={class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-100"},bn=["href"],yn=["href"],xn=["href"],vn=["href"],hn={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},wn={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},_n={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},kn=["action"],$n=["value"],Sn={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Cn={class:"sm:flex sm:items-start"},Pn={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Tn={class:"mt-2"},jn={class:"mt-4 text-xs text-gray-400"},Un=["href"],An={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Mn={class:"bg-white rounded-lg shadow p-3 md:p-6 mb-4 md:mb-6"},Vn={class:"bg-white rounded-lg shadow p-2 md:p-4 mb-3 md:mb-4"},En={class:"flex flex-col md:flex-row items-start md:items-center justify-between gap-2"},On={class:"flex items-center gap-2 md:gap-4 w-full md:w-auto"},In={class:"text-xs md:text-sm text-gray-600"},qn={class:"flex gap-2"},Dn={class:"flex items-center justify-center min-h-screen px-4"},Fn={class:"space-y-4"},Bn={class:"flex gap-2 pt-4"},Nn={class:"hidden lg:block bg-white rounded-lg shadow overflow-hidden"},Ln={class:"min-w-full divide-y divide-gray-200"},Rn={class:"bg-gray-50"},zn={class:"px-6 py-3 text-left"},Hn=["checked"],Wn={class:"bg-white divide-y divide-gray-200"},Gn={class:"px-6 py-4"},Kn=["value"],Jn={class:"px-6 py-4 whitespace-nowrap"},Qn={class:"flex items-center"},Xn={class:"text-sm font-medium text-gray-900"},Yn={key:0,class:"text-xs text-yellow-600"},Zn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},el={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},tl={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},sl={class:"px-6 py-4 whitespace-nowrap"},ol={key:1,class:"text-sm text-gray-400"},rl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},nl={class:"px-6 py-4 whitespace-nowrap"},ll={key:0,class:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},il={key:1,class:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},al={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},dl=["href"],ul=["onClick"],cl={key:0},pl={colspan:"9",class:"px-6 py-12 text-center text-gray-500"},ml=["href"],gl={class:"lg:hidden space-y-3"},fl={class:"flex items-start justify-between mb-2"},bl={class:"flex items-center gap-2"},yl=["value"],xl={class:"text-sm font-semibold text-gray-900 line-clamp-2"},vl={key:0,class:"text-lg"},hl={class:"flex gap-3"},wl={class:"flex-1 min-w-0 space-y-1"},_l={class:"flex items-center gap-2"},kl={class:"text-xs font-medium text-gray-900"},$l={class:"flex items-center gap-2"},Sl={class:"text-xs text-gray-700"},Cl={class:"flex items-center gap-2"},Pl={class:"text-sm font-bold text-gray-900"},Tl={class:"flex items-center gap-2"},jl={key:1,class:"text-xs text-gray-400"},Ul={class:"flex gap-2 mt-3 pt-3 border-t border-gray-200"},Al=["href"],Ml=["onClick"],Vl={class:"mt-6"},El={__name:"ProductList",props:{products:{type:Object,required:!0},currencySymbol:String,csrfToken:String,tenantSlug:String,routes:{type:Object,required:!0}},setup(l){const t=l,a=P(!1),b=P(!1),f=P(""),p=P([]),n=P(!1),u=se({price:"",start:"",end:""}),x=re({get:()=>p.value.length===t.products.data.length&&t.products.data.length>0,set:O=>{O?p.value=t.products.data.map(g=>g.id):p.value=[]}}),m=()=>{},k=O=>parseFloat(O).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),U=O=>O?new Date(O).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",_=O=>O.stock_quantity<=(O.low_stock_threshold||10),M=()=>{if(!f.value){alert("Please select an action first");return}if(p.value.length===0){alert("Please select at least one product");return}if(f.value==="enable_flash_sale"){n.value=!0;return}f.value==="delete"&&!confirm(`Are you sure you want to delete ${p.value.length} products?`)||j(f.value)},$=()=>{if(!u.price||!u.start||!u.end){alert("Please fill all flash sale fields");return}j("enable_flash_sale",{flash_sale_price:u.price,flash_sale_start:u.start,flash_sale_end:u.end})},j=(O,g={})=>{const C=document.createElement("form");C.method="POST",C.action=t.routes.bulkAction;const z=(D,c)=>{const S=document.createElement("input");S.type="hidden",S.name=D,S.value=c,C.appendChild(S)};z("_token",t.csrfToken),z("action",O);for(const[D,c]of Object.entries(g))z(D,c);p.value.forEach(D=>{z("product_ids[]",D)}),document.body.appendChild(C),C.submit()},d=O=>{if(!confirm("Are you sure you want to delete this product?"))return;const g=document.createElement("form");g.method="POST",g.action=`${t.routes.base}/${O}`;const C=(z,D)=>{const c=document.createElement("input");c.type="hidden",c.name=z,c.value=D,g.appendChild(c)};C("_token",t.csrfToken),C("_method","DELETE"),document.body.appendChild(g),g.submit()},v={mounted(O,g){O.clickOutsideEvent=function(C){O===C.target||O.contains(C.target)||g.value(C,O)},document.body.addEventListener("click",O.clickOutsideEvent)},unmounted(O){document.body.removeEventListener("click",O.clickOutsideEvent)}};return(O,g)=>(s(),o("div",cn,[e("div",pn,[g[18]||(g[18]=e("h2",{class:"text-xl md:text-2xl font-bold text-gray-800"},"Products",-1)),e("div",mn,[e("div",gn,[h((s(),o("button",{onClick:g[0]||(g[0]=C=>a.value=!a.value),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition border-2 border-gray-300 flex items-center gap-2"},[...g[13]||(g[13]=[e("i",{class:"fas fa-file-export"},null,-1),B(" Export / Import ",-1),e("i",{class:"fas fa-chevron-down text-xs ml-1"},null,-1)])])),[[v,()=>a.value=!1]]),h(e("div",fn,[e("a",{href:l.routes.export,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...g[14]||(g[14]=[e("i",{class:"fas fa-download mr-2"},null,-1),B(" Export CSV ",-1)])],8,bn),e("a",{href:l.routes.template,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...g[15]||(g[15]=[e("i",{class:"fas fa-file-csv mr-2"},null,-1),B(" Download Template ",-1)])],8,yn),e("button",{onClick:g[1]||(g[1]=C=>{b.value=!0,a.value=!1}),class:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...g[16]||(g[16]=[e("i",{class:"fas fa-file-upload mr-2"},null,-1),B(" Import CSV ",-1)])]),e("a",{href:l.routes.bulkUpload,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...g[17]||(g[17]=[e("i",{class:"fas fa-images mr-2"},null,-1),B(" Bulk Upload Images ",-1)])],8,xn)],512),[[Q,a.value]])]),e("a",{href:l.routes.create,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 md:px-6 py-2 rounded-lg transition flex-1 md:flex-none text-center"}," + Add Product ",8,vn)])]),b.value?(s(),o("div",hn,[e("div",wn,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:g[2]||(g[2]=C=>b.value=!1),"aria-hidden":"true"}),g[23]||(g[23]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),e("div",_n,[e("form",{action:l.routes.import,method:"POST",enctype:"multipart/form-data"},[e("input",{type:"hidden",name:"_token",value:l.csrfToken},null,8,$n),e("div",Sn,[e("div",Cn,[g[21]||(g[21]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("i",{class:"fas fa-file-import text-blue-600"})],-1)),e("div",Pn,[g[20]||(g[20]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},"Import Products",-1)),e("div",Tn,[g[19]||(g[19]=ge(`<p class="text-sm text-gray-500 mb-4"> Upload a CSV file or ZIP file (containing CSV + images folder) to import products. Existing products with matching SKU will be updated. </p><div class="bg-blue-50 border-l-4 border-blue-400 p-3 mb-4"><p class="text-xs text-blue-700 font-medium mb-1">ZIP Import Structure:</p><pre class="text-xs text-blue-600 font-mono">products.zip
â”œâ”€â”€ products.csv
â””â”€â”€ images/
    â”œâ”€â”€ SKU-001.jpg
    â””â”€â”€ SKU-002.png</pre></div><div class="mt-2"><input type="file" name="file" accept=".csv,.txt,.zip" required class="w-full border-2 border-gray-300 p-2 rounded bg-gray-50 text-sm"></div>`,3)),e("div",jn,[e("a",{href:l.routes.template,class:"text-blue-600 hover:underline"},"Don't have a template? Download here.",8,Un)])])])])]),e("div",An,[g[22]||(g[22]=e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"}," Import Data ",-1)),e("button",{type:"button",onClick:g[3]||(g[3]=C=>b.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border-2 border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],8,kn)])])])):T("",!0),e("div",Mn,[me(O.$slots,"filters")]),e("div",Vn,[e("div",En,[e("div",On,[e("span",In,i(p.value.length)+" selected ",1),e("div",qn,[h(e("select",{"onUpdate:modelValue":g[4]||(g[4]=C=>f.value=C),class:"border-2 border-gray-300 rounded-lg px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm focus:ring-2 focus:ring-indigo-500"},[...g[24]||(g[24]=[ge('<option value="">Bulk Actions</option><option value="mark_featured">â­ Mark as Featured</option><option value="unmark_featured">Remove Featured</option><option value="enable_flash_sale">ðŸ”¥ Enable Flash Sale</option><option value="disable_flash_sale">Disable Flash Sale</option><option value="activate">âœ… Activate</option><option value="deactivate">âŒ Deactivate</option><option value="delete">ðŸ—‘ï¸ Delete</option>',8)])],512),[[Y,f.value]]),e("button",{type:"button",onClick:M,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-1.5 md:py-2 rounded-lg text-xs md:text-sm transition"}," Apply ")])])])]),n.value?(s(),o("div",{key:1,class:"fixed inset-0 z-50 overflow-y-auto",onClick:g[10]||(g[10]=C=>n.value=!1)},[e("div",Dn,[g[29]||(g[29]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1)),e("div",{class:"relative bg-white rounded-lg p-6 max-w-md w-full",onClick:g[9]||(g[9]=te(()=>{},["stop"]))},[g[28]||(g[28]=e("h3",{class:"text-lg font-bold mb-4"},"Set Flash Sale",-1)),e("div",Fn,[e("div",null,[g[25]||(g[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Flash Sale Price",-1)),h(e("input",{type:"number","onUpdate:modelValue":g[5]||(g[5]=C=>u.price=C),step:"0.01",class:"w-full border-2 border-gray-300 rounded-lg px-4 py-2"},null,512),[[V,u.price]])]),e("div",null,[g[26]||(g[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Date & Time",-1)),h(e("input",{type:"datetime-local","onUpdate:modelValue":g[6]||(g[6]=C=>u.start=C),class:"w-full border-2 border-gray-300 rounded-lg px-4 py-2"},null,512),[[V,u.start]])]),e("div",null,[g[27]||(g[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"End Date & Time",-1)),h(e("input",{type:"datetime-local","onUpdate:modelValue":g[7]||(g[7]=C=>u.end=C),class:"w-full border-2 border-gray-300 rounded-lg px-4 py-2"},null,512),[[V,u.end]])]),e("div",Bn,[e("button",{onClick:$,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg"}," Apply Flash Sale "),e("button",{onClick:g[8]||(g[8]=C=>n.value=!1),class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg"}," Cancel ")])])])])])):T("",!0),e("div",Nn,[e("table",Ln,[e("thead",Rn,[e("tr",null,[e("th",zn,[e("input",{type:"checkbox",checked:x.value,onChange:m,class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,Hn)]),g[30]||(g[30]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Product",-1)),g[31]||(g[31]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Serial Number",-1)),g[32]||(g[32]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category",-1)),g[33]||(g[33]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Price",-1)),g[34]||(g[34]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Stock",-1)),g[35]||(g[35]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Expiry",-1)),g[36]||(g[36]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status",-1)),g[37]||(g[37]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Actions",-1))])]),e("tbody",Wn,[(s(!0),o(N,null,L(l.products.data,C=>(s(),o("tr",{key:C.id},[e("td",Gn,[h(e("input",{type:"checkbox",value:C.id,"onUpdate:modelValue":g[11]||(g[11]=z=>p.value=z),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,Kn),[[ne,p.value]])]),e("td",Jn,[e("div",Qn,[Z(Fe,{"product-id":C.id,"initial-image-url":C.image_url,"product-name":C.name,"upload-url":`/admin/products/${C.id}/quick-image`,"csrf-token":l.csrfToken,"tenant-slug":l.tenantSlug,class:"mr-3"},null,8,["product-id","initial-image-url","product-name","upload-url","csrf-token","tenant-slug"]),e("div",null,[e("div",Xn,i(C.name),1),C.is_featured?(s(),o("span",Yn,"â­ Featured")):T("",!0)])])]),e("td",Zn,i(C.sku),1),e("td",el,i(C.category?.name||"-"),1),e("td",tl,i(l.currencySymbol)+i(k(C.price)),1),e("td",sl,[C.track_inventory?(s(),o("span",{key:0,class:F(["text-sm",_(C)?"text-red-600 font-bold":"text-gray-900"])},i(C.stock_quantity),3)):(s(),o("span",ol,"N/A"))]),e("td",rl,i(U(C.expiry_date)),1),e("td",nl,[C.is_active?(s(),o("span",ll,"Active")):(s(),o("span",il,"Inactive"))]),e("td",al,[e("a",{href:`${l.routes.base}/${C.id}/edit`,class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,dl),e("button",{type:"button",onClick:z=>d(C.id),class:"text-red-600 hover:text-red-900"},"Delete",8,ul)])]))),128)),l.products.data.length===0?(s(),o("tr",cl,[e("td",pl,[g[38]||(g[38]=B(" No products found. ",-1)),e("a",{href:l.routes.create,class:"text-indigo-600 hover:underline"},"Create your first product",8,ml)])])):T("",!0)])])]),e("div",gl,[(s(!0),o(N,null,L(l.products.data,C=>(s(),o("div",{key:C.id,class:"bg-white rounded-lg shadow p-3"},[e("div",fl,[e("div",bl,[h(e("input",{type:"checkbox",value:C.id,"onUpdate:modelValue":g[12]||(g[12]=z=>p.value=z),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,yl),[[ne,p.value]]),e("h3",xl,i(C.name),1)]),C.is_featured?(s(),o("span",vl,"â­")):T("",!0)]),e("div",hl,[Z(Fe,{"product-id":C.id,"initial-image-url":C.image_url,"product-name":C.name,"upload-url":`/admin/products/${C.id}/quick-image`,"csrf-token":l.csrfToken,"tenant-slug":l.tenantSlug},null,8,["product-id","initial-image-url","product-name","upload-url","csrf-token","tenant-slug"]),e("div",wl,[e("div",_l,[g[39]||(g[39]=e("span",{class:"text-xs text-gray-500"},"S/N:",-1)),e("span",kl,i(C.sku),1)]),e("div",$l,[g[40]||(g[40]=e("span",{class:"text-xs text-gray-500"},"Category:",-1)),e("span",Sl,i(C.category?.name||"-"),1)]),e("div",Cl,[g[41]||(g[41]=e("span",{class:"text-xs text-gray-500"},"Price:",-1)),e("span",Pl,i(l.currencySymbol)+i(k(C.price)),1)]),e("div",Tl,[g[42]||(g[42]=e("span",{class:"text-xs text-gray-500"},"Stock:",-1)),C.track_inventory?(s(),o("span",{key:0,class:F(["text-xs",_(C)?"text-red-600 font-bold":"text-gray-900"])},i(C.stock_quantity)+" units ",3)):(s(),o("span",jl,"N/A"))])])]),e("div",Ul,[e("a",{href:`${l.routes.base}/${C.id}/edit`,class:"flex-1 text-center bg-indigo-50 hover:bg-indigo-100 text-indigo-600 px-3 py-2 rounded text-sm font-medium transition"},[...g[43]||(g[43]=[e("i",{class:"fas fa-edit mr-1"},null,-1),B(" Edit ",-1)])],8,Al),e("button",{type:"button",onClick:z=>d(C.id),class:"flex-1 text-center bg-red-50 hover:bg-red-100 text-red-600 px-3 py-2 rounded text-sm font-medium transition"},[...g[44]||(g[44]=[e("i",{class:"fas fa-trash mr-1"},null,-1),B(" Delete ",-1)])],8,Ml)])]))),128))]),e("div",Vl,[me(O.$slots,"pagination")])]))}},Ol={class:"max-w-4xl mx-auto px-3 md:px-0"},Il={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 md:mb-6 gap-2"},ql={class:"text-xl md:text-2xl font-bold text-gray-800"},Dl=["href"],Fl=["action"],Bl=["value"],Nl={key:0,type:"hidden",name:"_method",value:"PUT"},Ll={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Rl={class:"md:col-span-2"},zl={key:0,class:"text-red-500 text-xs mt-1"},Hl={class:"flex gap-2"},Wl=["value"],Gl={class:"flex gap-2"},Kl=["value"],Jl={key:0,class:"text-red-500 text-xs mt-1"},Ql={key:0,class:"text-red-500 text-xs mt-1"},Xl={key:0,class:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-red-50 rounded-lg border border-red-100"},Yl={class:"flex gap-2"},Zl={class:"md:col-span-2"},ei={class:"md:col-span-2"},ti={class:"md:col-span-2 border-t pt-6"},si={class:"grid grid-cols-1 gap-4"},oi={class:"flex items-center"},ri={key:0,class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},ni={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},li={class:"block text-sm font-medium text-gray-700 mb-1"},ii={class:"text-xs text-gray-500"},ai=["name","onUpdate:modelValue"],di={class:"mt-4 p-3 bg-indigo-50 rounded border border-indigo-200"},ui={class:"text-sm text-indigo-800"},ci={key:1},pi={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mi={key:1,class:"md:col-span-2 border-t pt-6"},gi={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},fi=["src"],bi={key:0,class:"absolute top-2 left-2 bg-indigo-600 text-white text-xs px-2 py-1 rounded"},yi={class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition flex items-center justify-center rounded-lg"},xi=["href","data-id"],vi=["id","action"],hi=["value"],wi={class:"md:col-span-2 border-t pt-6"},_i={class:"block text-sm font-medium text-gray-700 mb-2"},ki={class:"flex flex-col gap-4"},$i={class:"flex gap-2"},Si={class:"md:col-span-2 border-t pt-6"},Ci={class:"flex items-center space-x-6"},Pi={class:"flex items-center"},Ti={class:"flex items-center"},ji={class:"mt-6 md:mt-8 flex flex-col sm:flex-row justify-end gap-3 sm:gap-4"},Ui=["href"],Ai={type:"submit",class:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition"},Mi={class:"mt-4"},Vi={key:0,class:"text-red-500 text-xs mt-1"},Ei={class:"mt-4 flex justify-end gap-2"},Oi={class:"mt-4"},Ii={key:0,class:"text-red-500 text-xs mt-1"},qi={class:"mt-4 flex justify-end gap-2"},Di={class:"relative bg-black rounded-lg overflow-hidden aspect-video mb-4"},Fi={key:0,class:"mb-4"},Bi=["value"],Ni={class:"relative bg-black rounded-lg overflow-hidden aspect-video mb-4"},Li=["src"],Ri={class:"flex justify-center gap-4"},zi={__name:"ProductForm",props:{isEdit:{type:Boolean,default:!1},initialProduct:{type:Object,default:()=>({})},oldInput:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})},categories:{type:Array,default:()=>[]},brands:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]},existingImages:{type:Array,default:()=>[]},actionUrl:{type:String,required:!0},csrfToken:{type:String,required:!0},routes:{type:Object,required:!0}},setup(l){const t=l,a=P([...t.categories||[]]),b=P([...t.brands||[]]),f=H=>{if(t.oldInput.warehouse_stock&&t.oldInput.warehouse_stock[H])return t.oldInput.warehouse_stock[H];if(t.initialProduct.warehouses){const y=t.initialProduct.warehouses.find(E=>E.id===H);return y?y.pivot.quantity:0}return 0},p={};(t.warehouses||[]).forEach(H=>{p[H.id]=f(H.id)});const n=se({name:t.oldInput.name||t.initialProduct.name||"",category_id:t.oldInput.category_id||t.initialProduct.category_id||"",brand_id:t.oldInput.brand_id||t.initialProduct.brand_id||"",sku:t.oldInput.sku||t.initialProduct.sku||"",price:t.oldInput.price||t.initialProduct.price||"",compare_at_price:t.oldInput.compare_at_price||t.initialProduct.compare_at_price||"",cost_price:t.oldInput.cost_price||t.initialProduct.cost_price||"",barcode:t.oldInput.barcode||t.initialProduct.barcode||"",flash_sale_price:t.oldInput.flash_sale_price||t.initialProduct.flash_sale_price||"",flash_sale_end:t.oldInput.flash_sale_end||(t.initialProduct.flash_sale_end?String(t.initialProduct.flash_sale_end).substring(0,16):"")||"",short_description:t.oldInput.short_description||t.initialProduct.short_description||"",description:t.oldInput.description||t.initialProduct.description||"",track_inventory:t.oldInput.track_inventory?!0:t.initialProduct.track_inventory!==void 0?!!t.initialProduct.track_inventory:!1,stock_quantity:t.oldInput.stock_quantity??t.initialProduct.stock_quantity??0,warehouse_stock:p,low_stock_threshold:t.oldInput.low_stock_threshold??t.initialProduct.low_stock_threshold??10,expiry_date:t.oldInput.expiry_date||(t.initialProduct.expiry_date?String(t.initialProduct.expiry_date).substring(0,10):"")||"",is_active:t.oldInput.is_active!==void 0?!!t.oldInput.is_active:t.initialProduct.is_active!==void 0?!!t.initialProduct.is_active:!0,is_featured:t.oldInput.is_featured!==void 0?!!t.oldInput.is_featured:!!t.initialProduct.is_featured});n.cost_price&&n.price&&parseFloat(n.cost_price)>0&&($.value=((parseFloat(n.price)-parseFloat(n.cost_price))/parseFloat(n.cost_price)*100).toFixed(2));const u=re(()=>Object.values(n.warehouse_stock).reduce((H,y)=>H+(parseInt(y)||0),0)),x=P(!1),m=P(""),k=P(""),U=P(!1),_=P(""),M=P(""),$=P(""),j=()=>{if(n.cost_price&&$.value){const H=parseFloat(n.cost_price),y=parseFloat($.value);!isNaN(H)&&!isNaN(y)&&(n.price=(H+H*(y/100)).toFixed(2))}},d=P(!1),v=P(null),O=P([]),g=P(null);let C=null;const z=async()=>{d.value=!0,await ot(),C||(C=new Le);try{await C.decodeFromVideoDevice(g.value,v.value,(y,E)=>{y&&(n.barcode=y.text,D()),E&&!(E instanceof et)&&console.error(E)});const H=await C.listVideoInputDevices();if(O.value=H,!g.value&&H.length>0){const y=H.find(E=>E.label.toLowerCase().includes("back")||E.label.toLowerCase().includes("environment"));g.value=y?y.deviceId:H[0].deviceId}}catch(H){console.error(H),alert("Error starting scanner: "+H.message),d.value=!1}},D=()=>{C&&C.reset(),d.value=!1},c=P(!1),S=P(null),W=P(null),K=P(null),R=P(null);let r=null;const w=H=>t.errors[H]?"border-red-500":"border-gray-300",G=async()=>{if(!m.value.trim()){k.value="Name is required";return}k.value="";try{const y=await(await fetch(t.routes.storeCategory,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t.csrfToken,Accept:"application/json"},body:JSON.stringify({name:m.value,is_active:!0})})).json();y.success?(a.value.push(y.category),n.category_id=y.category.id,x.value=!1,m.value=""):k.value=y.message||"Error"}catch{k.value="Error occurred"}},le=async()=>{if(!_.value.trim()){M.value="Name is required";return}M.value="";try{const y=await(await fetch(t.routes.storeBrand,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t.csrfToken,Accept:"application/json"},body:JSON.stringify({name:_.value,is_active:!0})})).json();y.success?(b.value.push(y.brand),n.brand_id=y.brand.id,U.value=!1,_.value=""):M.value=y.message||"Error"}catch{M.value="Error occurred"}},je=async()=>{c.value=!0,R.value=null;try{r=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),setTimeout(()=>{S.value&&(S.value.srcObject=r)},100)}catch{alert("Could not access camera."),c.value=!1}},oe=()=>{r&&r.getTracks().forEach(H=>H.stop()),c.value=!1,r=null},ke=()=>{const H=S.value,y=W.value;y.width=H.videoWidth,y.height=H.videoHeight,y.getContext("2d").drawImage(H,0,0,y.width,y.height),R.value=y.toDataURL("image/jpeg")},$e=()=>{R.value=null},Ue=()=>{if(!R.value)return;const H=atob(R.value.split(",")[1]),y=R.value.split(",")[0].split(":")[1].split(";")[0],E=new ArrayBuffer(H.length),pe=new Uint8Array(E);for(let ie=0;ie<H.length;ie++)pe[ie]=H.charCodeAt(ie);const Ae=new Blob([E],{type:y}),Se=new File([Ae],"camera-capture-"+Date.now()+".jpg",{type:y}),we=new DataTransfer;K.value.files&&Array.from(K.value.files).forEach(ie=>we.items.add(ie)),we.items.add(Se),K.value.files=we.files,oe()};return(H,y)=>(s(),o("div",Ol,[e("div",Il,[e("h2",ql,i(l.isEdit?"Edit Product":"Add New Product"),1),e("a",{href:l.routes.index,class:"text-sm text-gray-600 hover:text-gray-900"},"â† Back to Products",8,Dl)]),e("form",{action:l.actionUrl,method:"POST",enctype:"multipart/form-data",class:"bg-white rounded-lg shadow p-4 md:p-8"},[e("input",{type:"hidden",name:"_token",value:l.csrfToken},null,8,Bl),l.isEdit?(s(),o("input",Nl)):T("",!0),e("div",Ll,[e("div",Rl,[y[28]||(y[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Name *",-1)),h(e("input",{type:"text",name:"name","onUpdate:modelValue":y[0]||(y[0]=E=>n.name=E),required:"",class:F(["w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-indigo-500",w("name")])},null,2),[[V,n.name]]),l.errors.name?(s(),o("p",zl,i(l.errors.name[0]),1)):T("",!0)]),e("div",null,[y[31]||(y[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category",-1)),e("div",Hl,[h(e("select",{name:"category_id","onUpdate:modelValue":y[1]||(y[1]=E=>n.category_id=E),class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[y[29]||(y[29]=e("option",{value:""},"Select Category",-1)),(s(!0),o(N,null,L(a.value,E=>(s(),o("option",{key:E.id,value:E.id},i(E.name),9,Wl))),128))],512),[[Y,n.category_id]]),e("button",{type:"button",onClick:y[2]||(y[2]=E=>x.value=!0),class:"px-3 py-2 bg-gray-100 hover:bg-gray-200 border-2 border-gray-300 rounded-lg text-gray-600"},[...y[30]||(y[30]=[e("i",{class:"fas fa-plus"},null,-1)])])])]),e("div",null,[y[34]||(y[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Brand",-1)),e("div",Gl,[h(e("select",{name:"brand_id","onUpdate:modelValue":y[3]||(y[3]=E=>n.brand_id=E),class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[y[32]||(y[32]=e("option",{value:""},"Select Brand",-1)),(s(!0),o(N,null,L(b.value,E=>(s(),o("option",{key:E.id,value:E.id},i(E.name),9,Kl))),128))],512),[[Y,n.brand_id]]),e("button",{type:"button",onClick:y[4]||(y[4]=E=>U.value=!0),class:"px-3 py-2 bg-gray-100 hover:bg-gray-200 border-2 border-gray-300 rounded-lg text-gray-600"},[...y[33]||(y[33]=[e("i",{class:"fas fa-plus"},null,-1)])])])]),e("div",null,[y[35]||(y[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Serial Number (Auto-generated if empty)",-1)),h(e("input",{type:"text",name:"sku","onUpdate:modelValue":y[5]||(y[5]=E=>n.sku=E),class:F(["w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-indigo-500",w("sku")])},null,2),[[V,n.sku]]),l.errors.sku?(s(),o("p",Jl,i(l.errors.sku[0]),1)):T("",!0)]),e("div",null,[y[36]||(y[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Selling Price *",-1)),h(e("input",{type:"number",name:"price","onUpdate:modelValue":y[6]||(y[6]=E=>n.price=E),step:"0.01",min:"0",required:"",class:F(["w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-indigo-500",w("price")])},null,2),[[V,n.price]]),l.errors.price?(s(),o("p",Ql,i(l.errors.price[0]),1)):T("",!0)]),l.isEdit?(s(),o("div",Xl,[e("div",null,[y[37]||(y[37]=e("label",{class:"block text-sm font-medium text-red-600 mb-2"},"âš¡ Flash Sale Price",-1)),h(e("input",{type:"number",name:"flash_sale_price","onUpdate:modelValue":y[7]||(y[7]=E=>n.flash_sale_price=E),step:"0.01",min:"0",class:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 bg-white",placeholder:"Optional override"},null,512),[[V,n.flash_sale_price]])]),e("div",null,[y[38]||(y[38]=e("label",{class:"block text-sm font-medium text-red-600 mb-2"},"âš¡ Flash Sale Ends At",-1)),h(e("input",{type:"datetime-local",name:"flash_sale_end","onUpdate:modelValue":y[8]||(y[8]=E=>n.flash_sale_end=E),class:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 bg-white"},null,512),[[V,n.flash_sale_end]])])])):T("",!0),e("div",null,[y[39]||(y[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Compare At Price",-1)),h(e("input",{type:"number",name:"compare_at_price","onUpdate:modelValue":y[9]||(y[9]=E=>n.compare_at_price=E),step:"0.01",min:"0",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[V,n.compare_at_price]])]),e("div",null,[y[40]||(y[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cost Price",-1)),h(e("input",{type:"number",name:"cost_price","onUpdate:modelValue":y[10]||(y[10]=E=>n.cost_price=E),step:"0.01",min:"0",onInput:j,class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,544),[[V,n.cost_price]])]),e("div",null,[y[41]||(y[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Profit Margin (%)",-1)),h(e("input",{type:"number","onUpdate:modelValue":y[11]||(y[11]=E=>$.value=E),step:"0.01",onInput:j,placeholder:"Enter % to calc price",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,544),[[V,$.value]])]),e("div",null,[y[43]||(y[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Barcode",-1)),e("div",Yl,[h(e("input",{type:"text",name:"barcode","onUpdate:modelValue":y[12]||(y[12]=E=>n.barcode=E),class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[V,n.barcode]]),e("button",{type:"button",onClick:z,class:"px-3 py-2 bg-gray-100 hover:bg-gray-200 border-2 border-gray-300 rounded-lg text-gray-600 whitespace-nowrap"},[...y[42]||(y[42]=[e("i",{class:"fas fa-barcode mr-1"},null,-1),B(" Scan ",-1)])])])]),e("div",Zl,[y[44]||(y[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Short Description",-1)),h(e("textarea",{name:"short_description","onUpdate:modelValue":y[13]||(y[13]=E=>n.short_description=E),rows:"2",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[V,n.short_description]])]),e("div",ei,[y[45]||(y[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),h(e("textarea",{name:"description","onUpdate:modelValue":y[14]||(y[14]=E=>n.description=E),rows:"4",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[V,n.description]])]),e("div",ti,[y[53]||(y[53]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Inventory",-1)),e("div",si,[e("div",null,[e("label",oi,[h(e("input",{type:"checkbox",name:"track_inventory",value:"1","onUpdate:modelValue":y[15]||(y[15]=E=>n.track_inventory=E),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2"},null,512),[[ne,n.track_inventory]]),y[46]||(y[46]=e("span",{class:"text-sm font-medium text-gray-700"},"Track Inventory",-1))])]),l.warehouses.length>0?(s(),o("div",ri,[y[49]||(y[49]=e("h4",{class:"text-sm font-bold text-gray-700 mb-3"},"Stock by Warehouse",-1)),e("div",ni,[(s(!0),o(N,null,L(l.warehouses,E=>(s(),o("div",{key:E.id},[e("label",li,[B(i(E.name)+" ",1),e("span",ii,"("+i(E.code)+")",1)]),h(e("input",{type:"number",name:`warehouse_stock[${E.id}]`,"onUpdate:modelValue":pe=>n.warehouse_stock[E.id]=pe,min:"0",class:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,8,ai),[[V,n.warehouse_stock[E.id]]])]))),128))]),e("div",di,[e("p",ui,[y[47]||(y[47]=e("strong",null,"Total Stock:",-1)),e("span",null,i(u.value),1),y[48]||(y[48]=B(" units ",-1))])])])):(s(),o("div",ci,[y[50]||(y[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Stock Quantity",-1)),h(e("input",{type:"number",name:"stock_quantity","onUpdate:modelValue":y[16]||(y[16]=E=>n.stock_quantity=E),min:"0",ref:"totalStockInput",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[V,n.stock_quantity]])])),e("div",pi,[e("div",null,[y[51]||(y[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Low Stock Threshold",-1)),h(e("input",{type:"number",name:"low_stock_threshold","onUpdate:modelValue":y[17]||(y[17]=E=>n.low_stock_threshold=E),min:"0",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[V,n.low_stock_threshold]])]),e("div",null,[y[52]||(y[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Expiry Date",-1)),h(e("input",{type:"date",name:"expiry_date","onUpdate:modelValue":y[18]||(y[18]=E=>n.expiry_date=E),class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[V,n.expiry_date]])])])])]),l.isEdit&&l.existingImages.length>0?(s(),o("div",mi,[y[56]||(y[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Images",-1)),e("div",gi,[(s(!0),o(N,null,L(l.existingImages,E=>(s(),o("div",{key:E.id,class:"relative group"},[e("img",{src:E.url,class:"h-32 w-full object-cover rounded-lg border border-gray-200"},null,8,fi),E.is_primary?(s(),o("span",bi,"Primary")):T("",!0),e("div",yi,[e("a",{href:`${l.routes.deleteImageBase}/${E.id}`,onclick:"event.preventDefault(); if(confirm('Delete this image?')) document.getElementById('delete-img-' + this.getAttribute('data-id')).submit()","data-id":E.id,class:"text-white hover:text-red-400 cursor-pointer"},[...y[54]||(y[54]=[e("i",{class:"fas fa-trash text-2xl"},null,-1)])],8,xi)])]))),128))]),(s(!0),o(N,null,L(l.existingImages,E=>(s(),o("div",{key:`form-${E.id}`,class:"hidden"},[e("form",{id:`delete-img-${E.id}`,action:`${l.routes.deleteImageBase}/${E.id}`,method:"POST"},[e("input",{type:"hidden",name:"_token",value:l.csrfToken},null,8,hi),y[55]||(y[55]=e("input",{type:"hidden",name:"_method",value:"DELETE"},null,-1))],8,vi)]))),128))])):T("",!0),e("div",wi,[e("label",_i,i(l.isEdit?"Add More Images":"Product Images"),1),e("div",ki,[e("div",$i,[e("input",{type:"file",ref_key:"imageInput",ref:K,name:"images[]",multiple:"",accept:"image/*",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),e("button",{type:"button",onClick:je,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2 whitespace-nowrap"},[...y[57]||(y[57]=[e("i",{class:"fas fa-camera"},null,-1),B(" Use Camera ",-1)])])]),y[58]||(y[58]=e("p",{class:"text-sm text-gray-500"},"You can select multiple images or capture them from your camera. First image will be the primary image.",-1))])]),e("div",Si,[e("div",Ci,[e("label",Pi,[h(e("input",{type:"checkbox",name:"is_active",value:"1","onUpdate:modelValue":y[19]||(y[19]=E=>n.is_active=E),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2"},null,512),[[ne,n.is_active]]),y[59]||(y[59]=e("span",{class:"text-sm font-medium text-gray-700"},"Active",-1))]),e("label",Ti,[h(e("input",{type:"checkbox",name:"is_featured",value:"1","onUpdate:modelValue":y[20]||(y[20]=E=>n.is_featured=E),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2"},null,512),[[ne,n.is_featured]]),y[60]||(y[60]=e("span",{class:"text-sm font-medium text-gray-700"},"Featured Product",-1))])])])]),e("div",ji,[e("a",{href:l.routes.index,class:"px-6 py-2 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-center"}," Cancel ",8,Ui),e("button",Ai,i(l.isEdit?"Update Product":"Create Product"),1)])],8,Fl),Z(ue,{"is-open":x.value,title:"Create New Category",onClose:y[23]||(y[23]=E=>x.value=!1)},{default:ee(()=>[e("div",Mi,[y[61]||(y[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),h(e("input",{type:"text","onUpdate:modelValue":y[21]||(y[21]=E=>m.value=E),onKeydown:be(G,["enter"]),class:"w-full px-3 py-2 border-2 border-gray-300 rounded-md"},null,544),[[V,m.value]]),k.value?(s(),o("p",Vi,i(k.value),1)):T("",!0)]),e("div",Ei,[e("button",{onClick:y[22]||(y[22]=E=>x.value=!1),class:"px-4 py-2 bg-gray-200 rounded text-gray-700"},"Cancel"),e("button",{onClick:G,class:"px-4 py-2 bg-indigo-600 text-white rounded"},"Create")])]),_:1},8,["is-open"]),Z(ue,{"is-open":U.value,title:"Create New Brand",onClose:y[26]||(y[26]=E=>U.value=!1)},{default:ee(()=>[e("div",Oi,[y[62]||(y[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),h(e("input",{type:"text","onUpdate:modelValue":y[24]||(y[24]=E=>_.value=E),onKeydown:be(le,["enter"]),class:"w-full px-3 py-2 border-2 border-gray-300 rounded-md"},null,544),[[V,_.value]]),M.value?(s(),o("p",Ii,i(M.value),1)):T("",!0)]),e("div",qi,[e("button",{onClick:y[25]||(y[25]=E=>U.value=!1),class:"px-4 py-2 bg-gray-200 rounded text-gray-700"},"Cancel"),e("button",{onClick:le,class:"px-4 py-2 bg-indigo-600 text-white rounded"},"Create")])]),_:1},8,["is-open"]),Z(ue,{"is-open":d.value,title:"Scan Barcode",onClose:D,"max-width":"max-w-2xl"},{default:ee(()=>[e("div",Di,[e("video",{ref_key:"scannerVideoElement",ref:v,class:"w-full h-full object-contain"},null,512),y[63]||(y[63]=e("div",{class:"absolute inset-0 border-2 border-red-500 opacity-50 pointer-events-none",style:{top:"20%",bottom:"20%",left:"10%",right:"10%"}},null,-1))]),O.value.length>1?(s(),o("div",Fi,[y[64]||(y[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Select Camera",-1)),h(e("select",{"onUpdate:modelValue":y[27]||(y[27]=E=>g.value=E),onChange:z,class:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg"},[(s(!0),o(N,null,L(O.value,E=>(s(),o("option",{key:E.deviceId,value:E.deviceId},i(E.label||"Camera "+(O.value.indexOf(E)+1)),9,Bi))),128))],544),[[Y,g.value]])])):T("",!0),e("div",{class:"flex justify-center"},[e("button",{onClick:D,class:"px-6 py-2 bg-gray-600 text-white rounded-full"}," Cancel ")])]),_:1},8,["is-open"]),Z(ue,{"is-open":c.value,title:"Capture Image",onClose:oe,"max-width":"max-w-2xl"},{default:ee(()=>[e("div",Ni,[e("video",{ref_key:"videoElement",ref:S,class:"w-full h-full object-contain",autoplay:"",playsinline:""},null,512),e("canvas",{ref_key:"canvasElement",ref:W,class:"hidden"},null,512),R.value?(s(),o("img",{key:0,src:R.value,class:"absolute inset-0 w-full h-full object-contain bg-black"},null,8,Li)):T("",!0)]),e("div",Ri,[R.value?(s(),o(N,{key:1},[e("button",{onClick:$e,class:"px-6 py-2 bg-gray-600 text-white rounded-full"},[...y[66]||(y[66]=[e("i",{class:"fas fa-redo mr-2"},null,-1),B(" Retake ",-1)])]),e("button",{onClick:Ue,class:"px-6 py-2 bg-green-600 text-white rounded-full"},[...y[67]||(y[67]=[e("i",{class:"fas fa-check mr-2"},null,-1),B(" Use Photo ",-1)])])],64)):(s(),o("button",{key:0,onClick:ke,class:"px-6 py-2 bg-indigo-600 text-white rounded-full"},[...y[65]||(y[65]=[e("i",{class:"fas fa-camera mr-2"},null,-1),B(" Capture ",-1)])]))])]),_:1},8,["is-open"])]))}},Hi={class:"bg-white rounded-lg shadow p-8"},Wi={class:"text-center"},Gi={class:"text-sm text-gray-500 mt-2"},Ki={key:0,class:"mt-6"},Ji={class:"text-lg font-medium text-gray-900 mb-4"},Qi={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Xi=["src"],Yi={class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded flex items-center justify-center"},Zi=["onClick"],ea={class:"text-xs text-gray-600 mt-1 truncate"},ta={class:"text-xs font-mono text-indigo-600"},sa={key:0,class:"mt-6 bg-white rounded-lg shadow p-6"},oa={class:"grid grid-cols-3 gap-4 mb-6"},ra={class:"bg-green-50 p-4 rounded-lg"},na={class:"text-2xl font-bold text-green-700"},la={class:"bg-yellow-50 p-4 rounded-lg"},ia={class:"text-2xl font-bold text-yellow-700"},aa={class:"bg-red-50 p-4 rounded-lg"},da={class:"text-2xl font-bold text-red-700"},ua={key:0,class:"mb-6"},ca={class:"space-y-2"},pa={class:"flex items-center"},ma=["src"],ga={class:"text-sm font-medium text-gray-900"},fa={class:"text-xs text-gray-500"},ba={key:1,class:"mb-6"},ya={class:"space-y-2"},xa={class:"text-sm font-medium text-gray-900"},va={class:"text-xs text-gray-500"},ha={key:2},wa={class:"space-y-2"},_a={class:"text-sm font-medium text-gray-900"},ka={class:"text-xs text-red-600"},$a={__name:"BulkUploadManager",props:{uploadUrl:{type:String,required:!0},csrfToken:{type:String,required:!0}},setup(l){const t=l,a=P([]),b=P(!1),f=P(!1),p=P(0),n=P(null),u=P(null),x=j=>{const d=j.replace(/\.[^/.]+$/,""),v=[/^([A-Z0-9\-_]+)$/i,/^([A-Z0-9\-_]+?)[\-_](front|back|side|image|photo|main|\d+)/i,/[_\-]([A-Z0-9\-_]+)$/i];for(let O of v){const g=d.match(O);if(g)return g[1].toUpperCase()}return d.toUpperCase()},m=j=>{j.filter(v=>v.type.startsWith("image/")).forEach(v=>{const O=new FileReader;O.onload=g=>{a.value.push({file:v,name:v.name,preview:g.target.result,sku:x(v.name)})},O.readAsDataURL(v)})},k=j=>{b.value=!1;const d=Array.from(j.dataTransfer.files);m(d)},U=j=>{const d=Array.from(j.target.files);m(d),j.target.value=""},_=j=>{a.value.splice(j,1)},M=async()=>{if(a.value.length===0)return;f.value=!0,p.value=0;const j=new FormData;a.value.forEach((d,v)=>{j.append(`images[${v}]`,d.file)}),p.value=a.value.length;try{const v=await(await fetch(t.uploadUrl,{method:"POST",body:j,headers:{"X-CSRF-TOKEN":t.csrfToken,Accept:"application/json"}})).json();v.success?(n.value=v,a.value=[]):alert("Upload failed: "+(v.message||"Unknown error"))}catch(d){console.error("Upload error:",d),alert("Upload failed. Please try again.")}finally{f.value=!1}},$=()=>{a.value=[],n.value=null,p.value=0};return(j,d)=>(s(),o(N,null,[e("div",Hi,[e("div",{onDragover:d[0]||(d[0]=te(v=>b.value=!0,["prevent"])),onDragleave:d[1]||(d[1]=v=>b.value=!1),onDrop:te(k,["prevent"]),onClick:d[2]||(d[2]=v=>j.$refs.fileInput.click()),class:F([b.value?"border-indigo-500 bg-indigo-50":"border-gray-300","border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-colors duration-200"])},[h(e("div",null,[...d[3]||(d[3]=[e("i",{class:"fas fa-cloud-upload-alt text-6xl text-gray-400 mb-4"},null,-1),e("p",{class:"text-lg font-medium text-gray-700 mb-2"},"Drag and drop images here",-1),e("p",{class:"text-sm text-gray-500"},"or click to browse",-1)])],512),[[Q,!f.value&&a.value.length===0]]),h(e("div",Wi,[d[4]||(d[4]=e("i",{class:"fas fa-spinner fa-spin text-6xl text-indigo-600 mb-4"},null,-1)),d[5]||(d[5]=e("p",{class:"text-lg font-medium text-gray-700"},"Uploading images...",-1)),e("p",Gi,"Processing "+i(p.value)+" of "+i(a.value.length)+" images",1)],512),[[Q,f.value]]),e("input",{type:"file",ref_key:"fileInput",ref:u,onChange:U,accept:"image/*",multiple:"",class:"hidden"},null,544)],34),a.value.length>0&&!f.value?(s(),o("div",Ki,[e("h3",Ji,"Selected Images ("+i(a.value.length)+")",1),e("div",Qi,[(s(!0),o(N,null,L(a.value,(v,O)=>(s(),o("div",{key:O,class:"relative group"},[e("img",{src:v.preview,class:"w-full h-24 object-cover rounded border"},null,8,Xi),e("div",Yi,[e("button",{onClick:te(g=>_(O),["stop"]),class:"text-white hover:text-red-400"},[...d[6]||(d[6]=[e("i",{class:"fas fa-times-circle text-2xl"},null,-1)])],8,Zi)]),e("p",ea,i(v.name),1),e("p",ta,i(v.sku),1)]))),128))]),e("button",{onClick:M,class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 rounded-lg transition"},[d[7]||(d[7]=e("i",{class:"fas fa-upload mr-2"},null,-1)),B(" Upload "+i(a.value.length)+" Images ",1)])])):T("",!0)]),n.value?(s(),o("div",sa,[d[16]||(d[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Upload Results",-1)),e("div",oa,[e("div",ra,[d[8]||(d[8]=e("p",{class:"text-sm text-green-600 font-medium"},"Matched",-1)),e("p",na,i(n.value.summary.matched||0),1)]),e("div",la,[d[9]||(d[9]=e("p",{class:"text-sm text-yellow-600 font-medium"},"Unmatched",-1)),e("p",ia,i(n.value.summary.unmatched||0),1)]),e("div",aa,[d[10]||(d[10]=e("p",{class:"text-sm text-red-600 font-medium"},"Errors",-1)),e("p",da,i(n.value.summary.errors||0),1)])]),n.value.results.matched&&n.value.results.matched.length>0?(s(),o("div",ua,[d[12]||(d[12]=e("h4",{class:"font-medium text-green-700 mb-2"},"âœ“ Successfully Uploaded",-1)),e("div",ca,[(s(!0),o(N,null,L(n.value.results.matched,v=>(s(),o("div",{key:v.filename,class:"flex items-center justify-between bg-green-50 p-3 rounded"},[e("div",pa,[e("img",{src:v.url,class:"w-12 h-12 object-cover rounded mr-3"},null,8,ma),e("div",null,[e("p",ga,i(v.product_name),1),e("p",fa,"SKU: "+i(v.sku)+" â€¢ "+i(v.filename),1)])]),d[11]||(d[11]=e("i",{class:"fas fa-check-circle text-green-600"},null,-1))]))),128))])])):T("",!0),n.value.results.unmatched&&n.value.results.unmatched.length>0?(s(),o("div",ba,[d[14]||(d[14]=e("h4",{class:"font-medium text-yellow-700 mb-2"},"âš  No Matching Product Found",-1)),e("div",ya,[(s(!0),o(N,null,L(n.value.results.unmatched,v=>(s(),o("div",{key:v.filename,class:"flex items-center justify-between bg-yellow-50 p-3 rounded"},[e("div",null,[e("p",xa,i(v.filename),1),e("p",va,"Extracted SKU: "+i(v.sku),1)]),d[13]||(d[13]=e("i",{class:"fas fa-exclamation-triangle text-yellow-600"},null,-1))]))),128))])])):T("",!0),n.value.results.errors&&n.value.results.errors.length>0?(s(),o("div",ha,[d[15]||(d[15]=e("h4",{class:"font-medium text-red-700 mb-2"},"âœ— Upload Errors",-1)),e("div",wa,[(s(!0),o(N,null,L(n.value.results.errors,v=>(s(),o("div",{key:v.filename,class:"bg-red-50 p-3 rounded"},[e("p",_a,i(v.filename),1),e("p",ka,i(v.error),1)]))),128))])])):T("",!0),e("button",{onClick:$,class:"mt-6 w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 rounded-lg transition"}," Upload More Images ")])):T("",!0)],64))}},Sa={class:"mb-2 md:mb-6 flex flex-col gap-1.5 md:flex-row md:gap-4"},Ca=["value"],Pa={key:0,class:"fixed inset-0 bg-black z-50 flex flex-col"},Ta={class:"flex-1 relative"},ja={key:1,class:"flex justify-center py-10"},Ua={key:2,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-1.5 md:gap-4"},Aa=["onClick"],Ma={class:"aspect-square relative mb-1.5 md:mb-3 bg-gray-100 rounded overflow-hidden"},Va=["src"],Ea={class:"font-semibold text-gray-800 text-[10px] md:text-sm mb-0.5 md:mb-1 leading-tight line-clamp-2"},Oa={class:"text-indigo-600 font-bold text-[10px] md:text-base"},Ia={class:"w-[30%] bg-white flex flex-col h-full shadow-xl z-10 border-l border-gray-200"},qa={class:"p-3 md:p-6 border-b border-gray-100 bg-gray-50 flex items-center justify-between"},Da={class:"text-lg md:text-xl font-bold text-gray-800 flex items-center gap-2"},Fa={class:"text-xs md:text-sm font-normal text-gray-500 bg-white px-2 py-1 rounded border"},Ba={class:"flex items-center gap-2"},Na={class:"px-3 md:px-6 pt-3 md:pt-4"},La=["value"],Ra={class:"flex-1 overflow-y-auto p-2 md:p-4 space-y-2 md:space-y-3"},za={key:0,class:"h-full flex flex-col items-center justify-center text-gray-400"},Ha={class:"flex items-center justify-between mb-2"},Wa={class:"flex-1 min-w-0 mr-2"},Ga=["title"],Ka={class:"text-xs text-gray-500"},Ja={class:"flex items-center space-x-2"},Qa=["onClick"],Xa={class:"font-bold w-6 text-center text-sm"},Ya=["onClick"],Za={class:"text-right ml-2 w-16 md:w-20"},ed={class:"font-bold text-gray-800 text-xs md:text-sm"},td={class:"flex justify-between items-center"},sd=["onClick"],od=["onUpdate:modelValue"],rd=["value"],nd={class:"p-3 md:p-6 bg-gray-50 border-t border-gray-200 space-y-2"},ld={class:"flex justify-between text-gray-600 text-sm"},id={class:"flex justify-between text-gray-600 text-sm"},ad={class:"flex justify-between text-lg md:text-xl font-bold text-gray-900 border-t border-gray-200 pt-2 mt-2"},dd={class:"mt-4"},ud=["value"],cd={class:"mt-4"},pd={class:"relative rounded-md shadow-sm"},md={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},gd={class:"text-gray-500 text-sm"},fd={class:"text-lg md:text-xl font-bold"},bd={key:0,class:"text-xs text-red-500 mt-1 text-right"},yd=["disabled"],xd={key:0},vd={key:1,class:"animate-pulse flex items-center gap-2"},hd={key:1,class:"mt-2 text-center text-xs text-orange-600 font-bold"},wd={__name:"PosSystem",props:{initialCategories:{type:Array,default:()=>[]},initialProducts:{type:Array,default:()=>[]},initialPaymentTypes:{type:Array,default:()=>[]},initialCustomers:{type:Array,default:()=>[]},taxCodes:{type:Array,default:()=>[]},taxRate:{type:[Number,String],default:0},enableTax:{type:Boolean,default:!1},currencySymbol:{type:String,default:"$"},tenantId:{type:[String,Number],required:!0},tenantName:{type:String,default:"Store"},routes:{type:Object,required:!0},csrfToken:{type:String,required:!0}},setup(l){const t=l,a=P(null),b=P([]),f=P(t.initialCategories||[]),p=P(t.initialPaymentTypes||[]),n=P(t.initialCustomers||[]),u=P([]),x=P(""),m=P(""),k=P(null),U=P(""),_=P(""),M=P(!1),$=P(!0),j=P(navigator.onLine),d=P(0),v=P(!1),O=P(!1),g=P(null);let C=null,z="",D=null,c=null,S=null;const W=new(window.AudioContext||window.webkitAudioContext),K=re(()=>b.value.filter(I=>{const A=x.value.toLowerCase(),q=I.name.toLowerCase().includes(A)||I.barcode&&I.barcode.toLowerCase().includes(A)||I.sku&&I.sku.toLowerCase().includes(A),ae=m.value===""||I.category_id==m.value;return q&&ae})),R=re(()=>u.value.reduce((I,A)=>I+A.price*A.quantity,0)),r=re(()=>u.value.reduce((I,A)=>{if(!A.tax_code_id)return I;const q=t.taxCodes.find(de=>de.id==A.tax_code_id),ae=q?parseFloat(q.rate):0;return I+A.price*A.quantity*(ae/100)},0)),w=re(()=>R.value+r.value),G=re(()=>(parseFloat(_.value)||0)-w.value),le=re(()=>u.value.length===0||M.value||!k.value?!1:(parseFloat(_.value)||0)>=w.value-.01);he([u,_,k],()=>{y()},{deep:!0}),he(j,I=>{I&&Ge()}),fe(async()=>{a.value=new tt(`pos_db_${t.tenantId}`),a.value.version(1).stores({products:"id, category_id, name",customers:"id, name",paymentTypes:"id",orders:"++id, synced"}),window.addEventListener("online",()=>j.value=!0),window.addEventListener("offline",()=>j.value=!1),document.addEventListener("fullscreenchange",Se),typeof Ce<"u"&&document.addEventListener("keypress",Ce),await je(),Me(),y(),nextTick(()=>{const I=document.getElementById("amount-tendered-input");I&&I.focus()}),p.value.length>0&&(k.value=p.value[0].id)}),_e(()=>{window.removeEventListener("online",()=>j.value=!0),window.removeEventListener("offline",()=>j.value=!1),document.removeEventListener("fullscreenchange",Se),typeof Ce<"u"&&document.removeEventListener("keypress",Ce),document.body.classList.remove("pos-fullscreen"),ie()});const je=async()=>{$.value=!0;try{if(j.value){const A=t.initialProducts.map(q=>({id:q.id,name:q.name,price:parseFloat(q.price),category_id:q.category_id,image_url:q.image_url,stock:q.stock_quantity||0,sku:q.sku||"",barcode:q.barcode||""}));await a.value.products.bulkPut(A),await a.value.customers.bulkPut(t.initialCustomers.map(q=>({id:q.id,name:q.name}))),await a.value.paymentTypes.bulkPut(t.initialPaymentTypes.map(q=>({id:q.id,name:q.name})))}const I=await a.value.products.toArray();I.length===0&&t.initialProducts.length>0?b.value=t.initialProducts.map(A=>({id:A.id,name:A.name,price:parseFloat(A.price),category_id:A.category_id,image_url:A.image_url,stock:A.stock_quantity||0,sku:A.sku||"",barcode:A.barcode||""})):b.value=I}catch(I){console.error("Error loading data",I)}finally{$.value=!1}},oe=I=>t.currencySymbol+Number(I).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ke=I=>{const A=u.value.find(q=>q.id===I.id);A?A.quantity++:u.value.push({...I,quantity:1,uniqueId:Date.now()}),E()},$e=(I,A)=>{const q=u.value[I];q.quantity+=A,q.quantity<=0&&u.value.splice(I,1)},Ue=I=>{u.value.splice(I,1)},H=()=>{u.value=[],_.value="",U.value="",y()},y=()=>{const I={cart:u.value,subtotal:R.value,tax:r.value,total:w.value,currencySymbol:t.currencySymbol,amountTendered:_.value,change:G.value,taxRate:t.enableTax?t.taxRate:0,timestamp:Date.now()};localStorage.setItem("pos_state",JSON.stringify(I))},E=()=>{try{const I=W.createOscillator(),A=W.createGain();I.connect(A),A.connect(W.destination),I.frequency.value=800,I.type="sine",A.gain.setValueAtTime(.3,W.currentTime),A.gain.exponentialRampToValueAtTime(.01,W.currentTime+.1),I.start(W.currentTime),I.stop(W.currentTime+.1)}catch{}},pe=P(!1),Ae=()=>{const I=document.documentElement;document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():I.requestFullscreen?I.requestFullscreen().catch(A=>console.error(A)):I.webkitRequestFullscreen?I.webkitRequestFullscreen():I.msRequestFullscreen&&I.msRequestFullscreen()},Se=()=>{pe.value=!!document.fullscreenElement,pe.value?document.body.classList.add("pos-fullscreen"):document.body.classList.remove("pos-fullscreen")},we=async()=>{v.value=!0,await nextTick();try{C=new Le;const I=document.querySelector("video");await C.decodeFromVideoDevice(null,I,(A,q)=>{A&&Ee(A.text)})}catch(I){console.error("Scanner error:",I),alert("Camera access denied or not available"),ie()}},ie=()=>{C&&(C.reset(),C=null),v.value=!1},Ee=I=>{const A=b.value.find(q=>q.sku===I||q.barcode===I);A?(ke(A),ie()):alert("Product not found: "+I)},Ce=I=>{I.target.tagName==="INPUT"||I.target.tagName==="TEXTAREA"||(D&&clearTimeout(D),I.key==="Enter"?(z.length>3&&Ee(z),z=""):(z+=I.key,D=setTimeout(()=>z="",100)))},Oe=async()=>{if(!confirm("Process payment of "+oe(w.value)+"?"))return;M.value=!0;const I={items:u.value,subtotal:R.value,tax:r.value,total:w.value,payment_method_id:k.value,amount_tendered:_.value,change:G.value,customer_id:U.value||null,created_at:new Date().toISOString()};if(j.value)try{const q=await(await fetch(t.routes.store,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t.csrfToken},body:JSON.stringify(I)})).json();if(q.success)alert("Order processed successfully!"),await Je({...I,order_id:q.order_id}),H();else throw new Error(q.message)}catch(A){console.error("Online payment failed, saving offline",A),await Ie(I)}else await Ie(I);M.value=!1},Ie=async I=>{try{const A=JSON.parse(JSON.stringify({...I,synced:0}));await a.value.orders.add(A),alert("Offline: Order saved locally. Will sync when online."),Me(),H()}catch(A){console.error("Error saving offline",A),alert("Error saving offline: "+A.message)}},Me=()=>{a.value.orders.where("synced").equals(0).count().then(I=>d.value=I)},Ge=async()=>{if(!j.value)return;const I=await a.value.orders.where("synced").equals(0).toArray();if(I.length!==0){for(const A of I)try{(await(await fetch(t.routes.store,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t.csrfToken},body:JSON.stringify(A)})).json()).success&&await a.value.orders.update(A.id,{synced:1})}catch(q){console.error("Sync failed",q)}Me()}},Ke=async()=>{try{c=await navigator.bluetooth.requestDevice({filters:[{services:["000018f0-0000-1000-8000-00805f9b34fb"]}],optionalServices:["000018f0-0000-1000-8000-00805f9b34fb"]}),S=await(await(await c.gatt.connect()).getPrimaryService("000018f0-0000-1000-8000-00805f9b34fb")).getCharacteristic("00002af1-0000-1000-8000-00805f9b34fb"),O.value=!0,alert("Printer connected!")}catch(I){console.error(I),alert("Printer connection failed.")}},Je=async I=>{if(O.value&&S)alert("Printing thermal receipt...");else{const A=t.routes.receipt.replace(":id",I.order_id);window.open(A,"Receipt","width=400,height=600")}},Qe=()=>{window.open(t.routes.display,"CustomerDisplay","width=800,height=600,menubar=no,toolbar=no,location=no,status=no")};return(I,A)=>(s(),o("div",{class:F(["flex","-m-6",pe.value?"h-screen p-6 bg-white":"h-[calc(100vh-6rem)]"])},[e("div",{class:F(["w-[70%] bg-gray-100 p-2 pr-2 md:p-6 overflow-y-auto border-r border-gray-200",{"rounded-l-lg":!pe.value}])},[e("div",Sa,[h(e("input",{type:"text","onUpdate:modelValue":A[0]||(A[0]=q=>x.value=q),placeholder:"Search...",class:"flex-1 px-2 py-1.5 md:px-4 md:py-3 rounded-lg border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-xs md:text-lg"},null,512),[[V,x.value]]),h(e("select",{"onUpdate:modelValue":A[1]||(A[1]=q=>m.value=q),class:"px-2 py-1.5 md:px-4 md:py-3 rounded-lg border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-xs md:text-base"},[A[7]||(A[7]=e("option",{value:""},"All",-1)),(s(!0),o(N,null,L(f.value,q=>(s(),o("option",{key:q.id,value:q.id},i(q.name),9,Ca))),128))],512),[[Y,m.value]]),e("div",{class:"flex gap-2"},[e("button",{onClick:we,class:"px-3 py-1.5 bg-indigo-600 text-white rounded-lg flex items-center justify-center gap-1 text-xs font-semibold hover:bg-indigo-700 transition"},[...A[8]||(A[8]=[e("i",{class:"fas fa-barcode"},null,-1),B(" Scan ",-1)])]),e("button",{onClick:Ae,class:"hidden md:flex px-3 py-1.5 bg-gray-700 text-white rounded-lg items-center justify-center gap-1 text-xs font-semibold hover:bg-gray-800 transition"},[...A[9]||(A[9]=[e("i",{class:"fas fa-expand"},null,-1),B(" Fullscreen ",-1)])])])]),v.value?(s(),o("div",Pa,[e("div",{class:"p-4 bg-gray-900 flex justify-between items-center"},[A[10]||(A[10]=e("h3",{class:"text-white font-bold"},"Scan Barcode",-1)),e("button",{onClick:ie,class:"text-white px-4 py-2 bg-red-600 rounded-lg"},"Close")]),e("div",Ta,[e("video",{ref_key:"videoElement",ref:g,class:"w-full h-full object-cover"},null,512),A[11]||(A[11]=e("div",{class:"absolute inset-0 flex items-center justify-center pointer-events-none"},[e("div",{class:"w-64 h-48 border-2 border-green-500 rounded-lg"})],-1))]),A[12]||(A[12]=e("div",{class:"p-4 bg-gray-900 text-white text-center text-sm"}," Position barcode within the frame ",-1))])):T("",!0),$.value?(s(),o("div",ja,[...A[13]||(A[13]=[e("div",{class:"animate-spin rounded-full h-8 md:h-12 w-8 md:w-12 border-b-2 border-indigo-600"},null,-1)])])):(s(),o("div",Ua,[(s(!0),o(N,null,L(K.value,q=>(s(),o("div",{key:q.id,onClick:ae=>ke(q),class:"bg-white rounded-lg shadow cursor-pointer hover:shadow-md transition p-1.5 md:p-3 flex flex-col group relative"},[e("div",Ma,[e("img",{src:q.image_url,class:"object-cover w-full h-full group-hover:scale-110 transition duration-500",onError:A[2]||(A[2]=ae=>ae.target.src="https://placehold.co/200x200?text=No+Image")},null,40,Va),e("div",{class:F(["absolute top-1 right-1 px-1.5 py-0.5 rounded text-[10px] font-bold text-white shadow",q.stock>10?"bg-green-500":q.stock>0?"bg-yellow-500":"bg-red-500"])},i(q.stock),3)]),e("h3",Ea,i(q.name),1),e("p",Oa,i(oe(q.price)),1)],8,Aa))),128))]))],2),e("div",Ia,[e("div",qa,[e("h2",Da,[A[14]||(A[14]=e("span",null,"Cart",-1)),e("span",Fa,i(u.value.length)+" items",1)]),e("div",Ba,[e("div",{class:F(["text-xs px-2 py-1 rounded transition-colors duration-300",j.value?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},i(j.value?"Online":"Offline"),3),e("button",{onClick:Ke,class:F(["hidden md:block text-xs px-2 py-1 rounded hover:opacity-80 transition",O.value?"bg-green-600 text-white":"bg-gray-800 text-white"])},i(O.value?"Printer âœ“":"Connect Printer"),3),e("button",{onClick:Qe,class:"hidden md:block text-xs bg-gray-800 text-white px-3 py-1 rounded hover:bg-gray-700"},"Display")])]),e("div",Na,[h(e("select",{"onUpdate:modelValue":A[3]||(A[3]=q=>U.value=q),class:"block w-full rounded-md border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[A[15]||(A[15]=e("option",{value:""},"Walk-in Customer",-1)),(s(!0),o(N,null,L(n.value,q=>(s(),o("option",{key:q.id,value:q.id},i(q.name),9,La))),128))],512),[[Y,U.value]])]),e("div",Ra,[u.value.length===0?(s(),o("div",za,[...A[16]||(A[16]=[e("i",{class:"fas fa-shopping-cart text-5xl mb-4 opacity-30"},null,-1),e("p",{class:"text-sm md:text-base"},"Cart is empty",-1)])])):T("",!0),(s(!0),o(N,null,L(u.value,(q,ae)=>(s(),o("div",{key:q.uniqueId||q.id,class:"flex flex-col p-2 md:p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition border border-gray-100"},[e("div",Ha,[e("div",Wa,[e("h4",{class:"font-medium text-gray-800 text-xs md:text-sm truncate",title:q.name},i(q.name),9,Ga),e("p",Ka,i(oe(q.price)),1)]),e("div",Ja,[e("button",{onClick:de=>$e(ae,-1),class:"w-7 h-7 md:w-8 md:h-8 rounded-full bg-white border-2 border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-100 text-sm font-bold transition-colors"},"-",8,Qa),e("span",Xa,i(q.quantity),1),e("button",{onClick:de=>$e(ae,1),class:"w-7 h-7 md:w-8 md:h-8 rounded-full bg-white border-2 border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-100 text-sm font-bold transition-colors"},"+",8,Ya)]),e("div",Za,[e("p",ed,i(oe(q.price*q.quantity)),1)])]),e("div",td,[e("button",{onClick:de=>Ue(ae),class:"text-[10px] text-red-500 hover:underline"},"Remove",8,sd),h(e("select",{"onUpdate:modelValue":de=>q.tax_code_id=de,class:"text-[10px] py-1 pl-2 pr-6 rounded border-gray-200 bg-white text-gray-600 focus:border-indigo-500 focus:ring-indigo-500 w-32"},[A[17]||(A[17]=e("option",{value:""},"No Tax",-1)),(s(!0),o(N,null,L(l.taxCodes,de=>(s(),o("option",{key:de.id,value:de.id},i(de.name)+" ("+i(Number(de.rate))+"%)",9,rd))),128))],8,od),[[Y,q.tax_code_id]])])]))),128))]),e("div",nd,[e("div",ld,[A[18]||(A[18]=e("span",null,"Subtotal",-1)),e("span",null,i(oe(R.value)),1)]),e("div",id,[A[19]||(A[19]=e("span",null,"Tax",-1)),e("span",null,i(oe(r.value)),1)]),e("div",ad,[A[20]||(A[20]=e("span",null,"Total",-1)),e("span",null,i(oe(w.value)),1)]),e("div",dd,[A[21]||(A[21]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700 mb-1"},"Payment Method",-1)),h(e("select",{"onUpdate:modelValue":A[4]||(A[4]=q=>k.value=q),class:"block w-full rounded-md border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[(s(!0),o(N,null,L(p.value,q=>(s(),o("option",{key:q.id,value:q.id},i(q.name),9,ud))),128))],512),[[Y,k.value]])]),e("div",cd,[A[22]||(A[22]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700 mb-1"},"Amount Tendered",-1)),e("div",pd,[e("div",md,[e("span",gd,i(l.currencySymbol),1)]),h(e("input",{type:"number","onUpdate:modelValue":A[5]||(A[5]=q=>_.value=q),step:"0.01",onKeydown:A[6]||(A[6]=be(q=>le.value&&Oe(),["enter"])),id:"amount-tendered-input",class:"block w-full rounded-md border-2 border-gray-300 pl-7 pr-12 focus:border-indigo-500 focus:ring-indigo-500 text-base md:text-lg font-bold",placeholder:"0.00"},null,544),[[V,_.value]])])]),e("div",{class:F(["mt-4 p-3 md:p-4 bg-gray-100 rounded-lg flex justify-between items-center",G.value<0?"bg-red-50 text-red-600":"bg-green-50 text-green-700"])},[A[23]||(A[23]=e("span",{class:"font-bold text-sm md:text-base"},"Change Due",-1)),e("span",fd,i(oe(Math.max(0,G.value))),1)],2),G.value<0?(s(),o("div",bd," Short by "+i(oe(Math.abs(G.value))),1)):T("",!0),e("button",{onClick:Oe,disabled:!le.value,class:"w-full mt-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white text-base md:text-lg font-bold py-3 md:py-4 rounded-xl shadow-lg hover:shadow-xl transition transform active:scale-95 flex items-center justify-center"},[M.value?(s(),o("span",vd,[...A[24]||(A[24]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),B(" Processing... ",-1)])])):(s(),o("span",xd,"Charge "+i(oe(w.value)),1))],8,yd),d.value>0?(s(),o("div",hd,i(d.value)+" Offline Orders Waiting Sync ",1)):T("",!0)])])],2))}},_d={class:"flex h-screen overflow-hidden font-sans"},kd={class:"w-1/2 bg-indigo-900 flex flex-col items-center justify-center text-white p-12 relative"},$d=["src"],Sd={key:1,class:"text-6xl font-black tracking-tighter mb-4"},Cd={class:"fixed bottom-4 left-4 flex items-center gap-2 text-xs opacity-50"},Pd={class:"w-1/2 bg-white p-8 flex flex-col shadow-2xl h-full text-black"},Td={class:"flex-1 overflow-y-auto space-y-4 pr-2"},jd={key:0,class:"h-full flex items-center justify-center text-gray-400 text-lg"},Ud={class:"font-bold text-xl text-gray-800"},Ad={class:"text-gray-500"},Md={class:"font-bold text-xl text-gray-900"},Vd={class:"mt-auto pt-6 border-t-2 border-gray-100 space-y-3"},Ed={class:"flex justify-between text-xl text-gray-600"},Od={key:0,class:"flex justify-between text-xl text-gray-600"},Id={class:"flex justify-between text-4xl font-black text-indigo-900 py-4"},qd={key:1,class:"bg-indigo-50 p-4 rounded-xl space-y-2"},Dd={class:"flex justify-between text-lg text-indigo-800"},Fd={__name:"CustomerDisplay",props:{logoUrl:{type:String,default:null},tenantName:{type:String,default:"Store"},currencySymbol:{type:String,default:"$"}},setup(l){const t=l,a=P(!1),b=P({cart:[],subtotal:0,tax:0,total:0,amountTendered:0,change:0,taxRate:0,currencySymbol:t.currencySymbol}),f=()=>{const u=localStorage.getItem("pos_state");if(u)try{b.value=JSON.parse(u),a.value=!0}catch(x){console.error("Error parsing POS state",x)}},p=u=>{u.key==="pos_state"&&f()};fe(()=>{f(),window.addEventListener("storage",p)}),_e(()=>{window.removeEventListener("storage",p)});const n=u=>(b.value.currencySymbol||t.currencySymbol)+Number(u).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return(u,x)=>(s(),o("div",_d,[e("div",kd,[l.logoUrl?(s(),o("img",{key:0,src:l.logoUrl,class:"max-w-xs mb-8 rounded-xl shadow-2xl bg-white p-4"},null,8,$d)):(s(),o("h1",Sd,i(l.tenantName),1)),x[0]||(x[0]=e("p",{class:"text-2xl opacity-75 text-center"},"Thank you for shopping with us!",-1)),e("div",Cd,[e("div",{class:F(["w-2 h-2 rounded-full",a.value?"bg-green-400":"bg-red-400"])},null,2),e("span",null,i(a.value?"Connected":"Waiting for POS..."),1)])]),e("div",Pd,[x[7]||(x[7]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-6 border-b pb-4"},"Your Order",-1)),e("div",Td,[b.value.cart.length===0?(s(),o("div",jd," Processing... ")):T("",!0),(s(!0),o(N,null,L(b.value.cart,m=>(s(),o("div",{key:m.id||m.uniqueId,class:"flex justify-between items-center py-2 border-b-2 border-gray-200 last:border-0"},[e("div",null,[e("div",Ud,i(m.name),1),e("div",Ad,[e("span",null,i(m.quantity),1),x[1]||(x[1]=B(" x ",-1)),e("span",null,i(n(m.price)),1)])]),e("div",Md,i(n(m.price*m.quantity)),1)]))),128))]),e("div",Vd,[e("div",Ed,[x[2]||(x[2]=e("span",null,"Subtotal",-1)),e("span",null,i(n(b.value.subtotal||0)),1)]),b.value.tax>0?(s(),o("div",Od,[x[3]||(x[3]=e("span",null,"Tax",-1)),e("span",null,i(n(b.value.tax||0)),1)])):T("",!0),e("div",Id,[x[4]||(x[4]=e("span",null,"Total",-1)),e("span",null,i(n(b.value.total||0)),1)]),b.value.amountTendered>0?(s(),o("div",qd,[e("div",Dd,[x[5]||(x[5]=e("span",null,"Paid",-1)),e("span",null,i(n(b.value.amountTendered)),1)]),e("div",{class:F(["flex justify-between text-2xl font-bold",b.value.change<0?"text-red-600":"text-green-600"])},[x[6]||(x[6]=e("span",null,"Change",-1)),e("span",null,i(n(Math.max(0,b.value.change))),1)],2)])):T("",!0)])])]))}},Bd={class:"space-y-6"},Nd={class:"flex justify-between items-center mb-6"},Ld=["disabled"],Rd={key:0,class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"},zd={key:0,class:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 relative"},Hd={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 relative"},Wd={key:0,class:"list-disc pl-5"},Gd={key:1},Kd={class:"border-b border-gray-200 overflow-x-auto"},Jd={class:"-mb-px flex space-x-8"},Qd=["onClick"],Xd={class:"mt-6"},Yd={class:"space-y-6"},Zd={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},eu={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},tu={class:"grid grid-cols-2 gap-4"},su={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},ou={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},ru={class:"md:col-span-2"},nu={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},lu={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},iu={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},au={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},du={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},uu={class:"p-6 space-y-4"},cu={class:"flex items-start"},pu={class:"flex items-center h-5"},mu={class:"flex items-start border-t border-gray-100 pt-4"},gu={class:"flex items-center h-5"},fu={class:"space-y-6"},bu={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},yu={class:"mb-6"},xu={class:"flex items-center space-x-4"},vu={class:"flex-shrink-0 w-24 h-24 border border-gray-200 rounded-lg bg-gray-50 flex items-center justify-center overflow-hidden"},hu=["src"],wu={key:1,class:"text-gray-400 text-xs"},_u={class:"mb-6"},ku={class:"flex items-center space-x-4"},$u={class:"flex-shrink-0 w-12 h-12 border border-gray-200 rounded-lg bg-gray-50 flex items-center justify-center overflow-hidden"},Su=["src"],Cu={key:1,class:"text-gray-400 text-xs"},Pu={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Tu={class:"space-y-6"},ju={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Uu={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Au={class:"flex items-center justify-between mb-4"},Mu={class:"font-bold text-gray-700 uppercase"},Vu={class:"relative inline-flex items-center cursor-pointer"},Eu=["onUpdate:modelValue"],Ou={class:"space-y-3"},Iu=["onUpdate:modelValue"],qu=["onUpdate:modelValue"],Du=["onUpdate:modelValue"],Fu={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Bu={class:"flex justify-between items-center mb-4 border-b pb-2"},Nu={class:"overflow-x-auto"},Lu={class:"min-w-full divide-y divide-gray-200"},Ru={class:"divide-y divide-gray-200"},zu={class:"px-4 py-2 text-sm"},Hu={class:"px-4 py-2 text-sm uppercase"},Wu={class:"px-4 py-2 text-sm text-gray-600"},Gu={class:"px-4 py-2 text-sm text-gray-600"},Ku={class:"px-4 py-2 text-center text-sm"},Ju={class:"relative inline-flex items-center cursor-pointer"},Qu=["checked","onChange"],Xu={class:"px-4 py-2 text-right text-sm"},Yu=["onClick"],Zu={key:0},ec={class:"space-y-6"},tc={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},sc={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oc={class:"mt-6 pt-6 border-t border-gray-200"},rc={class:"flex items-end gap-4"},nc={class:"flex-1"},lc={class:"space-y-6"},ic={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ac={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 flex flex-col"},dc={class:"mt-4 pt-4 border-t border-gray-100"},uc=["href"],cc={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 flex flex-col"},pc={class:"mt-4 pt-4 border-t border-gray-100"},mc=["href"],gc={class:"space-y-6"},fc={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},bc={class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center"},yc={class:"flex gap-2"},xc=["href"],vc=["href"],hc={class:"p-6 space-y-6"},wc={class:"flex justify-between items-center mb-2"},_c={class:"flex justify-between items-center mb-2"},kc={class:"flex justify-between items-center mb-2"},$c={class:"flex items-center space-x-6 bg-gray-50/50 p-4 rounded-xl border-2 border-dashed border-gray-200"},Sc={class:"flex-shrink-0 w-32 h-20 border border-gray-200 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden shadow-sm"},Cc=["src"],Pc={key:1,class:"fas fa-share-alt text-gray-300 text-2xl"},Tc={class:"flex-grow"},jc={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Uc={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},Ac={class:"space-y-6"},Mc={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Vc={class:"flex justify-between items-center mb-6"},Ec=["href"],Oc={class:"text-center py-8"},Ic={class:"mt-6"},qc=["href"],Dc={class:"px-6 py-4 space-y-6"},Fc={class:"relative"},Bc={key:0,class:"grid grid-cols-1 gap-4 bg-gray-50 p-4 rounded-lg border border-gray-100"},Nc={key:0,class:"mt-3"},Lc={class:"px-6 py-4 bg-gray-50 flex justify-end rounded-b-lg"},Rc=["disabled"],zc={__name:"GeneralSettings",props:{initialSettings:{type:Object,required:!0,default:()=>({})},tenantName:{type:String,default:""},paymentTypes:{type:Array,default:()=>[]},initialStorefrontStatus:{type:Boolean,default:!1},hasFeature:{type:Boolean,default:!1},tenantSlug:{type:String,default:""},defaultTab:{type:String,default:"general"},routes:{type:Object,required:!0},csrfToken:String,currentUserEmail:String},setup(l){const t=l,a=P(t.defaultTab),b=P(!1),f=P(""),p=P(""),n=P(!1),u=P(!1),x=P([...t.paymentTypes]),m=P(t.currentUserEmail||""),k=["opay","moniepoint","paystack","flutterwave"],U=[{id:"general",name:"General"},{id:"branding",name:"Branding"},{id:"payments",name:"Payments"},{id:"integrations",name:"Integrations"},{id:"storefront",name:"Storefront & CMS"},{id:"seo",name:"SEO & Geo"},{id:"tax",name:"Tax"}],_=se({store_name:t.tenantName,currency_code:t.initialSettings.currency_code||"NGN",currency_symbol:t.initialSettings.currency_symbol||"â‚¦",company_address:t.initialSettings.company_address||"",company_email:t.initialSettings.company_email||"",company_phone:t.initialSettings.company_phone||"",po_prefix:t.initialSettings.po_prefix||"PO-",invoice_prefix:t.initialSettings.invoice_prefix||"INV-",shipping_cost:t.initialSettings.shipping_cost||"0",free_shipping_threshold:t.initialSettings.free_shipping_threshold||"0",hide_powered_by:!!t.initialSettings.hide_powered_by,guest_checkout:t.initialSettings.guest_checkout!==void 0?!!t.initialSettings.guest_checkout:!0,primary_color:t.initialSettings.primary_color||"#4f46e5",mail_host:t.initialSettings.mail_host||"",mail_port:t.initialSettings.mail_port||"587",mail_username:t.initialSettings.mail_username||"",mail_password:t.initialSettings.mail_password||"",mail_encryption:t.initialSettings.mail_encryption||"tls",mail_from_address:t.initialSettings.mail_from_address||"",gateway_opay_active:!!t.initialSettings.gateway_opay_active,gateway_opay_public_key:t.initialSettings.gateway_opay_public_key||"",gateway_opay_secret_key:t.initialSettings.gateway_opay_secret_key||"",gateway_opay_merchant_id:t.initialSettings.gateway_opay_merchant_id||"",gateway_moniepoint_active:!!t.initialSettings.gateway_moniepoint_active,gateway_moniepoint_public_key:t.initialSettings.gateway_moniepoint_public_key||"",gateway_moniepoint_secret_key:t.initialSettings.gateway_moniepoint_secret_key||"",gateway_moniepoint_merchant_id:t.initialSettings.gateway_moniepoint_merchant_id||"",gateway_paystack_active:!!t.initialSettings.gateway_paystack_active,gateway_paystack_public_key:t.initialSettings.gateway_paystack_public_key||"",gateway_paystack_secret_key:t.initialSettings.gateway_paystack_secret_key||"",gateway_flutterwave_active:!!t.initialSettings.gateway_flutterwave_active,gateway_flutterwave_public_key:t.initialSettings.gateway_flutterwave_public_key||"",gateway_flutterwave_secret_key:t.initialSettings.gateway_flutterwave_secret_key||"",meta_title:t.initialSettings.meta_title||"",meta_description:t.initialSettings.meta_description||"",meta_keywords:t.initialSettings.meta_keywords||"",store_country:t.initialSettings.store_country||"Nigeria",store_region:t.initialSettings.store_region||"",store_timezone:t.initialSettings.store_timezone||"Africa/Lagos",google_maps_url:t.initialSettings.google_maps_url||""}),M=P(null),$=P(null),j=P(t.initialSettings.logo?t.routes.media+"?path="+t.initialSettings.logo:null),d=P(t.initialSettings.favicon?t.routes.media+"?path="+t.initialSettings.favicon:null),v=P(t.initialSettings.og_image?t.routes.media+"?path="+t.initialSettings.og_image:null),O=P(null),g=se({name:"",type:"cash",bank_name:"",account_number:"",account_name:"",require_gateway:!1,gateway_provider:"",is_active_on_storefront:!1}),C=(R,r)=>{const w=R.target.files[0];if(w){const G=new FileReader;G.onload=le=>{r==="logo"?(j.value=le.target.result,M.value=w):r==="favicon"?(d.value=le.target.result,$.value=w):r==="og_image"&&(v.value=le.target.result,O.value=w)},G.readAsDataURL(w)}},z=async()=>{b.value=!0,p.value="",f.value="";const R=new FormData;for(const r in _)typeof _[r]=="boolean"?R.append(r,_[r]?"1":"0"):R.append(r,_[r]||"");M.value&&R.append("logo",M.value),$.value&&R.append("favicon",$.value),O.value&&R.append("og_image",O.value);try{await X.post(t.routes.update,R,{headers:{"Content-Type":"multipart/form-data"}}),window.location.reload()}catch(r){console.error(r),r.response&&r.response.data&&r.response.data.errors?p.value=r.response.data.errors:p.value="Failed to update settings. Please try again.",b.value=!1}},D=async()=>{u.value=!0;try{const R=await X.post(t.routes.paymentTypesStore,g,{headers:{Accept:"application/json"}});R.data.success&&(x.value.push(R.data.payment_type),n.value=!1,g.name="",g.type="cash",g.bank_name="",g.account_number="",g.account_name="",g.require_gateway=!1,g.gateway_provider="",f.value=R.data.message)}catch(R){console.error(R),alert("Failed to create payment type.")}finally{u.value=!1}},c=async R=>{if(confirm("Are you sure you want to delete this payment type?"))try{const r=t.routes.paymentTypesDestroy.replace(":id",R),w=await X.delete(r,{headers:{Accept:"application/json"}});w.data.success&&(x.value=x.value.filter(G=>G.id!==R),f.value=w.data.message)}catch(r){console.error(r),alert("Failed to delete payment type.")}},S=async()=>{if(!m.value){alert("Please enter an email address.");return}try{const R=await X.post(t.routes.testEmail,{test_email:m.value});R.data.success?alert(R.data.message):alert(R.data.message||"Email sent (check logs if not received).")}catch(R){console.error(R);const r=R.response?.data?.message||"Failed to send test email. Check logs or ensure settings are SAVED.";alert(r)}},W=async R=>{try{const r=t.routes.paymentTypesToggleStorefront.replace(":id",R),w=await X.post(r);if(w.data.success){const G=x.value.findIndex(le=>le.id===R);G!==-1&&(x.value[G].is_active_on_storefront=w.data.is_active_on_storefront)}}catch(r){console.error(r),alert("Failed to update status.")}},K=async R=>{try{const r=await X.post(t.routes.seoSuggest,{type:R});r.data.suggestion&&(R==="meta_title"&&(_.meta_title=r.data.suggestion),R==="meta_description"&&(_.meta_description=r.data.suggestion),R==="meta_keywords"&&(_.meta_keywords=r.data.suggestion))}catch(r){console.error(r),alert("Failed to get suggestion.")}};return he(n,R=>{R&&(g.name="",g.type="cash",g.bank_name="",g.account_number="",g.account_name="",g.require_gateway=!1,g.gateway_provider="",g.is_active_on_storefront=!1)}),(R,r)=>(s(),o("div",Bd,[e("div",Nd,[r[46]||(r[46]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-800"},"Settings"),e("p",{class:"text-gray-600"},"Manage your store configuration.")],-1)),e("button",{onClick:z,disabled:b.value,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg transition shadow-md disabled:opacity-50 flex items-center gap-2"},[b.value?(s(),o("span",Rd)):T("",!0),B(" "+i(b.value?"Saving...":"Save Changes"),1)],8,Ld)]),f.value?(s(),o("div",zd,[B(i(f.value)+" ",1),e("button",{onClick:r[0]||(r[0]=w=>f.value=""),class:"absolute top-2 right-2 text-green-500 hover:text-green-700"},"Ã—")])):T("",!0),p.value?(s(),o("div",Hd,[typeof p.value=="object"?(s(),o("ul",Wd,[(s(!0),o(N,null,L(p.value,(w,G)=>(s(),o("li",{key:G},i(w),1))),128))])):(s(),o("span",Gd,i(p.value),1)),e("button",{onClick:r[1]||(r[1]=w=>p.value=""),class:"absolute top-2 right-2 text-red-500 hover:text-red-700"},"Ã—")])):T("",!0),e("div",Kd,[e("nav",Jd,[(s(),o(N,null,L(U,w=>e("button",{key:w.id,onClick:G=>a.value=w.id,class:F([a.value===w.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},i(w.name),11,Qd)),64))])]),e("div",Xd,[h(e("div",Yd,[e("div",Zd,[r[50]||(r[50]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Store Identity"),e("p",{class:"text-sm text-gray-500"},"Basic information about your store.")],-1)),e("div",eu,[e("div",null,[r[47]||(r[47]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Store Name",-1)),h(e("input",{"onUpdate:modelValue":r[2]||(r[2]=w=>_.store_name=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.store_name]])]),e("div",tu,[e("div",null,[r[48]||(r[48]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Currency Code",-1)),h(e("input",{"onUpdate:modelValue":r[3]||(r[3]=w=>_.currency_code=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all uppercase"},null,512),[[V,_.currency_code]])]),e("div",null,[r[49]||(r[49]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Symbol",-1)),h(e("input",{"onUpdate:modelValue":r[4]||(r[4]=w=>_.currency_symbol=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.currency_symbol]])])])])]),e("div",su,[r[54]||(r[54]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Contact Information"),e("p",{class:"text-sm text-gray-500"},"Displayed on Invoices and Purchase Orders.")],-1)),e("div",ou,[e("div",ru,[r[51]||(r[51]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Company Address",-1)),h(e("textarea",{"onUpdate:modelValue":r[5]||(r[5]=w=>_.company_address=w),rows:"3",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.company_address]])]),e("div",null,[r[52]||(r[52]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Company Email",-1)),h(e("input",{"onUpdate:modelValue":r[6]||(r[6]=w=>_.company_email=w),type:"email",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.company_email]])]),e("div",null,[r[53]||(r[53]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Company Phone",-1)),h(e("input",{"onUpdate:modelValue":r[7]||(r[7]=w=>_.company_phone=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.company_phone]])])])]),e("div",nu,[r[57]||(r[57]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Document Defaults"),e("p",{class:"text-sm text-gray-500"},"Set default prefixes for your documents.")],-1)),e("div",lu,[e("div",null,[r[55]||(r[55]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"PO Prefix",-1)),h(e("input",{"onUpdate:modelValue":r[8]||(r[8]=w=>_.po_prefix=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.po_prefix]])]),e("div",null,[r[56]||(r[56]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Invoice Prefix",-1)),h(e("input",{"onUpdate:modelValue":r[9]||(r[9]=w=>_.invoice_prefix=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.invoice_prefix]])])])]),e("div",iu,[r[61]||(r[61]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Shipping Configuration"),e("p",{class:"text-sm text-gray-500"},"Configure default shipping rates.")],-1)),e("div",au,[e("div",null,[r[58]||(r[58]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Flat Rate Shipping Cost",-1)),h(e("input",{"onUpdate:modelValue":r[10]||(r[10]=w=>_.shipping_cost=w),type:"number",step:"0.01",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.shipping_cost]])]),e("div",null,[r[59]||(r[59]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Free Shipping Threshold",-1)),h(e("input",{"onUpdate:modelValue":r[11]||(r[11]=w=>_.free_shipping_threshold=w),type:"number",step:"0.01",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.free_shipping_threshold]]),r[60]||(r[60]=e("p",{class:"text-xs text-gray-500 mt-1"},"Orders above this amount will have free shipping. Set to 0 to disable.",-1))])])]),e("div",du,[r[64]||(r[64]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"White Label & Features")],-1)),e("div",uu,[e("div",cu,[e("div",pu,[h(e("input",{"onUpdate:modelValue":r[12]||(r[12]=w=>_.hide_powered_by=w),id:"hide_powered_by",type:"checkbox",class:"focus:ring-indigo-500 h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-offset-0"},null,512),[[ne,_.hide_powered_by]])]),r[62]||(r[62]=e("div",{class:"ml-3 text-sm"},[e("label",{for:"hide_powered_by",class:"font-bold text-gray-700"},'Remove "Powered by" Branding'),e("p",{class:"text-gray-500"},"Hide the platform branding from the footer.")],-1))]),e("div",mu,[e("div",gu,[h(e("input",{"onUpdate:modelValue":r[13]||(r[13]=w=>_.guest_checkout=w),id:"guest_checkout",type:"checkbox",class:"focus:ring-indigo-500 h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-offset-0"},null,512),[[ne,_.guest_checkout]])]),r[63]||(r[63]=e("div",{class:"ml-3 text-sm"},[e("label",{for:"guest_checkout",class:"font-bold text-gray-700"},"Enable Guest Checkout"),e("p",{class:"text-gray-500"},"Allow customers to purchase without creating an account.")],-1))])])])],512),[[Q,a.value==="general"]]),h(e("div",fu,[e("div",bu,[e("div",yu,[r[65]||(r[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Store Logo",-1)),e("div",xu,[e("div",vu,[j.value?(s(),o("img",{key:0,src:j.value,alt:"Store Logo",class:"max-w-full max-h-full object-contain"},null,8,hu)):(s(),o("span",wu,"No Logo"))]),e("input",{type:"file",onChange:r[14]||(r[14]=w=>C(w,"logo")),accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:bg-indigo-50 file:text-indigo-700"},null,32)])]),e("div",_u,[r[66]||(r[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Favicon",-1)),e("div",ku,[e("div",$u,[d.value?(s(),o("img",{key:0,src:d.value,alt:"Favicon",class:"w-8 h-8 object-contain"},null,8,Su)):(s(),o("span",Cu,"None"))]),e("input",{type:"file",onChange:r[15]||(r[15]=w=>C(w,"favicon")),accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:bg-indigo-50 file:text-indigo-700"},null,32)])])]),e("div",Pu,[r[67]||(r[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Primary Color",-1)),h(e("input",{"onUpdate:modelValue":r[16]||(r[16]=w=>_.primary_color=w),type:"color",class:"h-10 w-32 rounded-md border-gray-300 p-1"},null,512),[[V,_.primary_color]])])],512),[[Q,a.value==="branding"]]),h(e("div",Tu,[e("div",ju,[r[69]||(r[69]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2"},"Payment Gateways",-1)),e("div",Uu,[(s(),o(N,null,L(k,w=>e("div",{key:w,class:"border rounded-lg p-4 bg-gray-50"},[e("div",Au,[e("span",Mu,i(w),1),e("label",Vu,[h(e("input",{type:"checkbox","onUpdate:modelValue":G=>_["gateway_"+w+"_active"]=G,class:"sr-only peer"},null,8,Eu),[[ne,_["gateway_"+w+"_active"]]]),r[68]||(r[68]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1))])]),e("div",Ou,[h(e("input",{"onUpdate:modelValue":G=>_["gateway_"+w+"_public_key"]=G,type:"text",placeholder:"Public Key",class:"block w-full text-xs rounded-md border-gray-300"},null,8,Iu),[[V,_["gateway_"+w+"_public_key"]]]),h(e("input",{"onUpdate:modelValue":G=>_["gateway_"+w+"_secret_key"]=G,type:"password",placeholder:"Secret Key",class:"block w-full text-xs rounded-md border-gray-300"},null,8,qu),[[V,_["gateway_"+w+"_secret_key"]]]),["opay","moniepoint"].includes(w)?h((s(),o("input",{key:0,"onUpdate:modelValue":G=>_["gateway_"+w+"_merchant_id"]=G,type:"text",placeholder:"Merchant ID",class:"block w-full text-xs rounded-md border-gray-300"},null,8,Du)),[[V,_["gateway_"+w+"_merchant_id"]]]):T("",!0)])])),64))])]),e("div",Fu,[e("div",Bu,[r[70]||(r[70]=e("h3",{class:"text-lg font-semibold text-gray-800"},"Payment Types",-1)),e("button",{type:"button",onClick:r[17]||(r[17]=w=>n.value=!0),class:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded hover:bg-indigo-200 text-sm font-medium"},"+ Add Payment Type")]),e("div",Nu,[e("table",Lu,[r[73]||(r[73]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"GL Account"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase"},"Storefront"),e("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Action")])],-1)),e("tbody",Ru,[(s(!0),o(N,null,L(x.value,w=>(s(),o("tr",{key:w.id},[e("td",zu,i(w.name),1),e("td",Hu,i(w.type),1),e("td",Wu,i(w.account?w.account.account_code+" - "+w.account.account_name:"-"),1),e("td",Gu,i(w.require_gateway?w.gateway_provider||"Linked":"-"),1),e("td",Ku,[e("label",Ju,[e("input",{type:"checkbox",checked:w.is_active_on_storefront,onChange:G=>W(w.id),class:"sr-only peer"},null,40,Qu),r[71]||(r[71]=e("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),e("td",Xu,[e("button",{onClick:G=>c(w.id),class:"text-red-600 hover:text-red-900 border-none bg-transparent cursor-pointer"},"Delete",8,Yu)])]))),128)),x.value.length===0?(s(),o("tr",Zu,[...r[72]||(r[72]=[e("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No payment types registered.",-1)])])):T("",!0)])])])])],512),[[Q,a.value==="payments"]]),h(e("div",ec,[e("div",tc,[r[84]||(r[84]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2"},"SMTP Mail Settings",-1)),e("div",sc,[e("div",null,[r[74]||(r[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mail Host",-1)),h(e("input",{"onUpdate:modelValue":r[18]||(r[18]=w=>_.mail_host=w),type:"text",class:"block w-full rounded-md border-gray-300"},null,512),[[V,_.mail_host]])]),e("div",null,[r[75]||(r[75]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mail Port",-1)),h(e("input",{"onUpdate:modelValue":r[19]||(r[19]=w=>_.mail_port=w),type:"number",class:"block w-full rounded-md border-gray-300"},null,512),[[V,_.mail_port]])]),e("div",null,[r[76]||(r[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Username",-1)),h(e("input",{"onUpdate:modelValue":r[20]||(r[20]=w=>_.mail_username=w),type:"text",class:"block w-full rounded-md border-gray-300"},null,512),[[V,_.mail_username]])]),e("div",null,[r[77]||(r[77]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Password",-1)),h(e("input",{"onUpdate:modelValue":r[21]||(r[21]=w=>_.mail_password=w),type:"password",class:"block w-full rounded-md border-gray-300"},null,512),[[V,_.mail_password]])]),e("div",null,[r[79]||(r[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Encryption",-1)),h(e("select",{"onUpdate:modelValue":r[22]||(r[22]=w=>_.mail_encryption=w),class:"block w-full rounded-md border-gray-300"},[...r[78]||(r[78]=[e("option",{value:"tls"},"TLS",-1),e("option",{value:"ssl"},"SSL",-1),e("option",{value:""},"None",-1)])],512),[[Y,_.mail_encryption]])]),e("div",null,[r[80]||(r[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"From Address",-1)),h(e("input",{"onUpdate:modelValue":r[23]||(r[23]=w=>_.mail_from_address=w),type:"email",class:"block w-full rounded-md border-gray-300"},null,512),[[V,_.mail_from_address]])])]),e("div",oc,[r[82]||(r[82]=e("h4",{class:"text-md font-medium text-gray-900 mb-2"},"Test Configuration",-1)),e("div",rc,[e("div",nc,[r[81]||(r[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Send Test Email To",-1)),h(e("input",{"onUpdate:modelValue":r[24]||(r[24]=w=>m.value=w),type:"email",class:"block w-full rounded-md border-gray-300"},null,512),[[V,m.value]])]),e("button",{onClick:S,type:"button",class:"bg-gray-800 hover:bg-gray-900 text-white font-medium py-2 px-4 rounded-md transition self-end"}," Send Test Email ")]),r[83]||(r[83]=e("p",{class:"text-xs text-gray-500 mt-2"},[B("Note: This tests your "),e("strong",null,"SAVED"),B(" settings. Please save any changes before testing.")],-1))])])],512),[[Q,a.value==="integrations"]]),h(e("div",lc,[Z(ze,{"initial-status":l.initialStorefrontStatus,"has-feature":l.hasFeature,"tenant-slug":l.tenantSlug},null,8,["initial-status","has-feature","tenant-slug"]),e("div",ic,[e("div",ac,[r[85]||(r[85]=ge('<div class="flex items-center mb-4"><div class="p-3 bg-indigo-100 rounded-lg text-indigo-600 mr-4"><i class="fas fa-edit text-2xl"></i></div><div><h3 class="text-lg font-bold text-gray-900">Visual Editor</h3><p class="text-sm text-gray-500">Customize your storefront&#39;s look and feel.</p></div></div><div class="flex-grow"><p class="text-gray-600 text-sm mb-4">Use our visual editor to change colors, fonts, layouts, and content directly on your storefront.</p></div>',2)),e("div",dc,[e("a",{href:l.routes.storefrontHome,target:"_blank",class:"block w-full text-center bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition"},"Launch Visual Editor â†—",8,uc)])]),e("div",cc,[r[86]||(r[86]=ge('<div class="flex items-center mb-4"><div class="p-3 bg-green-100 rounded-lg text-green-600 mr-4"><i class="fas fa-magic text-2xl"></i></div><div><h3 class="text-lg font-bold text-gray-900">Setup Wizard</h3><p class="text-sm text-gray-500">Restart the store configuration wizard.</p></div></div><div class="flex-grow"><p class="text-gray-600 text-sm mb-4">Re-run the step-by-step wizard to reset your industry, catalog, and basic branding settings.</p></div>',2)),e("div",pc,[e("a",{href:l.routes.wizardIndex,class:"block w-full text-center bg-white border-2 border-gray-300 hover:bg-gray-50 text-gray-700 font-bold py-2 px-4 rounded-lg transition"},"Restart Wizard",8,mc)])])])],512),[[Q,a.value==="storefront"]]),h(e("div",gc,[e("div",fc,[e("div",bc,[r[87]||(r[87]=e("div",null,[e("h3",{class:"text-lg font-bold text-gray-900"},"Search Engine Optimization"),e("p",{class:"text-sm text-gray-500"},"Improve how your store appears in search results.")],-1)),e("div",yc,[e("a",{href:l.routes.storefrontSitemap,target:"_blank",class:"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition"},"Sitemap.xml â†—",8,xc),e("a",{href:l.routes.storefrontRobots,target:"_blank",class:"text-xs font-bold text-gray-600 bg-gray-50 px-3 py-1.5 rounded-lg hover:bg-gray-100 transition"},"Robots.txt â†—",8,vc)])]),e("div",hc,[e("div",null,[e("div",wc,[r[89]||(r[89]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide"},"Meta Title",-1)),e("button",{onClick:r[25]||(r[25]=w=>K("meta_title")),class:"text-xs font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-1 bg-indigo-50 px-2 py-1 rounded transition"},[...r[88]||(r[88]=[e("i",{class:"fas fa-magic"},null,-1),B(" AI Suggest ",-1)])])]),h(e("input",{"onUpdate:modelValue":r[26]||(r[26]=w=>_.meta_title=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"Up to 60 characters recommended"},null,512),[[V,_.meta_title]])]),e("div",null,[e("div",_c,[r[91]||(r[91]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide"},"Meta Description",-1)),e("button",{onClick:r[27]||(r[27]=w=>K("meta_description")),class:"text-xs font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-1 bg-indigo-50 px-2 py-1 rounded transition"},[...r[90]||(r[90]=[e("i",{class:"fas fa-magic"},null,-1),B(" AI Suggest ",-1)])])]),h(e("textarea",{"onUpdate:modelValue":r[28]||(r[28]=w=>_.meta_description=w),rows:"3",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"Up to 160 characters recommended"},null,512),[[V,_.meta_description]])]),e("div",null,[e("div",kc,[r[93]||(r[93]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide"},"Keywords",-1)),e("button",{onClick:r[29]||(r[29]=w=>K("meta_keywords")),class:"text-xs font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-1 bg-indigo-50 px-2 py-1 rounded transition"},[...r[92]||(r[92]=[e("i",{class:"fas fa-magic"},null,-1),B(" AI Suggest ",-1)])])]),h(e("input",{"onUpdate:modelValue":r[30]||(r[30]=w=>_.meta_keywords=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"Comma separated keywords"},null,512),[[V,_.meta_keywords]])]),e("div",null,[r[95]||(r[95]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Social Sharing Image (OG Image)",-1)),e("div",$c,[e("div",Sc,[v.value?(s(),o("img",{key:0,src:v.value,alt:"OG Image",class:"max-w-full max-h-full object-cover"},null,8,Cc)):(s(),o("i",Pc))]),e("div",Tc,[e("input",{type:"file",onChange:r[31]||(r[31]=w=>C(w,"og_image")),accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32),r[94]||(r[94]=e("p",{class:"text-[10px] text-gray-400 mt-2 uppercase font-bold tracking-widest"},"Recommended: 1200x630px JPG or PNG",-1))])])])])]),e("div",jc,[r[100]||(r[100]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Geo-Targeting & Presence"),e("p",{class:"text-sm text-gray-500"},"Provide geographical context for localized search.")],-1)),e("div",Uc,[e("div",null,[r[96]||(r[96]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Target Country",-1)),h(e("input",{"onUpdate:modelValue":r[32]||(r[32]=w=>_.store_country=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.store_country]])]),e("div",null,[r[97]||(r[97]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Region / State",-1)),h(e("input",{"onUpdate:modelValue":r[33]||(r[33]=w=>_.store_region=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"e.g. Lagos, California"},null,512),[[V,_.store_region]])]),e("div",null,[r[98]||(r[98]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Timezone",-1)),h(e("input",{"onUpdate:modelValue":r[34]||(r[34]=w=>_.store_timezone=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[V,_.store_timezone]])]),e("div",null,[r[99]||(r[99]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Google Maps URL",-1)),h(e("input",{"onUpdate:modelValue":r[35]||(r[35]=w=>_.google_maps_url=w),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"Embed or Link URL"},null,512),[[V,_.google_maps_url]])])])])],512),[[Q,a.value==="seo"]]),h(e("div",Ac,[e("div",Mc,[e("div",Vc,[r[101]||(r[101]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800"},"Tax Code Management"),e("p",{class:"text-sm text-gray-500 mt-1"},"Manage tax codes with auto-generated GL accounts")],-1)),e("a",{href:l.routes.taxCodesCreate,class:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition"},"+ Add Tax Code",8,Ec)]),r[105]||(r[105]=e("div",{class:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded"},[e("p",{class:"text-sm text-blue-800"},[e("strong",null,"Note:"),B(" Tax codes are now managed separately with automatic GL account generation."),e("br"),B(" â€¢ Sales Tax â†’ 2100 series (Sales Tax Payable - Liability)"),e("br"),B(" â€¢ Purchase Tax â†’ 1300 series (Input Tax Receivable - Asset) ")])],-1)),e("div",Oc,[r[102]||(r[102]=e("i",{class:"fas fa-money-bill-wave mx-auto h-12 w-12 text-gray-400 text-5xl"},null,-1)),r[103]||(r[103]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tax Code Management",-1)),r[104]||(r[104]=e("p",{class:"mt-1 text-sm text-gray-500"},"Click the button below to manage your tax codes",-1)),e("div",Ic,[e("a",{href:l.routes.taxCodesIndex,class:"inline-flex items-center px-6 py-3 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"}," Manage Tax Codes ",8,qc)])])])],512),[[Q,a.value==="tax"]])]),Z(ue,{"is-open":n.value,onClose:r[45]||(r[45]=w=>n.value=!1)},{default:ee(()=>[r[116]||(r[116]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Add Payment Type")],-1)),e("div",Dc,[e("div",null,[r[106]||(r[106]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Name",-1)),h(e("input",{"onUpdate:modelValue":r[36]||(r[36]=w=>g.name=w),type:"text",class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2.5",placeholder:"e.g. Standard Delivery"},null,512),[[V,g.name]])]),e("div",null,[r[109]||(r[109]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Payment Type",-1)),e("div",Fc,[h(e("select",{"onUpdate:modelValue":r[37]||(r[37]=w=>g.type=w),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2.5 appearance-none"},[...r[107]||(r[107]=[e("option",{value:"cash"},"Cash / Physical",-1),e("option",{value:"bank"},"Bank Transfer",-1)])],512),[[Y,g.type]]),r[108]||(r[108]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1))])]),g.type==="bank"?(s(),o("div",Bc,[e("div",null,[r[110]||(r[110]=e("label",{class:"block text-xs font-medium text-gray-500 uppercase mb-1"},"Bank Name",-1)),h(e("input",{"onUpdate:modelValue":r[38]||(r[38]=w=>g.bank_name=w),type:"text",placeholder:"e.g. GTBank",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"},null,512),[[V,g.bank_name]])]),e("div",null,[r[111]||(r[111]=e("label",{class:"block text-xs font-medium text-gray-500 uppercase mb-1"},"Account Number",-1)),h(e("input",{"onUpdate:modelValue":r[39]||(r[39]=w=>g.account_number=w),type:"text",placeholder:"0123456789",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"},null,512),[[V,g.account_number]])]),e("div",null,[r[112]||(r[112]=e("label",{class:"block text-xs font-medium text-gray-500 uppercase mb-1"},"Account Name",-1)),h(e("input",{"onUpdate:modelValue":r[40]||(r[40]=w=>g.account_name=w),type:"text",placeholder:"Account Name",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"},null,512),[[V,g.account_name]])])])):T("",!0),e("div",null,[e("div",{class:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:r[41]||(r[41]=w=>g.require_gateway=!g.require_gateway)},[r[113]||(r[113]=e("div",null,[e("span",{class:"block text-sm font-medium text-gray-900"},"Link to Payment Gateway"),e("span",{class:"block text-xs text-gray-500"},"Enable online processing via a provider")],-1)),e("div",{class:F(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",g.require_gateway?"bg-indigo-600":"bg-gray-200"])},[e("span",{class:F(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",g.require_gateway?"translate-x-5":"translate-x-0"])},null,2)],2)]),g.require_gateway?(s(),o("div",Nc,[h(e("select",{"onUpdate:modelValue":r[42]||(r[42]=w=>g.gateway_provider=w),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2.5"},[...r[114]||(r[114]=[e("option",{value:""},"Select Provider...",-1),e("option",{value:"opay"},"Opay",-1),e("option",{value:"moniepoint"},"Moniepoint",-1),e("option",{value:"paystack"},"Paystack",-1),e("option",{value:"flutterwave"},"Flutterwave",-1)])],512),[[Y,g.gateway_provider]])])):T("",!0)]),e("div",{class:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:r[43]||(r[43]=w=>g.is_active_on_storefront=!g.is_active_on_storefront)},[r[115]||(r[115]=e("div",null,[e("span",{class:"block text-sm font-medium text-gray-900"},"Available on Storefront?"),e("span",{class:"block text-xs text-gray-500"},"Show this payment option to customers")],-1)),e("div",{class:F(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",g.is_active_on_storefront?"bg-indigo-600":"bg-gray-200"])},[e("span",{class:F(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",g.is_active_on_storefront?"translate-x-5":"translate-x-0"])},null,2)],2)])]),e("div",Lc,[e("button",{onClick:r[44]||(r[44]=w=>n.value=!1),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded text-sm hover:bg-gray-300 mr-2"},"Cancel"),e("button",{onClick:D,disabled:u.value,class:"bg-indigo-600 text-white px-4 py-2 rounded text-sm hover:bg-indigo-700 disabled:opacity-50"},i(u.value?"Creating...":"Create"),9,Rc)])]),_:1},8,["is-open"])]))}},Hc={class:"space-y-4"},Wc={class:"bg-gray-50/50 p-6 rounded-2xl border border-gray-100"},Gc={class:"space-y-4"},Kc={class:"flex items-center justify-between"},Jc={class:"flex items-center gap-4 flex-1"},Qc={class:"flex flex-col flex-1"},Xc={class:"text-base font-bold text-[#0A2540]"},Yc={key:0,class:"mt-2 text-sm"},Zc=["onUpdate:modelValue"],e0={class:"flex items-center"},t0=["onClick"],s0={key:0,class:"ml-10 mt-6 space-y-3 border-l-2 border-gray-50 pl-6"},o0={class:"flex items-center gap-3"},r0={class:"text-sm font-medium text-gray-600"},n0=["onUpdate:modelValue"],l0=["onClick"],i0={__name:"CatalogCurator",props:{modelValue:{type:Array,required:!0,default:()=>[]}},emits:["update:modelValue"],setup(l,{emit:t}){const a=l,b=t,f=P(a.modelValue);he(()=>a.modelValue,n=>{f.value=n},{deep:!0}),he(f,n=>{b("update:modelValue",n)},{deep:!0});const p=n=>{n.is_visible_online=!n.is_visible_online,!n.is_visible_online&&n.children&&n.children.forEach(u=>{u.is_visible_online=!1})};return(n,u)=>(s(),o("div",Hc,[e("div",Wc,[u[1]||(u[1]=e("h3",{class:"text-xl font-bold text-[#0A2540] mb-2"},"Build Your Online Menu",-1)),u[2]||(u[2]=e("p",{class:"text-sm text-gray-500 mb-8"},"Select which categories appear on your storefront. We've auto-hidden internal categories like 'Raw Materials'.",-1)),e("ul",Gc,[(s(!0),o(N,null,L(f.value,x=>(s(),o("li",{key:x.id,class:"bg-white border border-gray-100 rounded-2xl p-5 shadow-sm hover:shadow-md transition-shadow"},[e("div",Kc,[e("div",Jc,[u[0]||(u[0]=e("div",{class:"cursor-move text-gray-300 hover:text-gray-400"},[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1)),e("div",Qc,[e("span",Xc,i(x.name),1),x.is_visible_online?(s(),o("div",Yc,[h(e("input",{type:"text","onUpdate:modelValue":m=>x.public_display_name=m,class:"w-full max-w-xs text-sm border-2 border-gray-100 bg-gray-50 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#0A2540]/10 focus:border-[#0A2540] transition-all",placeholder:"Display name for customers..."},null,8,Zc),[[V,x.public_display_name]])])):T("",!0)])]),e("div",e0,[e("button",{type:"button",class:F(["relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none",x.is_visible_online?"bg-[#0A2540]":"bg-gray-200"]),onClick:m=>p(x)},[e("span",{"aria-hidden":"true",class:F(["pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out",x.is_visible_online?"translate-x-5":"translate-x-0"])},null,2)],10,t0)])]),x.children&&x.children.length>0&&x.is_visible_online?(s(),o("ul",s0,[(s(!0),o(N,null,L(x.children,m=>(s(),o("li",{key:m.id,class:"flex items-center justify-between py-2 group"},[e("div",o0,[e("span",r0,i(m.name),1),h(e("input",{type:"text","onUpdate:modelValue":k=>m.public_display_name=k,class:"ml-2 text-xs border-2 border-gray-100 bg-gray-50 rounded-lg px-3 py-1 focus:ring-2 focus:ring-[#0A2540]/10 focus:border-[#0A2540] transition-all",placeholder:"Display name..."},null,8,n0),[[V,m.public_display_name],[Q,m.is_visible_online]])]),e("button",{type:"button",class:F(["relative inline-flex h-6 w-10 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out",m.is_visible_online?"bg-[#0A2540]":"bg-gray-200"]),onClick:k=>p(m)},[e("span",{"aria-hidden":"true",class:F(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",m.is_visible_online?"translate-x-4":"translate-x-0"])},null,2)],10,l0)]))),128))])):T("",!0)]))),128))])])]))}},a0={class:"py-12"},d0={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},u0={class:"mb-12"},c0={class:"flex items-center space-x-4"},p0={class:"stepper-segment bg-gray-200"},m0={class:"mt-3 flex items-center"},g0={class:"bg-white overflow-hidden wizard-card border border-gray-100 p-6 text-gray-900 rounded-2xl shadow-lg"},f0={key:0,class:"animate-fade-in-right"},b0={class:"space-y-6"},y0={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},x0={class:"flex items-center gap-3 mt-1"},v0={class:"relative"},h0={class:"mt-1 flex items-center justify-center px-6 pt-5 pb-6 border-2 border-gray-100 border-dashed rounded-xl hover:border-[#0A2540] transition-colors group cursor-pointer relative"},w0={class:"space-y-1 text-center"},_0={key:0,class:"text-xs text-green-600 font-bold mt-2"},k0={key:1,class:"animate-fade-in-right"},$0={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-6"},S0=["onClick"],C0={class:"flex justify-between items-start mb-4"},P0={class:"text-5xl group-hover:scale-110 transition-transform duration-500"},T0={class:"text-white bg-[#0A2540] rounded-full p-1 shadow-md"},j0={class:"font-bold text-[#0A2540] text-lg"},U0={class:"text-sm text-gray-500 mt-2 leading-relaxed"},A0={key:2,class:"animate-fade-in-right"},M0={key:3,class:"animate-fade-in-right"},V0={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},E0=["onClick"],O0={class:"bg-gray-50 h-40 border-b border-gray-100 relative group-hover:bg-gray-100 transition-colors"},I0=["innerHTML"],q0={class:"absolute top-3 right-3 text-white bg-[#0A2540] rounded-full p-1.5 shadow-lg"},D0={class:"p-5 flex-1 flex flex-col"},F0={class:"font-bold text-[#0A2540] text-lg"},B0={class:"text-xs text-gray-500 mt-2 mb-4 leading-relaxed flex-1"},N0={class:"flex gap-2 flex-wrap"},L0={key:0,class:"mt-12 rounded-2xl overflow-hidden shadow-2xl border border-gray-800"},R0={class:"bg-[#1a1a2e] p-6 text-xs font-mono leading-relaxed"},z0={class:"text-blue-300 overflow-x-auto"},H0={class:"mt-10 flex justify-between items-center border-t border-gray-100 pt-8"},W0=["disabled"],G0={key:0,class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"},K0=["disabled"],J0={key:0,class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"},Q0={__name:"StoreWizard",props:{storeConfig:{type:Object,required:!0},categories:{type:Array,required:!0},routes:{type:Object,required:!0},csrfToken:String},setup(l){const t=l,a=P(1),b=P(!1),f=P(""),p=se({store_name:t.storeConfig.store_name||"",brand_color:t.storeConfig.brand_color||"#3b82f6",industry:t.storeConfig.industry||"",selected_categories:t.storeConfig.selected_categories||[],layout_preference:t.storeConfig.layout_preference||"minimal",logo:null}),n=P(JSON.parse(JSON.stringify(t.categories))),u=[{id:"fashion",label:"Fashion",icon:"ðŸ‘—",desc:"Stylish fonts & large images"},{id:"electronics",label:"Electronics",icon:"ðŸ“±",desc:"Tech-focused & clean"},{id:"grocery",label:"Grocery",icon:"ðŸŽ",desc:"Data-dense & practical"},{id:"hardware",label:"Hardware",icon:"ðŸ› ï¸",desc:"Bold & industrial"}],x={fashion:{label:"Fashion & Apparel",icon:"ðŸ›ï¸",fonts:{heading:"Playfair Display",body:"Lato"},radius:"0px",vibe:"minimalist",colors:{primary:["#000000","#F3F4F6"]}},electronics:{label:"Electronics & Gadgets",icon:"ðŸ”Œ",fonts:{heading:"Roboto",body:"Inter"},radius:"4px",vibe:"dark_mode",colors:{primary:["#0EA5E9","#1E293B"]}},grocery:{label:"Grocery & Essentials",icon:"ðŸ¥¦",fonts:{heading:"Poppins",body:"Open Sans"},radius:"8px",vibe:"fresh",colors:{primary:["#10B981","#ECFDF5"]}},hardware:{label:"Hardware & Tools",icon:"ðŸ› ï¸",fonts:{heading:"Oswald",body:"Roboto Condensed"},radius:"2px",vibe:"bold",colors:{primary:["#F59E0B","#FFFBEB"]}}},m={high_volume:{label:"High Volume Mart",description:"Amazon Style. Fast search, dense categories. Best for large inventories.",tags:["Search","Density","Hero"],structure:["HeroBanner","SearchFocus","CategoryGrid","FeaturedProductCarousel","Footer"],wireframe:`
            <div class="h-full flex flex-col items-center justify-center p-2">
                <div class="w-full h-1/4 bg-gray-800 rounded-sm mb-2 flex items-center justify-center text-[8px] text-white/50">HERO</div>
                <div class="w-2/3 h-3 bg-white rounded shadow-sm mb-2 border border-gray-100"></div>
                <div class="grid grid-cols-4 gap-1 w-full flex-1">
                    <div class="bg-blue-50 h-full rounded border border-blue-100"></div><div class="bg-blue-50 h-full rounded border border-blue-100"></div>
                    <div class="bg-blue-50 h-full rounded border border-blue-100"></div><div class="bg-blue-50 h-full rounded border border-blue-100"></div>
                </div>
            </div>`},brand_showcase:{label:"Brand Showcase",description:"Nike Style. Emotional connection, big visuals, brand story",tags:["Hero","Story"],structure:["HeroBanner","TextBlock","FeaturedProductCarousel","Newsletter","Footer"],wireframe:`
            <div class="h-full flex flex-col">
                <div class="w-full h-3/5 bg-gray-800 flex items-center justify-center text-white/20 text-xs">HERO</div>
                <div class="w-full h-2/5 bg-white flex items-center justify-center text-[8px] text-gray-300 p-2 text-center">Brand Story Block</div>
            </div>`},quick_order:{label:"Quick Order",description:"Wholesale/B2B. List view for efficiency. No fluff.",tags:["Tabular","Fast","Hero"],structure:["HeroBanner","QuickOrderTable","Footer"],wireframe:`
            <div class="h-full p-2 bg-gray-50 flex flex-col">
                <div class="w-full h-1/4 bg-gray-800 rounded-sm mb-2 flex items-center justify-center text-[8px] text-white/50">HERO</div>
                <div class="w-full h-3 bg-gray-300 rounded mb-2"></div>
                <div class="space-y-1 flex-1">
                    <div class="w-full h-1.5 bg-white rounded border border-gray-200"></div>
                    <div class="w-full h-1.5 bg-white rounded border border-gray-200"></div>
                    <div class="w-full h-1.5 bg-white rounded border border-gray-200"></div>
                    <div class="w-full h-1.5 bg-white rounded border border-gray-200"></div>
                </div>
            </div>`}},k=P(null),U=O=>{const g=O.target.files[0];g&&(p.logo=g,f.value=g.name)},_=O=>{if(p.industry=O,x[O]){const g=x[O].colors.primary[0];p.brand_color=g}},M=O=>{p.layout_preference=O,$(O)},$=O=>{if(!O||!m[O])return;const g=m[O],C=[],z=c=>{c.forEach(S=>{S.is_visible_online&&C.push({id:S.id,name:S.name}),S.children&&S.children.length&&z(S.children)})};z(n.value);const D=C.slice(0,3);k.value={layout_mode:O,components:g.structure,injected_data:{hero_title:`Welcome to ${p.store_name||"My Store"}`,hero_subtitle:`Browse our ${D.length} curated collections.`,highlight_categories:D},timestamp:new Date().toISOString()}},j=async()=>{const O=new FormData;O.append("step",a.value),O.append("store_name",p.store_name),O.append("brand_color",p.brand_color),p.industry&&O.append("industry",p.industry),p.layout_preference&&O.append("layout_preference",p.layout_preference),p.logo&&O.append("logo",p.logo),a.value===3&&O.append("catalog_curation",JSON.stringify(n.value));try{await X.post(t.routes.update,O,{headers:{"Content-Type":"multipart/form-data"}})}catch(g){throw console.error(g),g}},d=async()=>{if(a.value===1&&!p.store_name)return alert("Please enter a store name");if(a.value===2&&!p.industry)return alert("Please select an industry");b.value=!0;try{await j(),a.value++}catch{alert("Error saving progress. Please try again.")}finally{b.value=!1}},v=async()=>{if(!p.layout_preference)return alert("Please select a layout");b.value=!0;try{await j();const O=new FormData,g=[],C=D=>{D.forEach(c=>{c.is_visible_online&&g.push({id:c.id,name:c.name,slug:c.slug}),c.children&&c.children.length&&C(c.children)})};C(n.value),O.append("navigation_categories",JSON.stringify(g));const z=await X.post(t.routes.finish,O);z.data.success&&z.data.redirect&&(window.location.href=z.data.redirect)}catch(O){console.error(O),alert("Something went wrong generating your store. Please try again."),b.value=!1}};return fe(()=>{p.layout_preference&&$(p.layout_preference)}),(O,g)=>(s(),o("div",a0,[e("div",d0,[e("div",u0,[e("div",c0,[(s(),o(N,null,L(4,C=>e("div",{key:C,class:"flex-1"},[e("div",p0,[e("div",{class:F(["h-full rounded-full transition-all duration-700",C<=a.value?"bg-[#0A2540]":""]),style:rt({width:C<a.value||C===a.value?"100%":"0%"})},null,6)]),e("div",m0,[e("span",{class:F(["text-[10px] font-bold tracking-widest uppercase transition-colors",C<=a.value?"text-[#0A2540]":"text-gray-400"])},i(["Identity","Niche","Catalog","Layout"][C-1]),3)])])),64))])]),e("div",g0,[a.value===1?(s(),o("div",f0,[g[10]||(g[10]=e("h3",{class:"text-xl font-bold text-[#0A2540] mb-6"},"Brand Identity",-1)),e("div",b0,[e("div",null,[g[5]||(g[5]=e("label",{class:"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2"},"Store Name",-1)),h(e("input",{"onUpdate:modelValue":g[0]||(g[0]=C=>p.store_name=C),type:"text",class:"block w-full input-premium py-3 px-4 rounded-xl shadow-sm border-2 border-gray-200 focus:border-[#0A2540] focus:ring-[#0A2540]/10",placeholder:"e.g. Acme Corp Marketplace",required:"",autofocus:""},null,512),[[V,p.store_name]])]),e("div",y0,[e("div",null,[g[6]||(g[6]=e("label",{class:"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2"},"Primary Brand Color",-1)),e("div",x0,[e("div",v0,[h(e("input",{type:"color","onUpdate:modelValue":g[1]||(g[1]=C=>p.brand_color=C),class:"h-12 w-12 border-0 rounded-xl cursor-pointer p-0 overflow-hidden shadow-sm"},null,512),[[V,p.brand_color]])]),h(e("input",{type:"text","onUpdate:modelValue":g[2]||(g[2]=C=>p.brand_color=C),class:"block flex-1 input-premium py-3 px-4 rounded-xl shadow-sm font-mono text-sm border-2 border-gray-200"},null,512),[[V,p.brand_color]])])]),e("div",null,[g[9]||(g[9]=e("label",{class:"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2"},"Upload Logo",-1)),e("div",h0,[e("div",w0,[g[7]||(g[7]=e("svg",{class:"mx-auto h-8 w-8 text-gray-400 group-hover:text-[#0A2540] transition-colors",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),g[8]||(g[8]=e("div",{class:"flex text-xs text-gray-600"},[e("span",{class:"relative cursor-pointer bg-white rounded-md font-bold text-[#0A2540] hover:text-navy-soft focus-within:outline-none"},"Click to upload")],-1)),f.value?(s(),o("p",_0,i(f.value),1)):T("",!0)]),e("input",{type:"file",onChange:U,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/*"},null,32)])])])])])):T("",!0),a.value===2?(s(),o("div",k0,[g[13]||(g[13]=e("h3",{class:"text-xl font-bold text-[#0A2540] mb-2"},"Select Your Industry",-1)),g[14]||(g[14]=e("p",{class:"text-sm text-gray-500 mb-8"},"This helps us auto-configure your store's look and feel.",-1)),e("div",$0,[(s(),o(N,null,L(u,C=>e("div",{key:C.id,onClick:z=>_(C.id),class:F([{"border-[#0A2540] ring-2 ring-[#0A2540]/10 bg-gray-50":p.industry===C.id,"border-gray-100 bg-white":p.industry!==C.id},"group p-6 border rounded-2xl cursor-pointer transition-all duration-300 hover:shadow-xl hover:-translate-y-1 relative overflow-hidden h-full flex flex-col justify-between"])},[e("div",C0,[e("div",P0,i(C.icon),1),h(e("div",T0,[...g[11]||(g[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])],512),[[Q,p.industry===C.id]])]),e("div",null,[e("div",j0,i(C.label),1),e("div",U0,i(C.desc),1)]),g[12]||(g[12]=e("div",{class:"absolute -bottom-4 -right-4 w-20 h-20 bg-[#0A2540]/5 rounded-full blur-2xl group-hover:bg-[#0A2540]/10 transition-colors"},null,-1))],10,S0)),64))])])):T("",!0),a.value===3?(s(),o("div",A0,[Z(i0,{modelValue:n.value,"onUpdate:modelValue":g[3]||(g[3]=C=>n.value=C)},null,8,["modelValue"])])):T("",!0),a.value===4?(s(),o("div",M0,[g[17]||(g[17]=e("h3",{class:"text-xl font-bold text-[#0A2540] mb-2"},"Choose Layout Style",-1)),g[18]||(g[18]=e("p",{class:"text-sm text-gray-500 mb-8"},"Select the interface that best represents your brand's experience.",-1)),e("div",V0,[(s(),o(N,null,L(m,(C,z)=>e("div",{key:z,onClick:D=>M(z),class:F([{"border-[#0A2540] ring-4 ring-[#0A2540]/5 bg-gray-50":p.layout_preference===z,"border-gray-100 bg-white":p.layout_preference!==z},"group border-2 rounded-2xl overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-xl hover:-translate-y-1 relative flex flex-col h-full"])},[e("div",O0,[e("div",{innerHTML:C.wireframe,class:"w-full h-full p-6 text-gray-200 group-hover:text-gray-400 transition-colors"},null,8,I0),h(e("div",q0,[...g[15]||(g[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])],512),[[Q,p.layout_preference===z]])]),e("div",D0,[e("h4",F0,i(C.label),1),e("p",B0,i(C.description),1),e("div",N0,[(s(!0),o(N,null,L(C.tags,D=>(s(),o("span",{key:D,class:"text-[9px] uppercase font-black text-[#0A2540] bg-[#0A2540]/5 px-2 py-1 rounded-md tracking-widest"},i(D),1))),128))])])],10,E0)),64))]),k.value?(s(),o("div",L0,[g[16]||(g[16]=ge('<div class="bg-[#0A2540] px-4 py-2 flex items-center justify-between" data-v-590dd1b4><div class="flex space-x-2" data-v-590dd1b4><div class="w-3 h-3 rounded-full bg-red-400" data-v-590dd1b4></div><div class="w-3 h-3 rounded-full bg-yellow-400" data-v-590dd1b4></div><div class="w-3 h-3 rounded-full bg-green-400" data-v-590dd1b4></div></div><div class="text-[10px] font-bold text-gray-400 uppercase tracking-widest" data-v-590dd1b4>generated_theme_schema.json</div></div>',1)),e("div",R0,[e("pre",z0,i(JSON.stringify(k.value,null,2)),1)])])):T("",!0)])):T("",!0),e("div",H0,[h(e("button",{onClick:g[4]||(g[4]=C=>a.value--),class:"text-gray-400 hover:text-[#0A2540] font-bold text-sm uppercase tracking-widest transition-colors flex items-center group"},[...g[19]||(g[19]=[e("span",{class:"mr-2 group-hover:-translate-x-1 transition-transform"},"â†",-1),B(" Back ",-1)])],512),[[Q,a.value>1]]),h(e("div",null,null,512),[[Q,a.value===1]]),h(e("button",{onClick:d,disabled:b.value,class:"bg-[#0A2540] hover:bg-navy-soft text-white font-bold py-4 px-10 rounded-xl transition shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex items-center group text-sm uppercase tracking-widest disabled:opacity-50"},[b.value?(s(),o("span",G0)):T("",!0),g[20]||(g[20]=B(" Next Step ",-1)),g[21]||(g[21]=e("span",{class:"ml-3 group-hover:translate-x-1 transition-transform"},"â†’",-1))],8,W0),[[Q,a.value<4]]),h(e("button",{onClick:v,disabled:b.value,class:"bg-[#0A2540] hover:bg-navy-soft text-white font-bold py-4 px-10 rounded-xl transition shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex items-center animate-pulse text-sm uppercase tracking-widest disabled:opacity-50"},[b.value?(s(),o("span",J0)):T("",!0),g[22]||(g[22]=B(" Create My Store ",-1))],8,K0),[[Q,a.value===4]])])])])]))}},X0=xe(Q0,[["__scopeId","data-v-590dd1b4"]]),Y0={class:"container mx-auto px-4 py-6"},Z0={class:"flex justify-between items-center mb-6"},ep=["href"],tp={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4"},sp={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},op={class:"lg:col-span-2 space-y-6"},rp={class:"bg-white rounded-lg shadow p-6"},np={class:"mb-4"},lp=["value"],ip={class:"bg-white rounded-lg shadow p-6"},ap={class:"w-full text-left border-collapse"},dp={class:"py-3"},up=["onUpdate:modelValue","onChange"],cp=["value"],pp={class:"py-3"},mp=["onUpdate:modelValue"],gp={class:"py-3"},fp={class:"relative"},bp={class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},yp=["onUpdate:modelValue"],xp={class:"py-3 text-right font-medium"},vp={class:"py-3 text-right"},hp=["onClick"],wp={class:"lg:col-span-1 space-y-6"},_p={class:"bg-white rounded-lg shadow p-6"},kp={class:"flex justify-between py-2 text-sm"},$p={class:"font-medium"},Sp={class:"flex justify-between py-2 text-sm border-t border-gray-100 pt-2"},Cp={class:"font-bold text-lg text-indigo-600"},Pp={class:"bg-white rounded-lg shadow p-6"},Tp={class:"mb-4"},jp={class:"mb-4"},Up=["disabled"],Ap={key:0,class:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"},Mp={__name:"OrderCreate",props:{routes:{type:Object,required:!0},currencySymbol:{type:String,default:"$"}},setup(l){const t=l,a=P([]),b=P([]),f=P(!1),p=P(""),n=se({customer_id:"",items:[{product_id:"",quantity:1,price:0}],status:"pending",payment_status:"pending",due_date:"",notes:""});fe(async()=>{try{const[M,$]=await Promise.all([X.get(t.routes.customers),X.get(t.routes.products)]);a.value=M.data,b.value=$.data}catch(M){console.error("Failed to load resources",M),p.value="Failed to load customers or products."}});const u=re(()=>n.items.reduce((M,$)=>M+$.price*$.quantity,0)),x=()=>{n.items.push({product_id:"",quantity:1,price:0})},m=M=>{n.items.length>1&&n.items.splice(M,1)},k=M=>{const $=n.items[M],j=b.value.find(d=>d.id===$.product_id);j&&($.price=parseFloat(j.price||0))},U=M=>t.currencySymbol+Number(M).toFixed(2),_=async()=>{f.value=!0,p.value="";try{const M=await X.post(t.routes.store,n);window.location.href=t.routes.index}catch(M){console.error(M),M.response&&M.response.data&&M.response.data.errors?p.value=Object.values(M.response.data.errors).flat().join(" "):M.response&&M.response.data&&M.response.data.message?p.value=M.response.data.message:p.value="Failed to create order.",f.value=!1}};return(M,$)=>(s(),o("div",Y0,[e("div",Z0,[$[3]||($[3]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Record Credit Sale",-1)),e("a",{href:l.routes.index,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"},"Back to List",8,ep)]),p.value?(s(),o("div",tp,i(p.value),1)):T("",!0),e("form",{onSubmit:te(_,["prevent"])},[e("div",sp,[e("div",op,[e("div",rp,[$[6]||($[6]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-800"},"Customer",-1)),e("div",np,[$[5]||($[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Select Customer",-1)),h(e("select",{"onUpdate:modelValue":$[0]||($[0]=j=>n.customer_id=j),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},[$[4]||($[4]=e("option",{value:""},"-- Choose Customer --",-1)),(s(!0),o(N,null,L(a.value,j=>(s(),o("option",{key:j.id,value:j.id},i(j.name)+" ("+i(j.phone)+") ",9,lp))),128))],512),[[Y,n.customer_id]])])]),e("div",ip,[$[9]||($[9]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-800"},"Items",-1)),e("table",ap,[$[8]||($[8]=e("thead",null,[e("tr",{class:"text-sm font-medium text-gray-500 border-b border-gray-200"},[e("th",{class:"py-2 w-1/2"},"Product"),e("th",{class:"py-2 w-20"},"Qty"),e("th",{class:"py-2 w-32"},"Price"),e("th",{class:"py-2 w-32 text-right"},"Total"),e("th",{class:"py-2 w-10"})])],-1)),e("tbody",null,[(s(!0),o(N,null,L(n.items,(j,d)=>(s(),o("tr",{key:d,class:"border-b border-gray-100"},[e("td",dp,[h(e("select",{"onUpdate:modelValue":v=>j.product_id=v,onChange:v=>k(d),class:"w-full rounded border-gray-300 text-sm",required:""},[$[7]||($[7]=e("option",{value:""},"Select Product",-1)),(s(!0),o(N,null,L(b.value,v=>(s(),o("option",{key:v.id,value:v.id},i(v.name),9,cp))),128))],40,up),[[Y,j.product_id]])]),e("td",pp,[h(e("input",{type:"number","onUpdate:modelValue":v=>j.quantity=v,min:"1",class:"w-full rounded border-gray-300 text-sm",required:""},null,8,mp),[[V,j.quantity,void 0,{number:!0}]])]),e("td",gp,[e("div",fp,[e("span",bp,i(l.currencySymbol),1),h(e("input",{type:"number","onUpdate:modelValue":v=>j.price=v,step:"0.01",class:"w-full rounded border-gray-300 pl-7 text-sm",required:""},null,8,yp),[[V,j.price,void 0,{number:!0}]])])]),e("td",xp,i(U(j.price*j.quantity)),1),e("td",vp,[e("button",{type:"button",onClick:v=>m(d),class:"text-red-500 hover:text-red-700"},"Ã—",8,hp)])]))),128))])]),e("button",{type:"button",onClick:x,class:"mt-4 px-4 py-2 bg-indigo-50 text-indigo-700 rounded hover:bg-indigo-100 text-sm font-medium"}," + Add Line Item ")])]),e("div",wp,[e("div",_p,[$[12]||($[12]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-800"},"Order Summary",-1)),e("div",kp,[$[10]||($[10]=e("span",{class:"text-gray-600"},"Subtotal",-1)),e("span",$p,i(U(u.value)),1)]),e("div",Sp,[$[11]||($[11]=e("span",{class:"text-gray-800 font-bold"},"Total",-1)),e("span",Cp,i(U(u.value)),1)])]),e("div",Pp,[$[16]||($[16]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-800"},"Sale Details",-1)),e("div",Tp,[$[13]||($[13]=e("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Payment Due Date (Optional)",-1)),h(e("input",{type:"date","onUpdate:modelValue":$[1]||($[1]=j=>n.due_date=j),class:"w-full rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,n.due_date]])]),e("div",jp,[$[14]||($[14]=e("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Notes / Reference",-1)),h(e("input",{type:"text","onUpdate:modelValue":$[2]||($[2]=j=>n.notes=j),class:"w-full rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"PO Number etc."},null,512),[[V,n.notes]])]),$[17]||($[17]=ge('<div class="p-3 bg-yellow-50 rounded-md mb-4 border border-yellow-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-yellow-800">Credit Sale</h3><div class="mt-2 text-sm text-yellow-700"><p>This will record the order as <strong>Pending</strong>. You can update the status to <strong>Completed</strong> later to record revenue.</p></div></div></div></div>',1)),e("button",{type:"submit",disabled:f.value,class:"w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 flex justify-center items-center"},[f.value?(s(),o("span",Ap)):T("",!0),$[15]||($[15]=B(" Record Sale ",-1))],8,Up)])])])],32)]))}},Vp={class:"bg-white rounded-lg shadow"},Ep={class:"p-6 border-b border-gray-200"},Op={class:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0"},Ip={class:"flex space-x-2 bg-gray-100 p-1 rounded-lg"},qp=["onClick"],Dp={class:"flex items-center space-x-4 w-full sm:w-auto"},Fp={class:"relative w-full sm:w-64"},Bp=["href"],Np={key:0,class:"mt-4 flex items-center justify-between bg-indigo-50 p-3 rounded-lg border border-indigo-100 animate-in fade-in slide-in-from-top-2"},Lp={class:"flex items-center"},Rp={class:"text-sm font-semibold text-indigo-700 ml-2"},zp={class:"flex items-center space-x-2"},Hp=["disabled"],Wp=["disabled"],Gp={key:0,class:"animate-spin -ml-1 mr-2 h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24"},Kp={class:"mt-4 flex items-center justify-end text-xs text-gray-500"},Jp={class:"flex h-2 w-2 relative mr-2"},Qp={key:0,class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"},Xp={class:"overflow-x-auto"},Yp={class:"min-w-full divide-y divide-gray-200"},Zp={class:"bg-gray-50"},em={scope:"col",class:"px-6 py-3 text-left"},tm=["checked"],sm={class:"bg-white divide-y divide-gray-200"},om={key:0,class:"animate-pulse"},rm={key:1},nm={class:"px-6 py-4 whitespace-nowrap"},lm=["value"],im={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},am={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},dm={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},um={class:"px-6 py-4 whitespace-nowrap"},cm={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pm={class:"flex items-center"},mm={key:0,class:"mr-1.5 h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gm={key:1,class:"mr-1.5 h-4 w-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},fm={key:2,class:"mr-1.5 h-4 w-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bm={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},ym={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},xm=["href"],vm={key:0,class:"px-6 py-4 border-t border-gray-200"},hm={class:"flex items-center justify-between"},wm={class:"text-sm text-gray-700"},_m={class:"font-medium"},km={class:"font-medium"},$m={class:"font-medium"},Sm={class:"space-x-2"},Cm=["disabled"],Pm=["disabled"],Tm={__name:"OmniChannelOrders",props:{initialOrders:{type:Object,default:()=>({data:[]})},routes:{type:Object,required:!0},currencySymbol:{type:String,default:"$"}},setup(l){const t=(D,c)=>{let S;return function(...K){const R=()=>{clearTimeout(S),D(...K)};clearTimeout(S),S=setTimeout(R,c)}},a=l,b=P(a.initialOrders),f=P(!1),p=P(!1),n=P(null),u=P([]),x=P(""),m=P(!1),k=P(!1),U=[{label:"All Orders",value:"all"},{label:"Online Store",value:"storefront"},{label:"Manual Sales",value:"admin"},{label:"POS Sales List",value:"pos"}],_=se({source:"all",search:""}),M={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},$=async(D=null)=>{p.value=!0;try{const c=D||a.routes.index,S=await X.get(c,{params:{source:_.source==="all"?null:_.source,search:_.search},headers:{Accept:"application/json"}});b.value=S.data,D&&(u.value=[])}catch(c){console.error("Failed to fetch orders",c)}finally{p.value=!1,f.value=!1}},j=()=>{u.value.length===b.value.data.length?(u.value=[],k.value=!1):(u.value=b.value.data.map(D=>D.id),k.value=!0)},d=async()=>{if(!(!x.value||u.value.length===0)&&!(x.value==="delete"&&!confirm(`Are you sure you want to delete ${u.value.length} orders?`))){m.value=!0;try{const D=await X.post(a.routes.bulkAction,{order_ids:u.value,action:x.value});D.data.success&&(u.value=[],x.value="",k.value=!1,$(),alert(D.data.message))}catch(D){console.error("Bulk action failed",D),alert(D.response?.data?.message||"Bulk action failed. Please try again.")}finally{m.value=!1}}},v=D=>{_.source=D,f.value=!0,u.value=[],k.value=!1,$()},O=t(()=>{f.value=!0,$()},300),g=D=>a.currencySymbol+Number(D).toFixed(2),C=D=>{const c={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(D).toLocaleDateString(void 0,c)},z=D=>D.charAt(0).toUpperCase()+D.slice(1);return fe(()=>{n.value=setInterval(()=>{$()},15e3)}),_e(()=>{n.value&&clearInterval(n.value)}),(D,c)=>(s(),o("div",Vp,[e("div",Ep,[e("div",Op,[e("div",Ip,[(s(),o(N,null,L(U,S=>e("button",{key:S.value,onClick:W=>v(S.value),class:F(["px-4 py-2 text-sm font-medium rounded-md transition-colors",_.source===S.value?"bg-white text-gray-900 shadow":"text-gray-500 hover:text-gray-700"])},i(S.label),11,qp)),64))]),e("div",Dp,[e("div",Fp,[c[7]||(c[7]=e("span",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),h(e("input",{"onUpdate:modelValue":c[0]||(c[0]=S=>_.search=S),onInput:c[1]||(c[1]=(...S)=>ce(O)&&ce(O)(...S)),type:"text",placeholder:"Search orders...",class:"pl-10 block w-full rounded-md border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,544),[[V,_.search]])]),e("a",{href:l.routes.create,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," + New Order ",8,Bp)])]),u.value.length>0?(s(),o("div",Np,[e("div",Lp,[e("span",Rp,i(u.value.length)+" orders selected",1)]),e("div",zp,[h(e("select",{"onUpdate:modelValue":c[2]||(c[2]=S=>x.value=S),class:"text-xs font-bold border-gray-300 rounded-md py-1 focus:ring-indigo-500 focus:border-indigo-500",disabled:m.value},[...c[8]||(c[8]=[ge('<option value="">Status Update</option><option value="status_pending">Set Pending</option><option value="status_processing">Set Processing</option><option value="status_shipped">Set Shipped</option><option value="status_delivered">Set Delivered</option><option value="status_completed">Set Completed</option><option value="status_cancelled">Set Cancelled</option><option value="delete">Delete Orders</option>',8)])],8,Hp),[[Y,x.value]]),e("button",{onClick:d,disabled:!x.value||m.value,class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-bold rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm"},[m.value?(s(),o("svg",Gp,[...c[9]||(c[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):T("",!0),c[10]||(c[10]=B(" Apply Action ",-1))],8,Wp),e("button",{onClick:c[3]||(c[3]=S=>u.value=[]),class:"text-xs font-bold text-gray-500 hover:text-gray-700 px-2"}," Cancel ")])])):T("",!0),e("div",Kp,[e("span",Jp,[p.value?(s(),o("span",Qp)):T("",!0),e("span",{class:F(["relative inline-flex rounded-full h-2 w-2",p.value?"bg-indigo-500":"bg-green-500"])},null,2)]),B(" "+i(p.value?"Updating...":"Live"),1)])]),e("div",Xp,[e("table",Yp,[e("thead",Zp,[e("tr",null,[e("th",em,[e("input",{type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 h-4 w-4",checked:k.value,onChange:j},null,40,tm)]),c[11]||(c[11]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order # ",-1)),c[12]||(c[12]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer ",-1)),c[13]||(c[13]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date ",-1)),c[14]||(c[14]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),c[15]||(c[15]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Source ",-1)),c[16]||(c[16]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total ",-1)),c[17]||(c[17]=e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")],-1))])]),e("tbody",sm,[f.value?(s(),o("tr",om,[...c[18]||(c[18]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"},"Loading orders...",-1)])])):b.value.data.length===0?(s(),o("tr",rm,[...c[19]||(c[19]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"},"No orders found.",-1)])])):T("",!0),(s(!0),o(N,null,L(b.value.data,S=>(s(),o("tr",{key:S.id,class:F(["hover:bg-gray-50 transition-colors",{"bg-indigo-50/30":u.value.includes(S.id)}])},[e("td",nm,[h(e("input",{type:"checkbox","onUpdate:modelValue":c[4]||(c[4]=W=>u.value=W),value:S.id,class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 h-4 w-4"},null,8,lm),[[ne,u.value]])]),e("td",im,i(S.order_number),1),e("td",am,i(S.customer?S.customer.name:"Guest"),1),e("td",dm,i(C(S.created_at)),1),e("td",um,[e("span",{class:F(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",M[S.status]||"bg-gray-100 text-gray-800"])},i(z(S.status)),3)]),e("td",cm,[e("span",pm,[S.order_source==="storefront"?(s(),o("svg",mm,[...c[20]||(c[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])])):S.order_source==="pos"?(s(),o("svg",gm,[...c[21]||(c[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])):(s(),o("svg",fm,[...c[22]||(c[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])])),B(" "+i(z(S.order_source)),1)])]),e("td",bm,i(g(S.total)),1),e("td",ym,[e("a",{href:`${l.routes.base}/${S.id}`,class:"text-indigo-600 hover:text-indigo-900"},"View",8,xm)])],2))),128))])])]),b.value.data.length>0?(s(),o("div",vm,[e("div",hm,[e("div",wm,[c[23]||(c[23]=B(" Showing ",-1)),e("span",_m,i(b.value.from),1),c[24]||(c[24]=B(" to ",-1)),e("span",km,i(b.value.to),1),c[25]||(c[25]=B(" of ",-1)),e("span",$m,i(b.value.total),1),c[26]||(c[26]=B(" results ",-1))]),e("div",Sm,[e("button",{onClick:c[5]||(c[5]=S=>$(b.value.prev_page_url)),disabled:!b.value.prev_page_url,class:"px-3 py-1 border-2 border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Previous ",8,Cm),e("button",{onClick:c[6]||(c[6]=S=>$(b.value.next_page_url)),disabled:!b.value.next_page_url,class:"px-3 py-1 border-2 border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Next ",8,Pm)])])])):T("",!0)]))}},jm={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Um={class:"p-6 bg-white border-b border-gray-200"},Am={class:"overflow-x-auto"},Mm={class:"min-w-full divide-y divide-gray-200"},Vm={class:"bg-white divide-y divide-gray-200"},Em=["onClick"],Om={class:"px-6 py-4 whitespace-nowrap"},Im={class:"px-6 py-4 whitespace-nowrap"},qm={class:"text-sm font-medium text-gray-900"},Dm={class:"text-sm text-gray-500"},Fm={class:"px-6 py-4 whitespace-nowrap"},Bm={class:"text-sm text-gray-900"},Nm={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Lm={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Rm=["onClick"],zm={key:0},Hm={class:"mt-4"},Wm={key:0,class:"fixed inset-0 z-50 overflow-hidden",role:"dialog","aria-modal":"true"},Gm={class:"absolute inset-0 overflow-hidden"},Km={class:"fixed inset-y-0 right-0 pl-10 max-w-full flex"},Jm={class:"h-full flex flex-col bg-white shadow-xl overflow-y-scroll"},Qm={class:"py-6 px-4 sm:px-6 bg-[#0A2540]"},Xm={class:"mt-1"},Ym={class:"text-sm text-blue-100"},Zm={class:"relative flex-1 py-6 px-4 sm:px-6"},eg={class:"space-y-6"},tg={class:"mt-1 flex items-center"},sg={class:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold uppercase mr-3"},og={class:"text-sm font-medium text-gray-900"},rg=["href"],ng={class:"mt-1 text-sm text-gray-900 font-semibold"},lg={class:"mt-2 text-sm text-gray-900 bg-gray-50 p-4 rounded-lg whitespace-pre-wrap leading-relaxed border border-gray-100"},ig={class:"border-t border-gray-200 py-6 px-4 sm:px-6"},ag=["href"],dg={__name:"MessageInbox",props:{initialMessages:{type:Array,default:()=>[]},readUrlTemplate:{type:String,required:!0},csrfToken:String},setup(l){const t=l,a=P([...t.initialMessages]),b=P(!1),f=P({}),p=async m=>{if(f.value=m,b.value=!0,!m.is_read){const k=a.value.findIndex(U=>U.id===m.id);k!==-1&&(a.value[k].is_read=!0);try{const U=t.readUrlTemplate.replace(":id",m.id);await X.post(U)}catch(U){console.error("Failed to mark message as read",U)}}},n=()=>{b.value=!1},u=m=>m?new Date(m).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"",x=(m,k)=>m?m.length>k?m.substring(0,k)+"...":m:"";return he(()=>t.initialMessages,m=>{a.value=[...m]}),(m,k)=>(s(),o("div",null,[e("div",jm,[e("div",Um,[e("div",Am,[e("table",Mm,[k[1]||(k[1]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Customer"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Action")])])],-1)),e("tbody",Vm,[(s(!0),o(N,null,L(a.value,U=>(s(),o("tr",{key:U.id,class:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:_=>p(U)},[e("td",Om,[e("span",{class:F(["inline-block h-3 w-3 rounded-full transition-colors duration-300",U.is_read?"bg-gray-300":"bg-blue-600"])},null,2)]),e("td",Im,[e("div",qm,i(U.name),1),e("div",Dm,i(U.email),1)]),e("td",Fm,[e("div",Bm,i(x(U.subject,40)),1)]),e("td",Nm,i(u(U.created_at)),1),e("td",Lm,[e("button",{onClick:te(_=>p(U),["stop"]),class:"text-indigo-600 hover:text-indigo-900"},"View",8,Rm)])],8,Em))),128)),a.value.length===0?(s(),o("tr",zm,[...k[0]||(k[0]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500"}," No messages found. ",-1)])])):T("",!0)])])]),e("div",Hm,[me(m.$slots,"pagination")])])]),(s(),Te(nt,{to:"body"},[b.value?(s(),o("div",Wm,[e("div",Gm,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n,"aria-hidden":"true"}),e("div",Km,[e("div",{class:F(["w-screen max-w-md transform transition ease-in-out duration-500 sm:duration-700",b.value?"translate-x-0":"translate-x-full"])},[e("div",Jm,[e("div",Qm,[e("div",{class:"flex items-center justify-between"},[k[3]||(k[3]=e("h2",{class:"text-lg font-medium text-white"},"Message Details",-1)),e("div",{class:"ml-3 h-7 flex items-center"},[e("button",{type:"button",class:"bg-[#0A2540] rounded-md text-gray-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",onClick:n},[...k[2]||(k[2]=[e("span",{class:"sr-only"},"Close panel",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Xm,[e("p",Ym," Received on "+i(u(f.value.created_at)),1)])]),e("div",Zm,[e("div",eg,[e("div",null,[k[4]||(k[4]=e("label",{class:"block text-sm font-medium text-gray-500"},"From",-1)),e("div",tg,[e("div",sg,i(f.value.name?f.value.name.charAt(0):"?"),1),e("div",null,[e("p",og,i(f.value.name),1),e("a",{href:"mailto:"+f.value.email,class:"text-sm text-indigo-600 hover:text-indigo-900"},i(f.value.email),9,rg)])])]),e("div",null,[k[5]||(k[5]=e("label",{class:"block text-sm font-medium text-gray-500"},"Subject",-1)),e("div",ng,i(f.value.subject),1)]),e("div",null,[k[6]||(k[6]=e("label",{class:"block text-sm font-medium text-gray-500"},"Message",-1)),e("div",lg,i(f.value.message),1)])])]),e("div",ig,[e("a",{href:"mailto:"+f.value.email+"?subject=Re: "+f.value.subject,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Reply via Email ",8,ag)])])],2)])])])):T("",!0)]))]))}},ug={class:"border-b border-gray-200 mb-6"},cg={class:"-mb-px flex space-x-8","aria-label":"Tabs"},pg={key:0,class:"bg-green-50 border-l-4 border-green-400 p-4 mb-4",role:"alert"},mg={class:"text-sm text-green-600"},gg={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-4",role:"alert"},fg={class:"text-sm text-red-600"},bg={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},yg={class:"p-6 text-gray-900"},xg={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},vg={class:"space-y-4"},hg={class:"mt-2 flex items-center justify-center w-full"},wg={class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},_g={class:"flex flex-col items-center justify-center pt-5 pb-6 text-center"},kg=["src"],$g={key:1},Sg={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Cg={class:"p-6 text-gray-900"},Pg={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Tg={class:"mt-2 text-center"},jg=["src"],Ug={class:"mt-2 text-center"},Ag=["src"],Mg={class:"mt-4"},Vg={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Eg={class:"p-6 text-gray-900"},Og={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ig={class:"inline-flex items-center cursor-pointer"},qg={class:"inline-flex items-center cursor-pointer"},Dg={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Fg={class:"p-6 text-gray-900"},Bg={class:"space-y-4"},Ng={class:"space-y-2 mt-2"},Lg=["onUpdate:modelValue"],Rg=["onUpdate:modelValue"],zg=["onClick"],Hg={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Wg={class:"p-6 text-gray-900"},Gg={class:"grid grid-cols-1 gap-6"},Kg={class:"mt-2 text-center"},Jg=["src"],Qg={class:"space-y-4"},Xg={class:"flex justify-between items-center mb-1"},Yg=["disabled"],Zg={class:"bg-gray-50 p-6 rounded-xl border border-gray-100"},ef={class:"flex justify-between items-center mb-4"},tf=["disabled"],sf={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},of={class:"md:col-span-1"},rf={class:"md:col-span-2"},nf={class:"space-y-3 mt-2"},lf={class:"flex-1"},af=["onUpdate:modelValue"],df={class:"flex-1"},uf=["onUpdate:modelValue"],cf={class:"pt-5"},pf=["onClick"],mf={class:"space-y-6 mb-6"},gf={class:"p-6 text-gray-900"},ff={class:"flex justify-between items-center border-b pb-2 mb-4"},bf={class:"text-lg font-medium text-gray-900 uppercase"},yf=["onClick","disabled"],xf=["onUpdate:modelValue"],vf={class:"flex justify-end sticky bottom-4 z-10"},hf=["disabled"],wf={key:0,class:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"},_f={__name:"StoreContent",props:{initialContent:{type:Object,default:()=>({})},initialContact:{type:Object,default:()=>({social_links:[]})},initialSplitBanner:{type:Object,default:()=>({})},initialAboutUs:{type:Object,default:()=>({stats:[]})},initialPolicies:{type:Object,default:()=>({})},showNewArrivals:{type:Boolean,default:!1},showBestSellers:{type:Boolean,default:!1},routes:{type:Object,required:!0},config:{type:Object,default:()=>({})}},setup(l){const t=l,a=P("home"),b=P(!1),f=P(!1),p=P(""),n=P(""),u=P(null),x=P(null),m=P(null),k=P(null),U=se({hero_title:t.initialContent.hero_title||"",hero_subtitle:t.initialContent.hero_subtitle||"",cta_text:t.initialContent.cta_text||"",hero_image:null,split_title:t.initialSplitBanner.center_text?.title||"",split_image_left:null,split_image_right:null,show_new_arrivals:t.showNewArrivals,show_best_sellers:t.showBestSellers,contact_email:t.initialContact.email||"",social_links:t.initialContact.social_links||[],about_title:t.initialAboutUs.title||"",about_content:t.initialAboutUs.content||"",about_mission_title:t.initialAboutUs.mission_title||"",about_mission_text:t.initialAboutUs.mission_text||"",about_hero_image:null,about_stats:t.initialAboutUs.stats||[],policy_faq:t.initialPolicies.faq||"",policy_shipping:t.initialPolicies.shipping||"",policy_returns:t.initialPolicies.returns||""}),_=()=>{t.initialContent.banner_image&&(u.value=M(t.initialContent.banner_image)),t.initialSplitBanner.image_left&&(x.value=M(t.initialSplitBanner.image_left)),t.initialSplitBanner.image_right&&(m.value=M(t.initialSplitBanner.image_right)),t.initialAboutUs.hero_image&&(k.value=M(t.initialAboutUs.hero_image))},M=D=>D?D.startsWith("http")?D:t.routes.media_base+"?path="+D:null,$=(D,c,S)=>{const W=D.target.files[0];if(W){U[c]=W;const K=new FileReader;K.onload=R=>{S==="previewHero"&&(u.value=R.target.result),S==="previewSplitLeft"&&(x.value=R.target.result),S==="previewSplitRight"&&(m.value=R.target.result),S==="previewAboutHero"&&(k.value=R.target.result)},K.readAsDataURL(W)}},j=()=>{U.social_links.push({platform:"facebook",url:""})},d=D=>{U.social_links.splice(D,1)},v=()=>{U.about_stats.push({label:"",value:""})},O=D=>{U.about_stats.splice(D,1)},g=async()=>{b.value=!0,p.value="",n.value="";const D=new FormData;for(const c in U)c==="social_links"||c==="about_stats"||U[c]!==null&&U[c]!==void 0&&(typeof U[c]=="boolean"?D.append(c,U[c]?"1":"0"):D.append(c,U[c]));U.social_links.forEach((c,S)=>{D.append(`social_links[${S}][platform]`,c.platform),D.append(`social_links[${S}][url]`,c.url)}),U.about_stats.forEach((c,S)=>{D.append(`about_stats[${S}][label]`,c.label),D.append(`about_stats[${S}][value]`,c.value)});try{await X.post(t.routes.update,D,{headers:{"Content-Type":"multipart/form-data"}}),p.value="Store content updated successfully!",window.scrollTo(0,0)}catch(c){console.error(c),c.response&&c.response.data&&c.response.data.errors?n.value=Object.values(c.response.data.errors).flat().join(" "):n.value="Failed to update content.",window.scrollTo(0,0)}finally{b.value=!1}},C=async D=>{f.value=!0,await new Promise(R=>setTimeout(R,800));const c=t.config.industry||"fashion",S=t.config.store_name||"Our Store";let W={fashion:{mission:"To empower individuals to express their unique identity through timeless style.",story:`We started ${S} with a simple belief: fashion should be accessible, sustainable, and personal.`,mission_title:"Our Mission"},electronics:{mission:"Bringing the future to your doorstep with cutting-edge technology.",story:`Technology moves fast. At ${S}, we curate the best gadgets to help you stay ahead of the curve.`,mission_title:"Our Mission"},grocery:{mission:"Farm-fresh quality for healthy, happy families.",story:"We believe good food brings people together. Thatâ€™s why we source only the freshest ingredients from trusted local farmers and deliver them straight to your table.",mission_title:"Our Mission"}};const K=W[c.toLowerCase()]||W.fashion;D==="mission"?(U.about_mission_text=K.mission,U.about_mission_title||(U.about_mission_title=K.mission_title)):D==="content"&&(U.about_content=K.story),f.value=!1},z=async D=>{f.value=!0;try{const c=await X.post(t.routes.generate_policy,{type:D});c.data.content&&(U["policy_"+D]=c.data.content)}catch{alert("Failed to generate policy.")}finally{f.value=!1}};return fe(()=>{_()}),(D,c)=>(s(),o("div",null,[e("div",ug,[e("nav",cg,[e("button",{onClick:c[0]||(c[0]=S=>a.value="home"),class:F([a.value==="home"?"border-[#0A2540] text-[#0A2540]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}," Home Content ",2),e("button",{onClick:c[1]||(c[1]=S=>a.value="pages"),class:F([a.value==="pages"?"border-[#0A2540] text-[#0A2540]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}," Page Content ",2),e("button",{onClick:c[2]||(c[2]=S=>a.value="policies"),class:F([a.value==="policies"?"border-[#0A2540] text-[#0A2540]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}," Store Policies ",2)])]),p.value?(s(),o("div",pg,[c[20]||(c[20]=e("p",{class:"font-bold text-green-700"},"Success",-1)),e("p",mg,i(p.value),1)])):T("",!0),n.value?(s(),o("div",gg,[c[21]||(c[21]=e("p",{class:"font-bold text-red-700"},"Error",-1)),e("p",fg,i(n.value),1)])):T("",!0),e("form",{onSubmit:te(g,["prevent"])},[h(e("div",null,[e("div",bg,[e("div",yg,[c[27]||(c[27]=e("h3",{class:"text-lg font-medium text-gray-900 border-b pb-2 mb-4"},"Hero Section",-1)),e("div",xg,[e("div",vg,[e("div",null,[c[22]||(c[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Main Headline",-1)),h(e("input",{type:"text","onUpdate:modelValue":c[3]||(c[3]=S=>U.hero_title=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,U.hero_title]])]),e("div",null,[c[23]||(c[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Sub-Headline",-1)),h(e("textarea",{"onUpdate:modelValue":c[4]||(c[4]=S=>U.hero_subtitle=S),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,U.hero_subtitle]])]),e("div",null,[c[24]||(c[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Call to Action Text",-1)),h(e("input",{type:"text","onUpdate:modelValue":c[5]||(c[5]=S=>U.cta_text=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,U.cta_text]])])]),e("div",null,[c[26]||(c[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Hero Image",-1)),e("div",hg,[e("label",wg,[e("div",_g,[u.value?(s(),o("img",{key:0,src:u.value,class:"h-48 object-cover rounded-md mb-2"},null,8,kg)):(s(),o("div",$g,[...c[25]||(c[25]=[e("svg",{class:"w-8 h-8 mb-4 text-gray-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"text-sm text-gray-500"},"Click to upload",-1)])]))]),e("input",{type:"file",class:"hidden",accept:"image/*",onChange:c[6]||(c[6]=S=>$(S,"hero_image","previewHero"))},null,32)])])])])])]),e("div",Sg,[e("div",Cg,[c[31]||(c[31]=e("h3",{class:"text-lg font-medium text-gray-900 border-b pb-2 mb-4"},"Promotional Banners (Split Banner)",-1)),e("div",Pg,[e("div",null,[c[28]||(c[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Left Image",-1)),e("div",Tg,[x.value?(s(),o("img",{key:0,src:x.value,class:"h-32 object-cover rounded-md mx-auto mb-2"},null,8,jg)):T("",!0),e("input",{type:"file",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",accept:"image/*",onChange:c[7]||(c[7]=S=>$(S,"split_image_left","previewSplitLeft"))},null,32)])]),e("div",null,[c[29]||(c[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Right Image",-1)),e("div",Ug,[m.value?(s(),o("img",{key:0,src:m.value,class:"h-32 object-cover rounded-md mx-auto mb-2"},null,8,Ag)):T("",!0),e("input",{type:"file",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",accept:"image/*",onChange:c[8]||(c[8]=S=>$(S,"split_image_right","previewSplitRight"))},null,32)])])]),e("div",Mg,[c[30]||(c[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Center Title",-1)),h(e("input",{type:"text","onUpdate:modelValue":c[9]||(c[9]=S=>U.split_title=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,U.split_title]])])])]),e("div",Vg,[e("div",Eg,[c[36]||(c[36]=e("h3",{class:"text-lg font-medium text-gray-900 border-b pb-2 mb-4"},"Section Visibility",-1)),e("div",Og,[e("label",Ig,[h(e("input",{type:"checkbox","onUpdate:modelValue":c[10]||(c[10]=S=>U.show_new_arrivals=S),class:"sr-only peer"},null,512),[[ne,U.show_new_arrivals]]),c[32]||(c[32]=e("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1)),c[33]||(c[33]=e("span",{class:"ms-3 text-sm font-medium text-gray-900"},"Show New Arrivals",-1))]),e("label",qg,[h(e("input",{type:"checkbox","onUpdate:modelValue":c[11]||(c[11]=S=>U.show_best_sellers=S),class:"sr-only peer"},null,512),[[ne,U.show_best_sellers]]),c[34]||(c[34]=e("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1)),c[35]||(c[35]=e("span",{class:"ms-3 text-sm font-medium text-gray-900"},"Show Best Sellers",-1))])])])]),e("div",Dg,[e("div",Fg,[c[42]||(c[42]=e("h3",{class:"text-lg font-medium text-gray-900 border-b pb-2 mb-4"},"Contact Info",-1)),e("div",Bg,[e("div",null,[c[37]||(c[37]=e("label",{class:"block text-sm font-medium text-gray-700"},"Support Email",-1)),h(e("input",{type:"email","onUpdate:modelValue":c[12]||(c[12]=S=>U.contact_email=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,U.contact_email]])]),e("div",null,[c[41]||(c[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Social Media Links",-1)),e("div",Ng,[(s(!0),o(N,null,L(U.social_links,(S,W)=>(s(),o("div",{key:W,class:"flex gap-2"},[h(e("select",{"onUpdate:modelValue":K=>S.platform=K,class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-1/3"},[...c[38]||(c[38]=[ge('<option value="facebook">Facebook</option><option value="instagram">Instagram</option><option value="twitter">Twitter/X</option><option value="linkedin">LinkedIn</option><option value="tiktok">TikTok</option><option value="youtube">YouTube</option>',6)])],8,Lg),[[Y,S.platform]]),h(e("input",{type:"url","onUpdate:modelValue":K=>S.url=K,placeholder:"https://...",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm flex-1"},null,8,Rg),[[V,S.url]]),e("button",{type:"button",onClick:K=>d(W),class:"text-red-500 hover:text-red-700"},[...c[39]||(c[39]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,zg)]))),128)),e("button",{type:"button",onClick:j,class:"mt-2 text-sm text-indigo-600 hover:text-indigo-900 font-medium flex items-center"},[...c[40]||(c[40]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),B(" Add Social Link ",-1)])])])])])])])],512),[[Q,a.value==="home"]]),h(e("div",null,[e("div",Hg,[e("div",Wg,[c[54]||(c[54]=e("div",{class:"flex justify-between items-center border-b pb-2 mb-4"},[e("h3",{class:"text-lg font-medium text-gray-900"},"About Us Page"),e("span",{class:"bg-gray-100 text-gray-600 text-xs font-mono px-2 py-1 rounded"},"/about-us")],-1)),e("div",Gg,[e("div",null,[c[43]||(c[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"About Hero Image",-1)),e("div",Kg,[k.value?(s(),o("img",{key:0,src:k.value,class:"h-32 object-cover rounded-md mx-auto mb-2"},null,8,Jg)):T("",!0),e("input",{type:"file",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",accept:"image/*",onChange:c[13]||(c[13]=S=>$(S,"about_hero_image","previewAboutHero"))},null,32)])]),e("div",Qg,[e("div",null,[c[44]||(c[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Page Headline",-1)),h(e("input",{type:"text","onUpdate:modelValue":c[14]||(c[14]=S=>U.about_title=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,U.about_title]])]),e("div",null,[e("div",Xg,[c[45]||(c[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Main Story (Content)",-1)),e("button",{type:"button",onClick:c[15]||(c[15]=S=>C("content")),disabled:f.value,class:"text-xs font-bold text-white bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 px-3 py-1 rounded-full shadow-md transition transform hover:scale-105 disabled:opacity-50"},i(f.value?"Generating...":"âœ¨ AI Suggest"),9,Yg)]),h(e("textarea",{"onUpdate:modelValue":c[16]||(c[16]=S=>U.about_content=S),rows:"6",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,U.about_content]])])]),e("div",Zg,[e("div",ef,[c[46]||(c[46]=e("h4",{class:"text-md font-bold text-gray-900"},"Mission Statement",-1)),e("button",{type:"button",onClick:c[17]||(c[17]=S=>C("mission")),disabled:f.value,class:"text-xs font-bold text-white bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 px-3 py-1 rounded-full shadow-md transition transform hover:scale-105 disabled:opacity-50"},i(f.value?"Generating...":"âœ¨ AI Suggest"),9,tf)]),e("div",sf,[e("div",of,[c[47]||(c[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mission Title",-1)),h(e("input",{type:"text","onUpdate:modelValue":c[18]||(c[18]=S=>U.about_mission_title=S),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,U.about_mission_title]])]),e("div",rf,[c[48]||(c[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mission Text",-1)),h(e("textarea",{"onUpdate:modelValue":c[19]||(c[19]=S=>U.about_mission_text=S),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,U.about_mission_text]])])])]),e("div",null,[c[53]||(c[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Company Stats",-1)),e("div",nf,[(s(!0),o(N,null,L(U.about_stats,(S,W)=>(s(),o("div",{key:W,class:"flex items-center gap-3 bg-gray-50 p-3 rounded-lg border border-gray-100"},[e("div",lf,[c[49]||(c[49]=e("label",{class:"block text-xs text-gray-500 mb-1"},"Label",-1)),h(e("input",{type:"text","onUpdate:modelValue":K=>S.label=K,class:"block w-full text-sm border-gray-300 rounded-md shadow-sm"},null,8,af),[[V,S.label]])]),e("div",df,[c[50]||(c[50]=e("label",{class:"block text-xs text-gray-500 mb-1"},"Value",-1)),h(e("input",{type:"text","onUpdate:modelValue":K=>S.value=K,class:"block w-full text-sm font-bold border-gray-300 rounded-md shadow-sm"},null,8,uf),[[V,S.value]])]),e("div",cf,[e("button",{type:"button",onClick:K=>O(W),class:"text-red-400 hover:text-red-600"},[...c[51]||(c[51]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,pf)])]))),128))]),e("button",{type:"button",onClick:v,class:"mt-3 text-sm text-[#0A2540] hover:text-indigo-600 font-bold flex items-center bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg inline-block"},[...c[52]||(c[52]=[e("svg",{class:"w-4 h-4 mr-1 inline-block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),B(" Add Metric ",-1)])])])])])])],512),[[Q,a.value==="pages"]]),h(e("div",null,[e("div",mf,[(s(),o(N,null,L(["faq","shipping","returns"],S=>e("div",{key:S,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},[e("div",gf,[e("div",ff,[e("h3",bf,i(S)+" Policy",1),e("button",{type:"button",onClick:W=>z(S),disabled:f.value,class:"text-xs font-bold text-white bg-gradient-to-r from-teal-500 to-emerald-600 hover:from-teal-600 hover:to-emerald-700 px-3 py-1 rounded-full shadow-md transition transform hover:scale-105 disabled:opacity-50"},i(f.value?"Writing...":"âœ¨ AI Suggest"),9,yf)]),h(e("textarea",{"onUpdate:modelValue":W=>U["policy_"+S]=W,rows:"10",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm font-mono text-sm"},null,8,xf),[[V,U["policy_"+S]]])])])),64))])],512),[[Q,a.value==="policies"]]),e("div",vf,[e("button",{type:"submit",disabled:b.value,class:"bg-[#0A2540] hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-full shadow-xl hover:shadow-2xl transition transform hover:-translate-y-1 flex items-center"},[b.value?(s(),o("span",wf)):T("",!0),c[55]||(c[55]=B(" Save Changes ",-1))],8,hf)])],32)]))}},kf={props:{tenant:{type:Object,default:null},tenantLogoUrl:{type:String,default:null},routes:{type:Object,required:!0},oldEmail:{type:String,default:""},errors:{type:Object,default:()=>({})},status:{type:String,default:null},csrfToken:{type:String,required:!0}},data(){return{form:{email:this.oldEmail,password:"",remember:!1},showPassword:!1}},computed:{targetRoute(){return this.routes.login}}},$f={class:"font-sans antialiased bg-gray-950 text-white min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative overflow-hidden"},Sf={class:"relative z-10 sm:mx-auto sm:w-full sm:max-w-md"},Cf={class:"flex justify-center mb-6"},Pf={href:"/"},Tf={key:0,class:"bg-white/10 p-3 rounded-xl backdrop-blur-sm border border-white/10"},jf=["src","alt"],Uf={key:1,class:"bg-white/10 p-3 rounded-full backdrop-blur-sm border border-white/10"},Af={class:"text-center text-3xl font-bold tracking-tight text-white"},Mf={class:"mt-2 text-center text-sm text-gray-400"},Vf={class:"relative z-10 mt-8 sm:mx-auto sm:w-full sm:max-w-md"},Ef={class:"bg-white/5 backdrop-blur-xl border border-white/10 py-8 px-4 shadow-2xl rounded-2xl sm:px-10"},Of={key:0,class:"mb-6 rounded-lg bg-green-500/10 border border-green-500/20 p-4 text-green-400 text-sm"},If={key:1,class:"mb-6 rounded-lg bg-red-500/10 border border-red-500/20 p-4"},qf={class:"list-disc list-inside text-sm text-red-400"},Df=["action"],Ff=["value"],Bf={class:"mt-1"},Nf={class:"mt-1 relative"},Lf=["type"],Rf={key:0,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},zf={key:1,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Hf={class:"flex items-center justify-between"},Wf={class:"flex items-center"},Gf={key:0,class:"text-sm"},Kf=["href"],Jf={key:2,class:"mt-4 pt-4 border-t border-gray-700 text-center"},Qf=["href"];function Xf(l,t,a,b,f,p){return s(),o("div",$f,[t[13]||(t[13]=e("div",{class:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none"},[e("div",{class:"absolute top-[-20%] right-[-10%] w-[50%] h-[50%] bg-blue-600/10 rounded-full blur-[120px]"}),e("div",{class:"absolute bottom-[-20%] left-[-10%] w-[50%] h-[50%] bg-purple-600/10 rounded-full blur-[120px]"})],-1)),e("div",Sf,[e("div",Cf,[e("a",Pf,[a.tenant&&a.tenantLogoUrl?(s(),o("div",Tf,[e("img",{src:a.tenantLogoUrl,alt:a.tenant.name,class:"h-16 w-auto object-contain"},null,8,jf)])):(s(),o("div",Uf,[...t[4]||(t[4]=[e("svg",{class:"h-10 w-10 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)])]))])]),e("h2",Af,i(a.tenant?a.tenant.name:"Admin Portal"),1),e("p",Mf,i(a.tenant?"Sign in to your dashboard":"Secure access for platform administrators"),1)]),e("div",Vf,[e("div",Ef,[a.status?(s(),o("div",Of,i(a.status),1)):T("",!0),a.errors&&Object.keys(a.errors).length>0?(s(),o("div",If,[e("ul",qf,[(s(!0),o(N,null,L(a.errors,(n,u)=>(s(),o("li",{key:u},i(n[0]||n),1))),128))])])):T("",!0),e("form",{class:"space-y-6",action:p.targetRoute,method:"POST"},[e("input",{type:"hidden",name:"_token",value:a.csrfToken},null,8,Ff),e("div",null,[t[5]||(t[5]=e("label",{for:"email",class:"block text-sm font-medium text-gray-300"},"Email Address",-1)),e("div",Bf,[h(e("input",{id:"email",name:"email",type:"email",autocomplete:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=n=>f.form.email=n),autofocus:"",class:"appearance-none block w-full px-3 py-2 bg-gray-900/50 border-2 border-gray-700 rounded-lg shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm text-white transition-colors",placeholder:"you@example.com"},null,512),[[V,f.form.email]])])]),e("div",null,[t[8]||(t[8]=e("label",{for:"password",class:"block text-sm font-medium text-gray-300"},"Password",-1)),e("div",Nf,[h(e("input",{type:f.showPassword?"text":"password",id:"password",name:"password",required:"",autocomplete:"current-password","onUpdate:modelValue":t[1]||(t[1]=n=>f.form.password=n),class:"appearance-none block w-full px-3 py-2 bg-gray-900/50 border-2 border-gray-700 rounded-lg shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm text-white transition-colors pr-10"},null,8,Lf),[[lt,f.form.password]]),e("button",{type:"button",onClick:t[2]||(t[2]=n=>f.showPassword=!f.showPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-300 focus:outline-none"},[f.showPassword?(s(),o("svg",zf,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(s(),o("svg",Rf,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),e("div",Hf,[e("div",Wf,[h(e("input",{id:"remember_me",name:"remember",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=n=>f.form.remember=n),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-700 bg-gray-900 rounded"},null,512),[[ne,f.form.remember]]),t[9]||(t[9]=e("label",{for:"remember_me",class:"ml-2 block text-sm text-gray-400"}," Remember me ",-1))]),a.routes.passwordRequest?(s(),o("div",Gf,[e("a",{href:a.routes.passwordRequest,class:"font-medium text-blue-400 hover:text-blue-300 transition"}," Forgot password? ",8,Kf)])):T("",!0)]),t[10]||(t[10]=e("div",null,[e("button",{type:"submit",class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-lg shadow-blue-600/20 text-sm font-semibold text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all transform hover:scale-[1.02]"}," Sign In ")],-1))],8,Df),a.tenant&&a.routes.supportInfo?(s(),o("div",Jf,[t[11]||(t[11]=e("p",{class:"text-sm text-gray-400"},"Cannot login?",-1)),e("a",{href:a.routes.supportInfo,class:"mt-1 inline-block text-sm font-medium text-blue-400 hover:text-blue-300 transition"}," Submit a Ticket ",8,Qf)])):T("",!0)]),t[12]||(t[12]=e("div",{class:"mt-6 text-center"},[e("a",{href:"/",class:"text-xs text-gray-500 hover:text-gray-300 transition flex items-center justify-center gap-1"},[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})]),B(" Back to Landing Page ")])],-1))])])}const Yf=xe(kf,[["render",Xf]]),Zf={class:"max-w-4xl mx-auto py-6"},eb={class:"mb-6 flex justify-between items-center"},tb=["href"],sb={key:0,class:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 relative"},ob={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 relative"},rb={key:0,class:"list-disc pl-5"},nb={key:1},lb={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6"},ib={class:"p-6"},ab={class:"flex items-center space-x-2"},db={class:"bg-gray-100 px-4 py-2 rounded text-indigo-600 font-mono text-lg block w-full border border-gray-200"},ub=["href"],cb={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},pb={class:"p-6"},mb={class:"flex justify-between items-start"},gb={class:"mt-2 flex items-center space-x-2"},fb={key:0,class:"text-sm text-gray-500"},bb={key:0},yb=["disabled"],xb={key:0,class:"mt-6 border-t border-yellow-200 pt-4"},vb={class:"bg-white p-3 rounded border border-yellow-200 text-sm"},hb={class:"grid grid-cols-3 gap-4 font-mono text-gray-800"},wb={key:1},_b={class:"mb-6"},kb={class:"relative rounded-md shadow-sm"},$b={class:"bg-blue-50 border border-blue-100 rounded-lg p-4 mb-6"},Sb={class:"text-sm text-blue-800"},Cb={class:"bg-blue-100 px-1 py-0.5 rounded font-mono"},Pb=["disabled"],Tb={__name:"DomainSettings",props:{initialData:{type:Object,required:!0},routes:{type:Object,required:!0}},setup(l){const t=l,a=P(t.initialData.currentRequest),b=P(""),f=P(!1),p=P(""),n=P(""),u=async()=>{f.value=!0,n.value="",p.value="";try{const m=await X.post(t.routes.domainRequest,{domain:b.value});m.data.success&&(a.value={id:m.data.request.id,domain:m.data.request.domain,status:m.data.request.status,created_at:"Just now"},p.value=m.data.message,b.value="")}catch(m){m.response&&m.response.data&&m.response.data.errors?n.value=m.response.data.errors:m.response&&m.response.data&&m.response.data.message?n.value=m.response.data.message:n.value="Failed to submit domain request."}finally{f.value=!1}},x=async()=>{if(confirm("Are you sure you want to cancel this request?")){f.value=!0,n.value="",p.value="";try{const m=t.routes.domainCancel.replace(":id",a.value.id),k=await X.delete(m);k.data.success&&(a.value=null,p.value=k.data.message)}catch(m){m.response&&m.response.data&&m.response.data.message?n.value=m.response.data.message:n.value="Failed to cancel request."}finally{f.value=!1}}};return(m,k)=>(s(),o("div",Zf,[e("div",eb,[k[3]||(k[3]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-800"},"Domain Settings"),e("p",{class:"text-gray-600"},"Manage your store's web address and custom domains.")],-1)),e("a",{href:l.routes.settingsIndex,class:"text-indigo-600 hover:text-indigo-800 font-medium"},"â† Back to Settings",8,tb)]),p.value?(s(),o("div",sb,[e("p",null,i(p.value),1),e("button",{onClick:k[0]||(k[0]=U=>p.value=""),class:"absolute top-2 right-2 text-green-500 hover:text-green-700"},"Ã—")])):T("",!0),n.value?(s(),o("div",ob,[typeof n.value=="object"?(s(),o("ul",rb,[(s(!0),o(N,null,L(n.value,(U,_)=>(s(),o("li",{key:_},i(U),1))),128))])):(s(),o("span",nb,i(n.value),1)),e("button",{onClick:k[1]||(k[1]=U=>n.value=""),class:"absolute top-2 right-2 text-red-500 hover:text-red-700"},"Ã—")])):T("",!0),e("div",lb,[k[6]||(k[6]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Default Store Address"),e("span",{class:"px-3 py-1 text-xs font-semibold bg-green-100 text-green-800 rounded-full"},"Active")],-1)),e("div",ib,[k[5]||(k[5]=e("p",{class:"text-gray-600 mb-2"},"Your store is accessible at:",-1)),e("div",ab,[e("code",db,i(l.initialData.storeUrl),1),e("a",{href:l.initialData.storeUrl,target:"_blank",class:"p-2 text-gray-500 hover:text-indigo-600 transition"},[...k[4]||(k[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,ub)])])]),e("div",cb,[k[20]||(k[20]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Custom Domain"),e("p",{class:"text-sm text-gray-500"},"Connect your own domain name (e.g. myshop.com)")],-1)),e("div",pb,[a.value?(s(),o("div",{key:0,class:F(["border rounded-xl p-6",a.value.status==="approved"?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"])},[e("div",mb,[e("div",null,[e("h4",{class:F(["font-bold text-lg",a.value.status==="approved"?"text-green-800":"text-yellow-800"])},i(a.value.domain),3),e("div",gb,[e("span",{class:F(["capitalize px-3 py-1 rounded-full text-xs font-bold",a.value.status==="approved"?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800"])},i(a.value.status),3),a.value.status==="pending"?(s(),o("span",fb,"Submitted on "+i(a.value.created_at),1)):T("",!0)])]),a.value.status==="pending"?(s(),o("div",bb,[e("button",{onClick:x,disabled:f.value,class:"text-red-600 hover:text-red-800 font-medium text-sm underline bg-transparent border-none cursor-pointer"},i(f.value?"Cancelling...":"Cancel Request"),9,yb)])):T("",!0)]),a.value.status==="pending"?(s(),o("div",xb,[k[10]||(k[10]=e("h5",{class:"font-bold text-yellow-900 text-sm mb-2"},"DNS Configuration Required",-1)),k[11]||(k[11]=e("p",{class:"text-yellow-800 text-sm mb-3"},"To verify ownership, please configure the following DNS record at your domain provider:",-1)),e("div",vb,[k[9]||(k[9]=e("div",{class:"grid grid-cols-3 gap-4 mb-2"},[e("span",{class:"font-semibold text-gray-600"},"Type"),e("span",{class:"font-semibold text-gray-600"},"Name"),e("span",{class:"font-semibold text-gray-600"},"Value / Target")],-1)),e("div",hb,[k[7]||(k[7]=e("span",null,"CNAME",-1)),k[8]||(k[8]=e("span",null,"@ (or www)",-1)),e("span",null,i(l.initialData.appHost),1)])]),k[12]||(k[12]=e("p",{class:"text-xs text-yellow-700 mt-2"},"Note: DNS propagation may take up to 24 hours.",-1))])):T("",!0)],2)):(s(),o("div",wb,[e("form",{onSubmit:te(u,["prevent"])},[e("div",_b,[k[13]||(k[13]=e("label",{for:"domain",class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Domain Name",-1)),e("div",kb,[h(e("input",{"onUpdate:modelValue":k[2]||(k[2]=U=>b.value=U),type:"text",id:"domain",class:"block w-full rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-indigo-500 py-3 pl-4 pr-12 sm:text-sm",placeholder:"e.g. myshop.com"},null,512),[[V,b.value]])]),k[14]||(k[14]=e("p",{class:"mt-2 text-sm text-gray-500"},"Enter your domain name without https:// or www.",-1))]),e("div",$b,[k[19]||(k[19]=e("h4",{class:"text-sm font-bold text-blue-900 mb-1"},"Before you connect:",-1)),e("p",Sb,[k[15]||(k[15]=B(" Make sure you have purchased the domain. You will need to add a ",-1)),k[16]||(k[16]=e("strong",null,"CNAME Record",-1)),k[17]||(k[17]=B(" pointing to ",-1)),e("code",Cb,i(l.initialData.appHost),1),k[18]||(k[18]=B(" in your domain's DNS settings. ",-1))])]),e("button",{type:"submit",disabled:f.value||!b.value,class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl shadow-md transition transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed"},i(f.value?"Submitting...":"Connect Domain"),9,Pb)],32)]))])])]))}},jb={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},Ub={class:"bg-white rounded-lg shadow p-6"},Ab={class:"flex items-center justify-between"},Mb={class:"text-3xl font-bold text-green-600 mt-2"},Vb={class:"bg-white rounded-lg shadow p-6"},Eb={class:"flex items-center justify-between"},Ob={class:"text-3xl font-bold text-blue-600 mt-2"},Ib={class:"bg-white rounded-lg shadow p-6"},qb={class:"flex items-center justify-between"},Db={class:"text-3xl font-bold text-red-600 mt-2"},Fb={class:"bg-white rounded-lg shadow p-6 mb-6"},Bb={class:"overflow-x-auto"},Nb={class:"min-w-full divide-y divide-gray-200"},Lb={class:"bg-white divide-y divide-gray-200"},Rb={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},zb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right"},Hb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right"},Wb={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600 text-right"},Gb={key:0},Kb={class:"bg-white rounded-lg shadow overflow-hidden mb-6"},Jb={class:"overflow-x-auto"},Qb={class:"min-w-full divide-y divide-gray-200"},Xb={class:"bg-white divide-y divide-gray-200"},Yb={class:"px-6 py-4"},Zb={class:"text-sm font-medium text-gray-900"},ey={class:"text-xs text-gray-500"},ty={class:"px-6 py-4 text-right text-sm text-gray-500"},sy={class:"px-6 py-4 text-right text-sm text-green-600"},oy={class:"px-6 py-4 text-right text-sm text-red-600"},ry={class:"px-6 py-4 text-right text-sm text-blue-600"},ny={class:"px-6 py-4 text-right text-sm font-bold text-gray-900"},ly={key:0},iy=["innerHTML"],ay={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},dy={class:"bg-white rounded-lg shadow overflow-hidden"},uy={class:"overflow-x-auto max-h-96"},cy={class:"min-w-full divide-y divide-gray-200"},py={class:"bg-white divide-y divide-gray-200"},my={class:"px-4 py-3 text-sm text-gray-900"},gy={class:"font-medium"},fy={class:"text-xs text-gray-500"},by={class:"px-4 py-3 text-sm text-right"},yy={class:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},xy={class:"px-4 py-3 text-sm text-gray-500 text-right"},vy={key:0},hy={class:"bg-white rounded-lg shadow overflow-hidden"},wy={class:"overflow-x-auto max-h-96"},_y={class:"min-w-full divide-y divide-gray-200"},ky={class:"bg-white divide-y divide-gray-200"},$y={class:"px-4 py-3 text-sm text-gray-900"},Sy={class:"font-medium"},Cy={class:"text-xs text-gray-500"},Py={class:"px-4 py-3 text-sm font-bold text-blue-600 text-right"},Ty={key:0},jy={class:"bg-white rounded-lg shadow overflow-hidden"},Uy={class:"overflow-x-auto"},Ay={class:"min-w-full divide-y divide-gray-200"},My={class:"bg-white divide-y divide-gray-200"},Vy={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ey={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},Oy={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Iy={class:"px-6 py-4 whitespace-nowrap"},qy={key:0},Dy={__name:"InventoryReport",props:{totalInventoryValue:{type:Number,default:0},totalInventoryUnits:{type:Number,default:0},lowStock:{type:Array,default:()=>[]},stockByWarehouse:{type:Array,default:()=>[]},inventoryReportData:{type:Array,default:()=>[]},fastMoving:{type:Array,default:()=>[]},stockMovements:{type:Array,default:()=>[]},currencySymbol:{type:String,default:"â‚¦"},paginationHtml:{type:String,default:""}},setup(l){const t=l,a=se({loading:!1,totalInventoryValue:t.totalInventoryValue,totalInventoryUnits:t.totalInventoryUnits,lowStock:t.lowStock,stockByWarehouse:t.stockByWarehouse,inventoryReportData:t.inventoryReportData,fastMoving:t.fastMoving,stockMovements:t.stockMovements});let b=null;const f=async()=>{if(!a.loading)try{const u=new URL(window.location.href),x=await fetch(u.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!x.ok)throw new Error("Network response was not ok");const m=await x.json();a.totalInventoryValue=m.totalInventoryValue,a.totalInventoryUnits=m.totalInventoryUnits,a.lowStock=m.lowStock,a.stockByWarehouse=m.stockByWarehouse,m.inventoryReport&&m.inventoryReport.data&&(a.inventoryReportData=m.inventoryReport.data),a.fastMoving=m.fastMoving,a.stockMovements=m.stockMovements}catch(u){console.error("Failed to fetch real-time data:",u)}finally{a.loading=!1}},p=(u,x=0)=>Number(u).toLocaleString("en-US",{minimumFractionDigits:x,maximumFractionDigits:x}),n=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"});return fe(()=>{b=setInterval(f,45e3)}),_e(()=>{b&&clearInterval(b)}),(u,x)=>(s(),o("div",null,[e("div",jb,[e("div",Ub,[e("div",Ab,[e("div",null,[x[0]||(x[0]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Inventory Value",-1)),e("p",Mb,[e("span",null,i(l.currencySymbol),1),e("span",null,i(p(a.totalInventoryValue,2)),1)])]),x[1]||(x[1]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1))])]),e("div",Vb,[e("div",Eb,[e("div",null,[x[2]||(x[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Units in Stock",-1)),e("p",Ob,i(p(a.totalInventoryUnits)),1)]),x[3]||(x[3]=e("div",{class:"p-3 bg-blue-100 rounded-lg"},[e("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})])],-1))])]),e("div",Ib,[e("div",qb,[e("div",null,[x[4]||(x[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Low Stock Items",-1)),e("p",Db,i(a.lowStock.length),1)]),x[5]||(x[5]=e("div",{class:"p-3 bg-red-100 rounded-lg"},[e("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1))])])]),e("div",Fb,[x[8]||(x[8]=e("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Stock Distribution by Warehouse",-1)),e("div",Bb,[e("table",Nb,[x[7]||(x[7]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Warehouse"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Products"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Units"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Value")])],-1)),e("tbody",Lb,[(s(!0),o(N,null,L(a.stockByWarehouse,m=>(s(),o("tr",{key:m.warehouse,class:"hover:bg-gray-50"},[e("td",Rb,i(m.warehouse),1),e("td",zb,i(p(m.product_count)),1),e("td",Hb,i(p(m.total_units)),1),e("td",Wb,[e("span",null,i(l.currencySymbol),1),e("span",null,i(p(m.total_value,2)),1)])]))),128)),a.stockByWarehouse.length===0?(s(),o("tr",Gb,[...x[6]||(x[6]=[e("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500"},"No warehouse data available",-1)])])):T("",!0)])])])]),e("div",Kb,[x[11]||(x[11]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-bold text-gray-800"},"Inventory Activity Report")],-1)),e("div",Jb,[e("table",Qb,[x[10]||(x[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Product"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Opening"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Purchased"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sold"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Adj/Trans/Ret"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Closing")])],-1)),e("tbody",Xb,[(s(!0),o(N,null,L(a.inventoryReportData,m=>(s(),o("tr",{key:m.id,class:"hover:bg-gray-50"},[e("td",Yb,[e("div",Zb,i(m.name),1),e("div",ey,i(m.sku),1)]),e("td",ty,i(p(m.opening_stock)),1),e("td",sy,i("+"+p(m.purchased_qty)),1),e("td",oy,i("-"+p(m.sold_qty)),1),e("td",ry,i((m.adjustment_qty+m.transfer_qty+m.return_qty>=0?"+":"")+p(m.adjustment_qty+m.transfer_qty+m.return_qty)),1),e("td",ny,i(p(m.closing_stock)),1)]))),128)),a.inventoryReportData.length===0?(s(),o("tr",ly,[...x[9]||(x[9]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"},"No data found",-1)])])):T("",!0)])]),!a.loading&&l.paginationHtml?(s(),o("div",{key:0,class:"px-6 py-4 border-t border-gray-200",innerHTML:l.paginationHtml},null,8,iy)):T("",!0)])]),e("div",ay,[e("div",dy,[x[14]||(x[14]=e("div",{class:"px-6 py-4 bg-red-50 border-b border-red-200"},[e("h3",{class:"text-lg font-bold text-red-800"},"âš ï¸ Low Stock Alert")],-1)),e("div",uy,[e("table",cy,[x[13]||(x[13]=e("thead",{class:"bg-gray-50 sticky top-0"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Product"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Stock"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Threshold")])],-1)),e("tbody",py,[(s(!0),o(N,null,L(a.lowStock,m=>(s(),o("tr",{key:m.id,class:"hover:bg-gray-50"},[e("td",my,[e("div",gy,i(m.name),1),e("div",fy,i(m.sku),1)]),e("td",by,[e("span",yy,i(m.stock_quantity),1)]),e("td",xy,i(m.low_stock_threshold),1)]))),128)),a.lowStock.length===0?(s(),o("tr",vy,[...x[12]||(x[12]=[e("td",{colspan:"3",class:"px-4 py-8 text-center text-green-600"},[e("i",{class:"fas fa-check-circle text-2xl mb-2"}),e("div",null,"All products are well stocked!")],-1)])])):T("",!0)])])])]),e("div",hy,[x[17]||(x[17]=e("div",{class:"px-6 py-4 bg-blue-50 border-b border-blue-200"},[e("h3",{class:"text-lg font-bold text-blue-800"},"ðŸš€ Fast Moving Products")],-1)),e("div",wy,[e("table",_y,[x[16]||(x[16]=e("thead",{class:"bg-gray-50 sticky top-0"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Product"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Sold Qty")])],-1)),e("tbody",ky,[(s(!0),o(N,null,L(a.fastMoving,m=>(s(),o("tr",{key:m.sku,class:"hover:bg-gray-50"},[e("td",$y,[e("div",Sy,i(m.name),1),e("div",Cy,i(m.sku),1)]),e("td",Py,i(p(m.sold_qty)),1)]))),128)),a.fastMoving.length===0?(s(),o("tr",Ty,[...x[15]||(x[15]=[e("td",{colspan:"2",class:"px-4 py-8 text-center text-gray-500"},[e("div",null,"No sales data found!")],-1)])])):T("",!0)])])])])]),e("div",jy,[x[20]||(x[20]=e("div",{class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},[e("h3",{class:"text-lg font-bold text-gray-800"},"Recent Movements"),e("a",{href:"/admin/reports/movement",class:"text-indigo-600 hover:text-indigo-900 text-sm font-medium"},"View All Dashboard â†’")],-1)),e("div",Uy,[e("table",Ay,[x[19]||(x[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Product"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Warehouse"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quantity")])],-1)),e("tbody",My,[(s(!0),o(N,null,L(a.stockMovements,m=>(s(),o("tr",{key:m.id,class:"hover:bg-gray-50"},[e("td",Vy,i(n(m.created_at)),1),e("td",Ey,i(m.product?m.product.name:"Deleted"),1),e("td",Oy,i(m.warehouse?m.warehouse.name:"-"),1),e("td",Iy,[e("span",{class:F(["px-2 py-1 text-xs font-semibold rounded-full capitalize",{"bg-green-100 text-green-800":m.type==="purchase","bg-blue-100 text-blue-800":m.type==="sale","bg-yellow-100 text-yellow-800":m.type==="adjustment","bg-gray-100 text-gray-800":!["purchase","sale","adjustment"].includes(m.type)}])},i(m.type),3)]),e("td",{class:F(["px-6 py-4 whitespace-nowrap text-sm font-bold text-right",m.quantity>0?"text-green-600":"text-red-600"])},i((m.quantity>0?"+":"")+m.quantity),3)]))),128)),a.stockMovements.length===0?(s(),o("tr",qy,[...x[18]||(x[18]=[e("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-500"},"No stock movements found",-1)])])):T("",!0)])])])])]))}},Fy={name:"PwaInstallPrompt",data(){return{showModal:!1,deferredPrompt:null}},mounted(){window.addEventListener("beforeinstallprompt",l=>{l.preventDefault(),this.deferredPrompt=l,this.showModal=!0,console.log("PWA install prompt captured")}),window.addEventListener("appinstalled",()=>{this.showModal=!1,this.deferredPrompt=null,console.log("PWA was installed")})},methods:{async installPwa(){if(!this.deferredPrompt)return;this.deferredPrompt.prompt();const{outcome:l}=await this.deferredPrompt.userChoice;console.log(`User response to the install prompt: ${l}`),this.deferredPrompt=null,this.showModal=!1},dismiss(){this.showModal=!1}}},By={key:0,class:"fixed inset-0 z-[100] p-4 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity"},Ny={class:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-sm pointer-events-auto border border-gray-100 transform transition-all scale-100"},Ly={class:"flex items-start justify-between"},Ry={class:"mt-6 flex gap-3"};function zy(l,t,a,b,f,p){return s(),Te(ye,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:ee(()=>[f.showModal?(s(),o("div",By,[e("div",Ny,[e("div",Ly,[t[4]||(t[4]=e("div",{class:"flex-1"},[e("h3",{class:"text-xl font-black text-gray-900 mb-2"},"Install App"),e("p",{class:"text-gray-600 text-sm leading-relaxed"}," Install our app for a better experience, faster access, and offline capabilities. ")],-1)),e("button",{onClick:t[0]||(t[0]=(...n)=>p.dismiss&&p.dismiss(...n)),class:"text-gray-400 hover:text-gray-500 p-1"},[...t[3]||(t[3]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ry,[e("button",{onClick:t[1]||(t[1]=(...n)=>p.dismiss&&p.dismiss(...n)),class:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-xl transition-colors"}," Maybe Later "),e("button",{onClick:t[2]||(t[2]=(...n)=>p.installPwa&&p.installPwa(...n)),class:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all transform hover:-translate-y-0.5"}," Install Now ")])])])):T("",!0)]),_:1})}const Hy=xe(Fy,[["render",zy]]),Wy="modulepreload",Gy=function(l){return"/build/"+l},Be={},Ne=function(t,a,b){let f=Promise.resolve();if(a&&a.length>0){let x=function(m){return Promise.all(m.map(k=>Promise.resolve(k).then(U=>({status:"fulfilled",value:U}),U=>({status:"rejected",reason:U}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),u=n?.nonce||n?.getAttribute("nonce");f=x(a.map(m=>{if(m=Gy(m),m in Be)return;Be[m]=!0;const k=m.endsWith(".css"),U=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${U}`))return;const _=document.createElement("link");if(_.rel=k?"stylesheet":Wy,k||(_.as="script"),_.crossOrigin="",_.href=m,u&&_.setAttribute("nonce",u),document.head.appendChild(_),k)return new Promise((M,$)=>{_.addEventListener("load",M),_.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${m}`)))})}))}function p(n){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=n,window.dispatchEvent(u),!u.defaultPrevented)throw n}return f.then(n=>{for(const u of n||[])u.status==="rejected"&&p(u.reason);return t().catch(p)})},Ky={class:"flex h-full bg-gray-100 overflow-hidden"},Jy={class:"w-80 bg-white border-r flex flex-col shadow-lg z-10"},Qy={class:"h-14 border-b flex items-center px-4 justify-between bg-gray-50"},Xy=["disabled"],Yy={key:0},Zy={key:1},ex={class:"flex border-b"},tx={class:"flex-1 overflow-y-auto p-4"},sx={class:"flex items-center"},ox={class:"w-8 h-8 rounded bg-gray-100 flex items-center justify-center text-gray-500 mr-3 group-hover:bg-indigo-100 group-hover:text-indigo-600"},rx={class:"block font-medium text-sm text-gray-700"},nx={class:"block text-xs text-gray-400"},lx={class:"flex-1 overflow-y-auto p-4"},ix={key:0},ax={class:"flex items-center justify-between mb-4"},dx={class:"font-bold text-gray-800 text-sm"},ux={class:"space-y-4"},cx={key:0},px={class:"flex items-center gap-2"},mx={class:"flex items-center gap-2"},gx={key:1},fx={key:1,class:"h-full flex flex-col items-center justify-center text-gray-400 text-center"},bx={class:"flex-1 flex flex-col min-w-0 bg-gray-100 h-full overflow-hidden"},yx={class:"flex-1 overflow-y-auto p-8 flex justify-center custom-scrollbar"},xx={class:"w-full max-w-5xl bg-white shadow-2xl min-h-[800px] flex flex-col transition-all duration-300"},vx=["onClick"],hx={class:"absolute top-0 right-0 p-2 opacity-0 group-hover:opacity-100 transition-opacity z-20 flex space-x-1"},wx=["onClick"],_x={key:0,class:"flex-1 flex flex-col items-center justify-center text-gray-400 p-12 border-2 border-dashed border-gray-200 m-8 rounded-lg bg-gray-50"},kx={__name:"VisualEditor",props:{initialLayout:{type:Array,default:()=>[]},saveUrl:{type:String,required:!0}},setup(l){const t=De(()=>Ne(()=>import("./SectionHero-B5ysFe18.js"),__vite__mapDeps([0,1]))),a=De(()=>Ne(()=>import("./SectionProductList-DY7BGvgS.js"),__vite__mapDeps([2,1]))),b=l,f=P("sections"),p=P(b.initialLayout),n=P(null),u=P(!1),x=P([{type:"hero_banner",label:"Hero Banner",description:"Large banner with title and background.",icon:"fa-regular fa-image",defaultProps:{title:"Welcome",subtitle:"Subtitle Text",bg_color:"#1a1a1a",text_color:"#ffffff"}},{type:"product_grid",label:"Product Grid",description:"Grid of your latest products.",icon:"fa-solid fa-grid",defaultProps:{title:"New Arrivals",limit:4}}]),m=j=>{switch(j){case"hero_banner":return t;case"product_grid":return a;default:return"div"}},k=j=>{const d=x.value.find(v=>v.type===j);return d?d.label:j},U=j=>({id:"section-"+Date.now()+Math.random().toString(36).substr(2,9),type:j.type,props:JSON.parse(JSON.stringify(j.defaultProps))}),_=j=>{n.value=j,f.value="edit"},M=j=>{p.value=p.value.filter(d=>d.id!==j),n.value&&n.value.id===j&&(n.value=null,f.value="sections")},$=async()=>{u.value=!0;try{await X.post(b.saveUrl,{theme_layout:p.value}),alert("Layout saved successfully!")}catch(j){console.error("Failed to save layout:",j),alert("Failed to save layout.")}finally{u.value=!1}};return(j,d)=>(s(),o("div",Ky,[e("div",Jy,[e("div",Qy,[d[13]||(d[13]=e("h2",{class:"font-bold text-gray-700"},"Theme Editor",-1)),e("button",{onClick:$,disabled:u.value,class:"px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700 disabled:opacity-50 transition-colors"},[u.value?(s(),o("span",Yy,"Saving...")):(s(),o("span",Zy,"Save"))],8,Xy)]),e("div",ex,[e("button",{onClick:d[0]||(d[0]=v=>f.value="sections"),class:F(["flex-1 py-3 text-sm font-medium transition-colors",f.value==="sections"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-500 hover:bg-gray-50"])}," Add Sections ",2),e("button",{onClick:d[1]||(d[1]=v=>f.value="edit"),class:F(["flex-1 py-3 text-sm font-medium transition-colors",f.value==="edit"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-500 hover:bg-gray-50"])}," Edit Properties ",2)]),h(e("div",tx,[d[14]||(d[14]=e("p",{class:"text-xs text-gray-400 uppercase font-bold mb-3 tracking-wider"},"Available Blocks",-1)),Z(ce(qe),{modelValue:x.value,"onUpdate:modelValue":d[2]||(d[2]=v=>x.value=v),group:{name:"sections",pull:"clone",put:!1},sort:!1,clone:U,class:"space-y-3"},{default:ee(()=>[(s(!0),o(N,null,L(x.value,v=>(s(),o("div",{key:v.type,class:"p-3 bg-white border border-gray-200 rounded-lg shadow-sm cursor-move hover:border-indigo-300 hover:ring-1 hover:ring-indigo-300 transition-all group"},[e("div",sx,[e("div",ox,[e("i",{class:F(v.icon)},null,2)]),e("div",null,[e("span",rx,i(v.label),1),e("span",nx,i(v.description),1)])])]))),128))]),_:1},8,["modelValue"])],512),[[Q,f.value==="sections"]]),h(e("div",lx,[n.value?(s(),o("div",ix,[e("div",ax,[e("h3",dx,i(k(n.value.type))+" Settings",1),e("button",{onClick:d[3]||(d[3]=v=>M(n.value.id)),class:"text-red-500 hover:text-red-700 text-xs hover:underline"}," Delete ")]),e("div",ux,[n.value.type==="hero_banner"?(s(),o("div",cx,[e("div",null,[d[15]||(d[15]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Title",-1)),h(e("input",{"onUpdate:modelValue":d[4]||(d[4]=v=>n.value.props.title=v),type:"text",class:"w-full text-sm border-gray-300 rounded focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[V,n.value.props.title]])]),e("div",null,[d[16]||(d[16]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Subtitle",-1)),h(e("input",{"onUpdate:modelValue":d[5]||(d[5]=v=>n.value.props.subtitle=v),type:"text",class:"w-full text-sm border-gray-300 rounded focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[V,n.value.props.subtitle]])]),e("div",null,[d[17]||(d[17]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Background Color",-1)),e("div",px,[h(e("input",{"onUpdate:modelValue":d[6]||(d[6]=v=>n.value.props.bg_color=v),type:"color",class:"h-8 w-12 border cursor-pointer rounded"},null,512),[[V,n.value.props.bg_color]]),h(e("input",{"onUpdate:modelValue":d[7]||(d[7]=v=>n.value.props.bg_color=v),type:"text",class:"flex-1 text-sm border-gray-300 rounded uppercase"},null,512),[[V,n.value.props.bg_color]])])]),e("div",null,[d[18]||(d[18]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Text Color",-1)),e("div",mx,[h(e("input",{"onUpdate:modelValue":d[8]||(d[8]=v=>n.value.props.text_color=v),type:"color",class:"h-8 w-12 border cursor-pointer rounded"},null,512),[[V,n.value.props.text_color]]),h(e("input",{"onUpdate:modelValue":d[9]||(d[9]=v=>n.value.props.text_color=v),type:"text",class:"flex-1 text-sm border-gray-300 rounded uppercase"},null,512),[[V,n.value.props.text_color]])])])])):T("",!0),n.value.type==="product_grid"?(s(),o("div",gx,[e("div",null,[d[19]||(d[19]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Title",-1)),h(e("input",{"onUpdate:modelValue":d[10]||(d[10]=v=>n.value.props.title=v),type:"text",class:"w-full text-sm border-gray-300 rounded focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[V,n.value.props.title]])]),e("div",null,[d[20]||(d[20]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Product Limit",-1)),h(e("input",{"onUpdate:modelValue":d[11]||(d[11]=v=>n.value.props.limit=v),type:"number",min:"2",max:"12",class:"w-full text-sm border-gray-300 rounded focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[V,n.value.props.limit]])])])):T("",!0),d[21]||(d[21]=e("div",{class:"mt-6 pt-6 border-t"},[e("p",{class:"text-xs text-gray-400 text-center"},"Changes are applied immediately to the preview.")],-1))])])):(s(),o("div",fx,[...d[22]||(d[22]=[e("svg",{class:"w-12 h-12 mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),e("p",{class:"text-sm"},"Select a section in the preview to edit properties.",-1)])]))],512),[[Q,f.value==="edit"]])]),e("div",bx,[d[26]||(d[26]=e("div",{class:"h-10 bg-white border-b flex items-center justify-center text-xs text-gray-500 shadow-sm z-10"}," Preview Mode â€¢ Desktop ",-1)),e("div",yx,[e("div",xx,[Z(ce(qe),{modelValue:p.value,"onUpdate:modelValue":d[12]||(d[12]=v=>p.value=v),group:"sections",handle:".drag-handle",class:"flex-1 min-h-[200px]","item-key":"id"},{item:ee(({element:v})=>[e("div",{class:F(["relative group border-2 transition-all duration-200",n.value?.id===v.id?"border-indigo-500 z-10":"border-transparent hover:border-indigo-300"]),onClick:te(O=>_(v),["stop"])},[e("div",hx,[d[24]||(d[24]=e("button",{class:"drag-handle p-1.5 bg-indigo-600 text-white rounded cursor-move shadow-sm hover:bg-indigo-700",title:"Drag to reorder"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})])],-1)),e("button",{onClick:te(O=>M(v.id),["stop"]),class:"p-1.5 bg-red-600 text-white rounded shadow-sm hover:bg-red-700",title:"Remove section"},[...d[23]||(d[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,wx)]),(s(),Te(it(m(v.type)),{props:v.props},null,8,["props"]))],10,vx)]),_:1},8,["modelValue"]),p.value.length===0?(s(),o("div",_x,[...d[25]||(d[25]=[e("p",null,"Drag sections here from the sidebar",-1)])])):T("",!0)])])])]))}},$x=xe(kx,[["__scopeId","data-v-70efe692"]]);function Sx(l,t,a){if(!l||typeof l!="object")return l;const b=JSON.parse(JSON.stringify(l)),f=t.replace(/\[(\d+)\]/g,".$1").split(".");let p=b;for(let n=0;n<f.length;n++){const u=f[n];n===f.length-1?p[u]=a:(p[u]||(p[u]=isNaN(f[n+1])?{}:[]),p=p[u])}return b}const Cx={isEditMode:!1,liveConfig:{},draftConfig:{},init(){window.themeConfig&&(this.liveConfig=JSON.parse(JSON.stringify(window.themeConfig)),this.draftConfig=JSON.parse(JSON.stringify(window.themeConfig))),document.addEventListener("keydown",l=>{(l.ctrlKey||l.metaKey)&&l.key==="e"&&(l.preventDefault(),this.toggleEditMode())})},toggleEditMode(){this.isEditMode=!this.isEditMode,console.log("Edit Mode:",this.isEditMode?"ON":"OFF")},updateField(l,t){console.log(`[CMS] Updating ${l} to:`,t),this.draftConfig=Sx(this.draftConfig,l,t),window.dispatchEvent(new CustomEvent("cms-update",{detail:{path:l,value:t}}))},saveChanges(){console.log("Saving config:",this.draftConfig),alert("Configuration saved! (Mock)"),this.liveConfig=JSON.parse(JSON.stringify(this.draftConfig))},resetChanges(){confirm("Discard unsaved changes?")&&(this.draftConfig=JSON.parse(JSON.stringify(this.liveConfig)))},get hasUnsavedChanges(){return JSON.stringify(this.liveConfig)!==JSON.stringify(this.draftConfig)}},Px=(l,t="text")=>({path:l,type:t,isEditing:!1,originalContent:"",init(){this.originalContent=this.$el.innerText.trim()},get isEditMode(){return Alpine.store("editor").isEditMode},get content(){return this.$el.innerText},startEditing(){this.isEditMode&&(this.isEditing=!0,this.$nextTick(()=>{this.$refs.input&&this.$refs.input.focus()}))},save(){const a=this.$refs.input.value;this.isEditing=!1,Alpine.store("editor").updateField(this.path,a)},cancel(){this.isEditing=!1}}),Tx={class:"bg-white rounded-lg shadow p-8"},jx={key:0,class:"mb-6 p-4 bg-green-50 rounded-md"},Ux={class:"flex"},Ax={class:"ml-3"},Mx={class:"text-sm font-medium text-green-800"},Vx={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ex={class:"md:col-span-2"},Ox=["value"],Ix={key:0,class:"text-red-500 text-xs mt-1"},qx=["disabled"],Dx=["value"],Fx={key:0,class:"mt-1"},Bx={class:"font-bold"},Nx={key:1,class:"text-red-500 text-xs mt-1"},Lx=["value","disabled"],Rx={key:0,class:"text-red-500 text-xs mt-1"},zx=["max"],Hx={key:0,class:"text-xs text-gray-500 mt-1"},Wx={key:1,class:"text-red-500 text-xs mt-1"},Gx={class:"md:col-span-2"},Kx={key:0,class:"text-red-500 text-xs mt-1"},Jx={class:"mt-8 flex justify-end space-x-4"},Qx=["disabled"],Xx={key:0},Yx={key:1},Zx={__name:"StockTransferForm",props:{initialProducts:{type:Array,required:!0},initialWarehouses:{type:Array,required:!0},tenantSlug:{type:String,required:!0}},setup(l){const t=l,a=P(t.initialProducts),b=P(t.initialWarehouses),f=P(!1),p=P(""),n=se({}),u=se({product_id:"",from_warehouse_id:"",to_warehouse_id:"",quantity:"",notes:""}),x=re(()=>{if(!u.product_id||!u.from_warehouse_id)return null;const _=a.value.find($=>$.id==u.product_id);if(!_||!_.warehouses)return 0;const M=_.warehouses.find($=>$.id==u.from_warehouse_id);return M&&M.pivot?Number(M.pivot.quantity):0}),m=re(()=>u.product_id&&u.from_warehouse_id&&u.to_warehouse_id&&u.from_warehouse_id!==u.to_warehouse_id&&u.quantity>0&&x.value!==null&&u.quantity<=x.value),k=()=>{u.from_warehouse_id="",u.to_warehouse_id="",u.quantity="",delete n.from_warehouse_id,delete n.to_warehouse_id,delete n.quantity},U=async()=>{if(m.value){f.value=!0,Object.keys(n).forEach(_=>delete n[_]),p.value="";try{const _=await X.post(`/${t.tenantSlug}/admin/stock-transfers`,u);p.value="Stock transfer request created successfully!",setTimeout(()=>{window.location.href=`/${t.tenantSlug}/admin/stock-transfers`},1500)}catch(_){_.response&&_.response.status===422?Object.assign(n,_.response.data.errors):alert(_.response?.data?.message||"An error occurred while creating the transfer.")}finally{f.value=!1}}};return(_,M)=>(s(),o("div",Tx,[p.value?(s(),o("div",jx,[e("div",Ux,[M[5]||(M[5]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",Ax,[e("p",Mx,i(p.value),1)])])])):T("",!0),e("form",{onSubmit:te(U,["prevent"])},[e("div",Vx,[e("div",Ex,[M[7]||(M[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product *",-1)),h(e("select",{"onUpdate:modelValue":M[0]||(M[0]=$=>u.product_id=$),onChange:k,class:F(["w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",{"border-red-500":n.product_id}])},[M[6]||(M[6]=e("option",{value:""},"Select Product",-1)),(s(!0),o(N,null,L(a.value,$=>(s(),o("option",{key:$.id,value:$.id},i($.name)+" (SKU: "+i($.sku)+") ",9,Ox))),128))],34),[[Y,u.product_id]]),n.product_id?(s(),o("p",Ix,i(n.product_id),1)):T("",!0)]),e("div",null,[M[11]||(M[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"From Warehouse *",-1)),h(e("select",{"onUpdate:modelValue":M[1]||(M[1]=$=>u.from_warehouse_id=$),disabled:!u.product_id,class:F(["w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",{"border-red-500":n.from_warehouse_id,"bg-gray-100":!u.product_id}])},[M[8]||(M[8]=e("option",{value:""},"Select Source Warehouse",-1)),(s(!0),o(N,null,L(b.value,$=>(s(),o("option",{key:$.id,value:$.id},i($.name)+" ("+i($.code)+") ",9,Dx))),128))],10,qx),[[Y,u.from_warehouse_id]]),x.value!==null?(s(),o("div",Fx,[e("p",{class:F(["text-sm",x.value>0?"text-green-600":"text-red-600"])},[M[9]||(M[9]=B(" Available: ",-1)),e("span",Bx,i(x.value),1),M[10]||(M[10]=B(" units ",-1))],2)])):T("",!0),n.from_warehouse_id?(s(),o("p",Nx,i(n.from_warehouse_id),1)):T("",!0)]),e("div",null,[M[13]||(M[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"To Warehouse *",-1)),h(e("select",{"onUpdate:modelValue":M[2]||(M[2]=$=>u.to_warehouse_id=$),class:F(["w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",{"border-red-500":n.to_warehouse_id}])},[M[12]||(M[12]=e("option",{value:""},"Select Destination Warehouse",-1)),(s(!0),o(N,null,L(b.value,$=>(s(),o("option",{key:$.id,value:$.id,disabled:$.id===u.from_warehouse_id},i($.name)+" ("+i($.code)+") ",9,Lx))),128))],2),[[Y,u.to_warehouse_id]]),n.to_warehouse_id?(s(),o("p",Rx,i(n.to_warehouse_id),1)):T("",!0)]),e("div",null,[M[14]||(M[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Quantity *",-1)),h(e("input",{type:"number","onUpdate:modelValue":M[3]||(M[3]=$=>u.quantity=$),min:"1",max:x.value,class:F(["w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",{"border-red-500":n.quantity}])},null,10,zx),[[V,u.quantity,void 0,{number:!0}]]),x.value!==null&&u.quantity>0&&u.quantity<=x.value?(s(),o("p",Hx," Remaining after transfer: "+i(x.value-u.quantity)+" units ",1)):T("",!0),n.quantity?(s(),o("p",Wx,i(n.quantity),1)):T("",!0)]),e("div",Gx,[M[15]||(M[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes (Optional)",-1)),h(e("textarea",{"onUpdate:modelValue":M[4]||(M[4]=$=>u.notes=$),rows:"3",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Add any relevant notes about this transfer..."},null,512),[[V,u.notes]]),n.notes?(s(),o("p",Kx,i(n.notes),1)):T("",!0)])]),e("div",Jx,[M[17]||(M[17]=e("a",{href:"/admin/stock-transfers",class:"px-6 py-2 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition cursor-pointer"}," Cancel ",-1)),e("button",{type:"submit",disabled:f.value||!m.value,class:F(["px-6 py-2 text-white rounded-lg transition",m.value&&!f.value?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-400 cursor-not-allowed"])},[f.value?(s(),o("span",Xx,[...M[16]||(M[16]=[e("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),B("Processing... ",-1)])])):(s(),o("span",Yx," Create Transfer Request "))],10,Qx)])],32)]))}},e1={dashboard:[{element:"header",popover:{title:"Welcome to your Dashboard",description:"This is your command center. Let's take a quick tour of the key features.",side:"bottom",align:"start"}},{element:'[data-tour="global-search"]',popover:{title:"Smart Search",description:'Press Cmd+K or click here to search for ANY feature instantly (e.g., "Add Product", "Reports").',side:"bottom"}},{element:'[data-tour="sidebar-toggle"]',popover:{title:"Navigation Menu",description:"Access all your store modules here. On mobile, tap this to open the menu.",side:"bottom"}},{element:'[data-tour="user-dropdown"]',popover:{title:"Profile & Settings",description:"Manage your account settings, profile, and logout here.",side:"left"}},{popover:{title:"You are all set!",description:"Explore the sidebar to manage Inventory, Sales, and more. You can replay this tour anytime from the Help menu."}}],full_tour:[{element:"header",popover:{title:"Welcome to Mini Store",description:"Let's take a quick tour of your new dashboard features.",side:"bottom"}},{element:'[data-tour="user-dropdown"]',popover:{title:"Account & Settings",description:"Manage your profile, password, and subscription settings here.",side:"left"}},{element:'[href*="products"]',popover:{title:"Inventory & Stock",description:"Track your products, manage categories, and monitor stock levels.",side:"right"}},{element:'[href*="pos"]',popover:{title:"Sales & POS",description:"Process sales in-store with the Point of Sale terminal. Barcode scanner supported!",side:"right"}},{element:'[href*="store-content"]',popover:{title:"Online Store",description:"Manage your e-commerce storefront, customize themes, and update content.",side:"right"}},{element:'[href*="incomes"]',popover:{title:"Accounting",description:"Track incomes, expenses, and manage your chart of accounts.",side:"right"}},{element:'[href*="coupons"]',popover:{title:"Marketing",description:"Create coupons, banners, and manage product enquiries.",side:"right"}},{element:'[href*="users"]',popover:{title:"Team & Access",description:"Add staff members and assign roles/permissions.",side:"right"}},{element:'[href*="reports"]',popover:{title:"Reports & Analytics",description:"View detailed sales, inventory, and financial reports.",side:"right"}},{element:'[href*="support"]',popover:{title:"Help & Support",description:"Raise support tickets or contact customer care.",side:"right"}},{element:'[data-tour="global-search"]',popover:{title:"Quick Navigation",description:"Pro Tip: Press Cmd+K to jump to any features instantly!",side:"bottom"}}]};window.OfflineManager=Re;ut.init();window.Alpine=Pe;const We=se({sidebarOpen:!1});window.uiState=We;const J=at({setup(){return{uiState:We}}});J.component("stock-transfer-form",Zx);J.component("storefront-settings",ze);J.component("purchase-order-form",ws);J.component("notification-dropdown",Ms);J.component("user-dropdown",Ws);J.component("sidebar-toggle",Gs);J.component("mobile-sidebar",Js);J.component("mobile-bottom-nav",so);J.component("offline-indicator",io);J.component("global-search",xo);J.component("outstanding-payments",rn);J.component("product-list",El);J.component("product-form",zi);J.component("bulk-upload-manager",$a);J.component("pos-system",wd);J.component("customer-display",Fd);J.component("general-settings",zc);J.component("store-wizard",X0);J.component("order-create",Mp);J.component("omni-channel-orders",Tm);J.component("message-inbox",dg);J.component("store-content",_f);J.component("tenant-login",Yf);J.component("domain-settings",Tb);J.component("inventory-report",Dy);J.component("pwa-install-prompt",Hy);J.component("visual-editor",$x);J.mount("#app");Pe.store("editor",Cx);Pe.data("editable",Px);He.init(e1);Pe.start();
