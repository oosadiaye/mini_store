import{o as He,D as We,B as Ge}from"./vendor-bOEoWcnc.js";import{m as he}from"./alpine-S4M4TpEG.js";import{c as n,a as j,b as e,d as F,t as l,n as I,o,w as v,v as K,F as B,r as N,e as O,f as se,g as C,h as Q,i as Z,T as pe,j as Y,k as ie,u as ue,l as de,m as be,p as G,q as Ve,s as X,x as ae,y as oe,z as Ce,A as fe,B as Je,C as Ke,D as Qe,E as Xe}from"./vue-BODBsizo.js";import{a as J}from"./axios-B9ygI19o.js";const Ye="mini-store-db",ge="sync-queue",Se=He(Ye,1,{upgrade(a){a.createObjectStore(ge,{keyPath:"id",autoIncrement:!0})}}),Oe={async queueRequest(a,t={}){const u=await Se;let y=t.body,f=y instanceof FormData,p=y;if(f){p=[];for(const[x,b]of y.entries())p.push({key:x,value:b})}const i={url:a,method:t.method||"POST",headers:t.headers?Array.from(new Headers(t.headers).entries()):[],body:p,isFormData:f,timestamp:Date.now()};await u.add(ge,i),console.log("ðŸ”Œ Request queued for offline sync:",i.url),window.dispatchEvent(new CustomEvent("offline-queue-updated"))},async processQueue(){const a=await Se,t=await a.getAll(ge);if(t.length!==0){console.log(`ðŸ”„ Processing ${t.length} offline requests...`);for(const u of t)try{let y=u.body;const f=new Headers(u.headers);f.set("X-Offline-Sync","true"),u.isFormData&&(y=new FormData,u.body.forEach(i=>{y.append(i.key,i.value)}),f.delete("Content-Type"));const p=await fetch(u.url,{method:u.method,headers:f,body:y});p.ok?(console.log("âœ… Synced:",u.url),await a.delete(ge,u.id)):(console.error("âŒ Sync failed for:",u.url,p.status),p.status===422&&await a.delete(ge,u.id))}catch(y){console.error("âŒ Sync network error:",y);break}window.dispatchEvent(new CustomEvent("offline-queue-updated"))}},async getQueueCount(){return await(await Se).count(ge)}};window.addEventListener("online",()=>{console.log("ðŸŒ Online - Attempting sync..."),Oe.processQueue()});const we=(a,t)=>{const u=a.__vccOpts||a;for(const[y,f]of t)u[y]=f;return u},Ze={props:{initialStatus:{type:Boolean,required:!0},hasFeature:{type:Boolean,required:!0},tenantSlug:{type:String,required:!0}},data(){return{isEnabled:this.initialStatus,canAccessStorefrontFeature:this.hasFeature,showWarning:!1,isProcessing:!1}},methods:{handleToggle(){this.isProcessing||(this.isEnabled?this.showWarning=!0:this.confirmToggle())},async confirmToggle(){this.isProcessing=!0,this.showWarning=!1;try{const a=await J.post(`/${this.tenantSlug}/api/tenant/settings/toggle-storefront`);this.isEnabled=a.data.enabled,this.isEnabled&&(window.location.href=`/${this.tenantSlug}/admin/wizard`)}catch(a){console.error("Failed to toggle storefront:",a),a.response&&a.response.status===403?alert("You do not have permission to access this feature."):alert("An error occurred. Please try again.")}finally{this.isProcessing=!1}}}},et={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mt-6"},tt={class:"p-6"},st={class:"flex items-center justify-between"},ot={class:"text-sm text-gray-600"},nt={class:"flex items-center"},rt=["aria-checked"],lt={class:"ml-3 text-sm font-medium text-gray-900"},it={key:0,class:"mt-4 p-4 bg-amber-50 rounded-xl border border-amber-200"},at={class:"flex"},dt={class:"ml-3"},ut={class:"mt-4 flex space-x-3"};function ct(a,t,u,y,f,p){return f.canAccessStorefrontFeature?(o(),n("div",et,[t[9]||(t[9]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Storefront Visibility"),e("p",{class:"text-sm text-gray-500"},"Enable or disable your public-facing online store.")],-1)),e("div",tt,[e("div",st,[e("div",null,[t[5]||(t[5]=e("h4",{class:"text-sm font-bold text-gray-700 uppercase tracking-wide mb-1"},"Status",-1)),e("p",ot,[t[3]||(t[3]=F(" Your store is currently ",-1)),e("strong",null,l(f.isEnabled?"Online":"Offline"),1),t[4]||(t[4]=F(". ",-1))])]),e("div",nt,[e("button",{type:"button",onClick:t[0]||(t[0]=(...i)=>p.handleToggle&&p.handleToggle(...i)),class:I([f.isEnabled?"bg-indigo-600":"bg-gray-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2"]),role:"switch","aria-checked":f.isEnabled},[e("span",{class:I([f.isEnabled?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,rt),e("span",lt,l(f.isEnabled?"Enabled":"Disabled"),1)])]),f.showWarning?(o(),n("div",it,[e("div",at,[t[8]||(t[8]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-amber-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",dt,[t[6]||(t[6]=e("p",{class:"text-sm text-amber-700 font-bold"}," Warning: Disabling this will take your public store offline. ",-1)),t[7]||(t[7]=e("div",{class:"mt-2 text-sm text-amber-600"}," Customers will not be able to browse products or place orders until re-enabled. ",-1)),e("div",ut,[e("button",{onClick:t[1]||(t[1]=(...i)=>p.confirmToggle&&p.confirmToggle(...i)),class:"bg-amber-100 hover:bg-amber-200 text-amber-800 px-3 py-1.5 rounded-lg text-xs font-bold transition"}," Disable Anyway "),e("button",{onClick:t[2]||(t[2]=i=>f.showWarning=!1),class:"text-amber-800 px-3 py-1.5 rounded-lg text-xs font-bold transition"}," Cancel ")])])])])):j("",!0)])])):j("",!0)}const Ee=we(Ze,[["render",ct]]),mt={name:"PurchaseOrderForm",props:{suppliers:{type:Array,required:!0},warehouses:{type:Array,required:!0},products:{type:Array,required:!0},taxCodes:{type:Array,required:!0},initialData:{type:Object,default:null},submitUrl:{type:String,required:!0},redirectUrl:{type:String,required:!0},method:{type:String,default:"POST"},currency:{type:String,default:"â‚¦"}},data(){return{isSubmitting:!1,error:null,form:{supplier_id:"",warehouse_id:"",order_date:new Date().toISOString().substr(0,10),expected_delivery_date:"",notes:"",discount:0,shipping:0,items:[{product_id:"",quantity:1,unit_cost:0,tax_code_id:""}]}}},mounted(){this.initialData&&Object.assign(this.form,{...this.initialData,items:this.initialData.items?this.initialData.items.map(a=>({id:a.id,product_id:a.product_id,quantity:a.quantity_ordered,unit_cost:parseFloat(a.unit_cost)||0,tax_code_id:a.tax_code_id||""})):this.form.items})},methods:{handleProductChange(a){const t=this.form.items[a],u=this.products.find(y=>y.id===t.product_id);u&&(t.unit_cost=parseFloat(u.cost_price)||0)},addItem(){this.form.items.push({product_id:"",quantity:1,unit_cost:0,tax_code_id:""})},removeItem(a){this.form.items.length>1&&this.form.items.splice(a,1)},calculateRowTotal(a){const t=parseFloat(a.quantity)||0,u=parseFloat(a.unit_cost)||0,y=t*u,f=this.getTaxRate(a.tax_code_id);return y+y*(f/100)},getTaxRate(a){const t=this.taxCodes.find(u=>u.id===a);return t?parseFloat(t.rate):0},formatCurrency(a){return this.currency+(parseFloat(a)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},async handleSubmit(){this.isSubmitting=!0,this.error=null;try{const a={...this.form};this.method==="PUT"&&(a._method="PUT");const t=await J.post(this.submitUrl,a);if(t.status<300)window.location.href=this.redirectUrl;else throw new Error(t.data.message||"Error")}catch(a){this.error=a.response?.data?.message||"Check form inputs and try again."}finally{this.isSubmitting=!1}}},computed:{totals(){let a=0,t=0;this.form.items.forEach(y=>{const f=(parseFloat(y.quantity)||0)*(parseFloat(y.unit_cost)||0);a+=f,t+=f*(this.getTaxRate(y.tax_code_id)/100)});const u=Math.max(0,a-(parseFloat(this.form.discount)||0)+t+(parseFloat(this.form.shipping)||0));return{subtotal:a,tax:t,total:u}}}},gt={class:"purchase-order-form-container"},pt={key:0,class:"mb-6 p-5 bg-red-50 border-l-4 border-red-500 rounded-xl flex items-center justify-between shadow-sm"},ft={class:"flex items-center"},bt=["textContent"],xt={class:"grid grid-cols-1 md:grid-cols-2 gap-8 bg-white p-8 rounded-3xl border border-gray-100 shadow-sm"},yt={class:"space-y-2"},vt=["value","textContent"],ht={class:"space-y-2"},wt=["value","textContent"],_t={class:"space-y-2"},kt={class:"space-y-2"},$t={class:"space-y-2"},St={class:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden"},Ct={class:"px-8 py-6 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center"},jt={class:"p-8 space-y-6"},Ut={class:"col-span-12 lg:col-span-4 space-y-2"},Pt=["onUpdate:modelValue","onChange"],Tt=["value","textContent"],At={class:"col-span-4 lg:col-span-2 space-y-2"},Mt=["onUpdate:modelValue"],Vt={class:"col-span-4 lg:col-span-2 space-y-2"},Ot=["onUpdate:modelValue"],Et={class:"col-span-4 lg:col-span-2 space-y-2"},qt=["onUpdate:modelValue"],Dt=["value","textContent"],It={class:"col-span-12 lg:col-span-2 flex items-center justify-end gap-3"},Ft={class:"text-right"},Bt=["textContent"],Nt=["onClick","disabled"],Lt={class:"flex justify-end pt-4"},Rt={class:"w-full md:w-80 bg-white rounded-3xl p-8 border-2 border-indigo-50 space-y-4 shadow-sm"},zt={class:"flex justify-between items-center text-sm font-bold text-gray-500"},Ht=["textContent"],Wt={class:"flex justify-between items-center text-sm font-bold text-gray-500"},Gt={class:"flex justify-between items-center text-sm font-bold text-gray-500"},Jt=["textContent"],Kt={class:"flex justify-between items-center text-sm font-bold text-gray-500"},Qt={class:"pt-4 border-t-2 border-indigo-50 flex justify-between items-center"},Xt=["textContent"],Yt={class:"pt-8 flex justify-end"},Zt=["disabled"],es=["textContent"];function ts(a,t,u,y,f,p){return o(),n("div",gt,[f.error?(o(),n("div",pt,[e("div",ft,[t[10]||(t[10]=e("svg",{class:"w-6 h-6 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",{class:"text-red-700 font-bold",textContent:l(f.error)},null,8,bt)]),e("button",{onClick:t[0]||(t[0]=i=>f.error=null),class:"text-red-500 hover:text-red-700 font-black text-2xl",type:"button"},"Ã—")])):j("",!0),e("form",{onSubmit:t[9]||(t[9]=se((...i)=>p.handleSubmit&&p.handleSubmit(...i),["prevent"])),class:"space-y-8"},[e("div",xt,[e("div",yt,[t[12]||(t[12]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Supplier",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>f.form.supplier_id=i),required:"",class:"w-full rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-4 py-3 text-base font-bold text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},[t[11]||(t[11]=e("option",{value:""},"Select Supplier",-1)),(o(!0),n(B,null,N(u.suppliers,i=>(o(),n("option",{key:i.id,value:i.id,textContent:l(i.name)},null,8,vt))),128))],512),[[K,f.form.supplier_id]])]),e("div",ht,[t[14]||(t[14]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Destination Warehouse",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>f.form.warehouse_id=i),required:"",class:"w-full rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-4 py-3 text-base font-bold text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},[t[13]||(t[13]=e("option",{value:""},"Select Warehouse",-1)),(o(!0),n(B,null,N(u.warehouses,i=>(o(),n("option",{key:i.id,value:i.id,textContent:l(i.name)},null,8,wt))),128))],512),[[K,f.form.warehouse_id]])]),e("div",_t,[t[15]||(t[15]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Order Date",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=i=>f.form.order_date=i),required:"",class:"w-full rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-4 py-3 text-base font-bold text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},null,512),[[O,f.form.order_date]])]),e("div",kt,[t[16]||(t[16]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Expected Delivery",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=i=>f.form.expected_delivery_date=i),class:"w-full rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-4 py-3 text-base font-bold text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},null,512),[[O,f.form.expected_delivery_date]])])]),e("div",$t,[t[17]||(t[17]=e("label",{class:"block text-sm font-bold text-gray-500 uppercase tracking-widest"},"Notes",-1)),v(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=i=>f.form.notes=i),rows:"3",class:"w-full rounded-2xl border-2 border-gray-100 bg-gray-50/30 px-6 py-4 text-base font-medium text-gray-800 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none",placeholder:"Enter instructions..."},null,512),[[O,f.form.notes]])]),e("div",St,[e("div",Ct,[t[18]||(t[18]=e("h4",{class:"text-xl font-black text-gray-900"},"Order Items",-1)),e("button",{type:"button",onClick:t[6]||(t[6]=(...i)=>p.addItem&&p.addItem(...i)),class:"bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 shadow-lg transition-all text-sm"}," Add Item ")]),e("div",jt,[(o(!0),n(B,null,N(f.form.items,(i,x)=>(o(),n("div",{key:x,class:"grid grid-cols-12 gap-5 items-end bg-gray-50/30 p-6 rounded-3xl border-2 border-gray-100 transition-all duration-300"},[e("div",Ut,[t[20]||(t[20]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Product",-1)),v(e("select",{"onUpdate:modelValue":b=>i.product_id=b,onChange:b=>p.handleProductChange(x),required:"",class:"w-full rounded-xl border-2 border-gray-100 bg-white px-3 py-2.5 text-sm font-bold text-gray-800 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none"},[t[19]||(t[19]=e("option",{value:""},"Select Product",-1)),(o(!0),n(B,null,N(u.products,b=>(o(),n("option",{key:b.id,value:b.id,textContent:l(b.name)},null,8,Tt))),128))],40,Pt),[[K,i.product_id]])]),e("div",At,[t[21]||(t[21]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Quantity",-1)),v(e("input",{type:"number","onUpdate:modelValue":b=>i.quantity=b,required:"",class:"w-full rounded-xl border-2 border-gray-100 bg-white px-3 py-2.5 text-sm font-black text-center text-gray-800 outline-none",min:"1"},null,8,Mt),[[O,i.quantity,void 0,{number:!0}]])]),e("div",Vt,[t[22]||(t[22]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Unit Cost",-1)),v(e("input",{type:"number","onUpdate:modelValue":b=>i.unit_cost=b,step:"0.01",required:"",class:"w-full rounded-xl border-2 border-gray-100 bg-white px-3 py-2.5 text-sm font-black text-right text-indigo-600 outline-none",min:"0"},null,8,Ot),[[O,i.unit_cost,void 0,{number:!0}]])]),e("div",Et,[t[24]||(t[24]=e("label",{class:"block text-[10px] font-black text-gray-400 uppercase tracking-widest"},"Tax Code",-1)),v(e("select",{"onUpdate:modelValue":b=>i.tax_code_id=b,class:"w-full rounded-xl border-2 border-gray-100 bg-white px-3 py-2.5 text-sm font-bold text-gray-800 outline-none"},[t[23]||(t[23]=e("option",{value:""},"No Tax",-1)),(o(!0),n(B,null,N(u.taxCodes,b=>(o(),n("option",{key:b.id,value:b.id,textContent:l(b.name+" ("+b.rate+"%)")},null,8,Dt))),128))],8,qt),[[K,i.tax_code_id]])]),e("div",It,[e("div",Ft,[e("div",{class:"text-base font-black text-gray-900",textContent:l(p.formatCurrency(p.calculateRowTotal(i)))},null,8,Bt)]),e("button",{type:"button",onClick:b=>p.removeItem(x),disabled:f.form.items.length===1,class:"text-red-400 hover:text-red-500 hover:bg-red-50 p-2 rounded-xl transition-all disabled:opacity-0",title:"Remove"},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Nt)])]))),128))])]),e("div",Lt,[e("div",Rt,[e("div",zt,[t[26]||(t[26]=e("span",null,"Subtotal",-1)),e("span",{class:"text-gray-800",textContent:l(p.formatCurrency(p.totals.subtotal))},null,8,Ht)]),e("div",Wt,[t[27]||(t[27]=e("span",null,"Discount",-1)),v(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=i=>f.form.discount=i),step:"0.01",class:"w-24 bg-gray-50 rounded-lg text-right text-xs font-black px-2 py-1 outline-none"},null,512),[[O,f.form.discount,void 0,{number:!0}]])]),e("div",Gt,[t[28]||(t[28]=e("span",null,"Tax",-1)),e("span",{class:"text-gray-800",textContent:l(p.formatCurrency(p.totals.tax))},null,8,Jt)]),e("div",Kt,[t[29]||(t[29]=e("span",null,"Shipping",-1)),v(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=i=>f.form.shipping=i),step:"0.01",class:"w-24 bg-gray-50 rounded-lg text-right text-xs font-black px-2 py-1 outline-none"},null,512),[[O,f.form.shipping,void 0,{number:!0}]])]),e("div",Qt,[t[30]||(t[30]=e("span",{class:"text-sm font-black text-gray-900 uppercase tracking-widest"},"Total",-1)),e("div",{class:"text-2xl font-black text-indigo-600",textContent:l(p.formatCurrency(p.totals.total))},null,8,Xt)])])]),e("div",Yt,[e("button",{type:"submit",disabled:f.isSubmitting,class:"bg-indigo-600 text-white px-12 py-5 rounded-2xl font-black text-xl hover:bg-indigo-700 shadow-xl transition-all disabled:opacity-50"},[e("span",{textContent:l(f.isSubmitting?"Saving...":u.initialData?"Update Order":"Place Order")},null,8,es)],8,Zt)])],32)])}const ss=we(mt,[["render",ts]]),os={key:0,class:"origin-top-right absolute right-0 mt-2 w-80 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},ns={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},rs=["href"],ls={class:"max-h-60 overflow-y-auto"},is={class:"text-sm font-medium text-gray-900"},as={class:"text-xs text-gray-500 mt-1"},ds={class:"mt-2 flex justify-between items-center"},us={class:"text-xs text-gray-400"},cs=["href"],ms={key:0,class:"px-4 py-6 text-center text-sm text-gray-500"},gs={__name:"NotificationDropdown",props:{notifications:{type:Array,default:()=>[]},markAllReadUrl:String,readUrlPrefix:String},setup(a){const t=a,u=C(!1),y=()=>{u.value=!u.value},f=()=>{u.value=!0},p=()=>{u.value=!1},i=x=>`${t.readUrlPrefix}${x}`;return(x,b)=>(o(),n("div",{class:"relative mr-2 md:mr-4",onMouseenter:f,onMouseleave:p},[e("button",{onClick:y,class:"relative p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none"},[...b[0]||(b[0]=[e("span",{class:"sr-only"},"View notifications",-1),e("svg",{class:"h-5 md:h-6 w-5 md:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)])]),Q(pe,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:Z(()=>[u.value?(o(),n("div",os,[e("div",ns,[b[1]||(b[1]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),a.notifications.length>0?(o(),n("a",{key:0,href:a.markAllReadUrl,class:"text-xs text-indigo-600 hover:text-indigo-800"}," Mark all read ",8,rs)):j("",!0)]),e("div",ls,[(o(!0),n(B,null,N(a.notifications,m=>(o(),n("div",{key:m.id,class:"px-4 py-3 hover:bg-gray-50 transition border-b border-gray-100 last:border-0"},[e("p",is,l(m.data?.title||"Notification"),1),e("p",as,l(m.data?.message||""),1),e("div",ds,[e("span",us,l(m.created_time_ago),1),e("a",{href:i(m.id),class:"text-xs text-indigo-600 hover:text-indigo-800"}," Dismiss ",8,cs)])]))),128)),a.notifications.length===0?(o(),n("div",ms," No new notifications ")):j("",!0)])])):j("",!0)]),_:1})],32))}},ps={class:"text-right mr-3 hidden sm:block"},fs={class:"font-semibold text-slate-700"},bs={class:"text-xs text-slate-500"},xs={class:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold border border-indigo-200"},ys={key:0,class:"origin-top-right absolute right-0 top-10 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},vs={class:"px-4 py-3 border-b border-gray-100 md:hidden"},hs={class:"text-sm font-medium text-gray-900"},ws={class:"text-xs text-gray-500 truncate"},_s=["href"],ks={class:"border-t border-gray-100"},$s=["action"],Ss=["value"],Cs={__name:"UserDropdown",props:{userName:String,userEmail:String,userRole:{type:String,default:"Admin"},userInitial:String,profileUrl:String,logoutUrl:String,csrfToken:String},setup(a){const t=C(!1),u=()=>{t.value=!t.value},y=()=>{t.value=!0},f=()=>{t.value=!1};return(p,i)=>(o(),n("div",{class:"flex items-center text-sm border-l pl-6 border-slate-200 h-8 relative",onMouseenter:y,onMouseleave:f},[e("button",{onClick:u,class:"flex items-center focus:outline-none"},[e("div",ps,[e("p",fs,l(a.userName),1),e("p",bs,l(a.userRole),1)]),e("div",xs,l(a.userInitial),1)]),Q(pe,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:Z(()=>[t.value?(o(),n("div",ys,[e("div",vs,[e("p",hs,l(a.userName),1),e("p",ws,l(a.userEmail),1)]),e("a",{href:a.profileUrl,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...i[0]||(i[0]=[e("i",{class:"fas fa-user-circle mr-2 w-4"},null,-1),F(" My Profile ",-1)])],8,_s),e("div",ks,[e("form",{method:"POST",action:a.logoutUrl},[e("input",{type:"hidden",name:"_token",value:a.csrfToken},null,8,Ss),i[1]||(i[1]=e("button",{type:"submit",class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"},[e("i",{class:"fas fa-sign-out-alt mr-2 w-4"}),F(" Sign Out ")],-1))],8,$s)])])):j("",!0)]),_:1})],32))}},js={__name:"SidebarToggle",setup(a){const t=()=>{window.uiState&&(window.uiState.sidebarOpen=!window.uiState.sidebarOpen)};return(u,y)=>(o(),n("button",{onClick:t,class:"text-slate-500 focus:outline-none md:hidden mr-2 md:mr-4 hover:text-slate-700 flex-shrink-0"},[...y[0]||(y[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]))}},Us={key:0,class:"fixed inset-y-0 left-0 w-64 bg-slate-900 z-30 md:hidden overflow-y-auto"},Ps={__name:"MobileSidebar",setup(a){const t=Y(()=>window.uiState?.sidebarOpen||!1),u=()=>{window.uiState&&(window.uiState.sidebarOpen=!1)};return(y,f)=>(o(),n("div",null,[Q(pe,{"enter-active-class":"transition-opacity ease-linear duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity ease-linear duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Z(()=>[t.value?(o(),n("div",{key:0,onClick:u,class:"fixed inset-0 bg-slate-900/80 z-20 md:hidden"})):j("",!0)]),_:1}),Q(pe,{"enter-active-class":"transition ease-in-out duration-300 transform","enter-from-class":"-translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition ease-in-out duration-300 transform","leave-from-class":"translate-x-0","leave-to-class":"-translate-x-full"},{default:Z(()=>[t.value?(o(),n("div",Us,[ie(y.$slots,"default")])):j("",!0)]),_:3})]))}},Ts={class:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50"},As={class:"grid grid-cols-4 h-16"},Ms=["href"],Vs=["href"],Os=["href"],Es=["href"],qs={__name:"MobileBottomNav",props:{productsUrl:String,posUrl:String,ordersUrl:String,dashboardUrl:String,activeRoute:String},setup(a){const t=a,u=t.activeRoute.includes("products"),y=t.activeRoute.includes("pos"),f=t.activeRoute.includes("orders"),p=t.activeRoute==="dashboard";return(i,x)=>(o(),n("nav",Ts,[e("div",As,[e("a",{href:a.productsUrl,class:I(["flex flex-col items-center justify-center text-xs transition",ue(u)?"text-indigo-600":"text-gray-600 hover:text-indigo-600"])},[...x[0]||(x[0]=[e("svg",{class:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),e("span",{class:"font-medium"},"Products",-1)])],10,Ms),e("a",{href:a.posUrl,class:I(["flex flex-col items-center justify-center text-xs transition",ue(y)?"text-indigo-600":"text-gray-600 hover:text-indigo-600"])},[...x[1]||(x[1]=[e("svg",{class:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1),e("span",{class:"font-medium"},"POS",-1)])],10,Vs),e("a",{href:a.ordersUrl,class:I(["flex flex-col items-center justify-center text-xs transition",ue(f)?"text-indigo-600":"text-gray-600 hover:text-indigo-600"])},[...x[2]||(x[2]=[e("svg",{class:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})],-1),e("span",{class:"font-medium"},"Orders",-1)])],10,Os),e("a",{href:a.dashboardUrl,class:I(["flex flex-col items-center justify-center text-xs transition",p?"text-indigo-600":"text-gray-600 hover:text-indigo-600"])},[...x[3]||(x[3]=[e("svg",{class:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),e("span",{class:"font-medium"},"Dashboard",-1)])],10,Es)])]))}},Ds={id:"offline-indicator",class:"fixed bottom-4 right-4 bg-slate-800 text-white px-4 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-3 transition-transform duration-300"},Is={key:0,class:"flex items-center"},Fs={key:1,class:"flex items-center"},Bs={key:2,class:"ml-2 bg-white text-slate-800 text-xs font-bold px-2 py-0.5 rounded-full"},Ns={__name:"OfflineIndicator",setup(a){const t=C(navigator.onLine),u=C(0),y=async()=>{window.OfflineManager&&(u.value=await window.OfflineManager.getQueueCount())},f=()=>{t.value=!0,setTimeout(()=>{t.value&&u.value},3e3)},p=()=>{t.value=!1},i=async()=>{await y()};return de(async()=>{await y(),window.addEventListener("online",f),window.addEventListener("offline",p),window.addEventListener("offline-queue-updated",i)}),be(()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p),window.removeEventListener("offline-queue-updated",i)}),(x,b)=>v((o(),n("div",Ds,[t.value?u.value>0?(o(),n("div",Fs,[...b[1]||(b[1]=[e("svg",{class:"animate-spin w-5 h-5 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",{class:"font-medium"},"Syncing data...",-1)])])):j("",!0):(o(),n("div",Is,[...b[0]||(b[0]=[e("svg",{class:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 011.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})],-1),e("span",{class:"font-medium"},"You are offline.",-1)])])),u.value>0?(o(),n("div",Bs,l(u.value)+" pending ",1)):j("",!0)],512)),[[G,!t.value||u.value>0]])}},Ls={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Rs={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ce={__name:"CommonModal",props:{isOpen:Boolean,maxWidth:{type:String,default:"md"}},emits:["close"],setup(a,{emit:t}){const u=a,y=t,f=()=>{y("close")},p=Y(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[u.maxWidth]||"sm:max-w-lg");return(i,x)=>(o(),Ve(pe,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Z(()=>[a.isOpen?(o(),n("div",Ls,[e("div",Rs,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:f}),x[0]||(x[0]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),Q(pe,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:Z(()=>[a.isOpen?(o(),n("div",{key:0,class:I(["inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:w-full",p.value])},[ie(i.$slots,"default")],2)):j("",!0)]),_:3})])])):j("",!0)]),_:3}))}},zs={class:"flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3 mb-8"},Hs={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden overflow-x-auto text-sm"},Ws={class:"w-full text-left"},Gs={class:"divide-y divide-gray-100"},Js={class:"px-6 py-4 font-medium text-indigo-600"},Ks=["href"],Qs={class:"px-6 py-4"},Xs={class:"px-6 py-4 text-gray-500"},Ys={class:"px-6 py-4 text-right font-medium"},Zs={class:"px-6 py-4 text-right text-green-600"},eo={class:"px-6 py-4 text-right font-bold text-red-600"},to={class:"px-6 py-4 text-right"},so=["onClick"],oo={key:0},no={key:0,class:"px-6 py-4 border-t border-gray-200"},ro={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden overflow-x-auto text-sm"},lo={class:"w-full text-left"},io={class:"divide-y divide-gray-100"},ao={class:"px-6 py-4 font-medium text-gray-900 font-mono text-xs"},uo={class:"px-6 py-4"},co={class:"px-6 py-4 text-gray-500"},mo={class:"px-6 py-4 text-right font-medium"},go={class:"px-6 py-4 text-right text-green-600"},po={class:"px-6 py-4 text-right font-bold text-red-600"},fo={class:"px-6 py-4 text-right"},bo=["onClick"],xo={key:0},yo={key:0,class:"px-6 py-4 border-t border-gray-200"},vo={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden overflow-x-auto text-sm"},ho={class:"w-full text-left"},wo={class:"divide-y divide-gray-100"},_o={class:"px-6 py-4 text-gray-500"},ko={class:"px-6 py-4 font-medium"},$o={class:"px-6 py-4 text-xs"},So={class:"px-6 py-4 text-right font-medium"},Co={class:"px-6 py-4 text-right font-bold text-green-600"},jo={class:"px-6 py-4 text-right"},Uo=["onClick"],Po={key:0},To={key:0,class:"px-6 py-4 border-t border-gray-200"},Ao=["action"],Mo=["value"],Vo={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Oo={class:"sm:flex sm:items-start"},Eo={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},qo={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},Do={class:"mt-2 text-sm text-gray-500"},Io={class:"font-bold font-mono"},Fo={class:"mt-4 space-y-4"},Bo={class:"mt-1 relative rounded-md shadow-sm"},No={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Lo={class:"text-gray-500 sm:text-sm"},Ro={class:"grid grid-cols-2 gap-4"},zo=["value"],Ho={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg"},Wo=["action"],Go=["value"],Jo={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ko={class:"sm:flex sm:items-start"},Qo={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Xo={class:"mt-4 space-y-4"},Yo={class:"mt-1 flex space-x-2"},Zo=["value"],en={key:0},tn={class:"block text-sm font-medium text-gray-700"},sn={name:"entity_id",required:"",class:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},on={value:""},nn=["value"],rn={class:"mt-1 relative rounded-md shadow-sm"},ln={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},an={class:"text-gray-500 sm:text-sm"},dn={class:"grid grid-cols-2 gap-4"},un=["value"],cn={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg"},mn=["action"],gn=["value"],pn={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},fn={class:"sm:flex sm:items-start"},bn={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},xn={class:"mt-2 text-sm text-gray-600"},yn={class:"font-bold"},vn={class:"font-bold text-green-600"},hn={class:"mt-4 space-y-4"},wn={class:"block text-sm font-medium text-gray-700 text-left"},_n={name:"allocatable_id",required:"",class:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},kn={value:""},$n=["value"],Sn=["value"],Cn={class:"mt-1 relative rounded-md shadow-sm"},jn={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Un={class:"text-gray-500 sm:text-sm"},Pn=["max","value"],Tn={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg"},An={__name:"OutstandingPayments",props:{receivables:{type:Array,default:()=>[]},payables:{type:Array,default:()=>[]},unallocatedPayments:{type:Array,default:()=>[]},customers:{type:Array,default:()=>[]},suppliers:{type:Array,default:()=>[]},receivablesTotal:Number,payablesTotal:Number,unallocatedTotal:Number,receivablesHasPages:Boolean,payablesHasPages:Boolean,unallocatedHasPages:Boolean,currencySymbol:String,tenantSlug:String,csrfToken:String,initialTab:{type:String,default:"receivables"}},setup(a){const t=a,u=C(t.initialTab),y=X({open:!1,type:"",id:null,amount:0,ref:""}),f=X({open:!1,type:"customer"}),p=X({open:!1,payment:null}),i=new Date().toISOString().split("T")[0],x=(M,g,h,V)=>{y.type=M,y.id=g,y.amount=h,y.ref=V,y.open=!0},b=M=>{p.payment=M,p.open=!0},m=M=>M?M.entity_type.includes("Customer"):!1,k=M=>M?m(M)?t.receivables.filter(g=>g.customer_id==M.entity_id):t.payables.filter(g=>g.supplier_id==M.entity_id):[],T=M=>`/${t.tenantSlug}/admin/orders/${M}`,w=()=>y.type==="customer"?`/${t.tenantSlug}/admin/orders/${y.id}/payment`:`/${t.tenantSlug}/admin/supplier-invoices/${y.id}/payment`,A=M=>M?new Date(M).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",$=M=>M==null?"0.00":parseFloat(M).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return(M,g)=>(o(),n("div",null,[e("div",zs,[e("button",{type:"button",onClick:g[0]||(g[0]=h=>u.value="receivables"),class:I([u.value==="receivables"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100 ring-2 ring-indigo-600 ring-offset-2":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200","whitespace-nowrap py-2.5 px-6 rounded-xl font-bold text-sm transition-all duration-300 flex items-center"])},[g[13]||(g[13]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1)),g[14]||(g[14]=F(" Receivables ",-1)),a.receivablesTotal>0?(o(),n("span",{key:0,class:I([u.value==="receivables"?"bg-white text-indigo-600":"bg-indigo-100 text-indigo-600","ml-2 py-0.5 px-2.5 rounded-full text-xs transition-colors duration-300"])},l(a.receivablesTotal),3)):j("",!0)],2),e("button",{type:"button",onClick:g[1]||(g[1]=h=>u.value="payables"),class:I([u.value==="payables"?"bg-red-600 text-white shadow-lg shadow-red-100 ring-2 ring-red-600 ring-offset-2":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200","whitespace-nowrap py-2.5 px-6 rounded-xl font-bold text-sm transition-all duration-300 flex items-center"])},[g[15]||(g[15]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6"})],-1)),g[16]||(g[16]=F(" Payables ",-1)),a.payablesTotal>0?(o(),n("span",{key:0,class:I([u.value==="payables"?"bg-white text-red-600":"bg-red-100 text-red-600","ml-2 py-0.5 px-2.5 rounded-full text-xs transition-colors duration-300"])},l(a.payablesTotal),3)):j("",!0)],2),e("button",{type:"button",onClick:g[2]||(g[2]=h=>u.value="unallocated"),class:I([u.value==="unallocated"?"bg-green-600 text-white shadow-lg shadow-green-100 ring-2 ring-green-600 ring-offset-2":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200","whitespace-nowrap py-2.5 px-6 rounded-xl font-bold text-sm transition-all duration-300 flex items-center"])},[g[17]||(g[17]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),g[18]||(g[18]=F(" Unallocated ",-1)),a.unallocatedTotal>0?(o(),n("span",{key:0,class:I([u.value==="unallocated"?"bg-white text-green-600":"bg-green-100 text-green-600","ml-2 py-0.5 px-2.5 rounded-full text-xs transition-colors duration-300"])},l(a.unallocatedTotal),3)):j("",!0)],2),g[20]||(g[20]=e("div",{class:"hidden md:block flex-grow"},null,-1)),e("button",{onClick:g[3]||(g[3]=h=>f.open=!0),class:"w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2.5 rounded-xl font-bold text-sm transition-all duration-300 flex items-center shadow-lg shadow-indigo-100"},[...g[19]||(g[19]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),F(" Post Advance Payment ",-1)])])]),v(e("div",null,[e("div",Hs,[e("table",Ws,[g[22]||(g[22]=e("thead",{class:"bg-gray-50 text-gray-500 border-b border-gray-100 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Order #"),e("th",{class:"px-6 py-3"},"Customer"),e("th",{class:"px-6 py-3"},"Date"),e("th",{class:"px-6 py-3 text-right"},"Total"),e("th",{class:"px-6 py-3 text-right"},"Paid"),e("th",{class:"px-6 py-3 text-right"},"Balance Due"),e("th",{class:"px-6 py-3 text-right"},"Action")])],-1)),e("tbody",Gs,[(o(!0),n(B,null,N(a.receivables,h=>(o(),n("tr",{key:h.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Js,[e("a",{href:T(h.id)},l(h.order_number),9,Ks)]),e("td",Qs,l(h.customer?.name),1),e("td",Xs,l(A(h.created_at)),1),e("td",Ys,l(a.currencySymbol)+l($(h.total)),1),e("td",Zs,l(a.currencySymbol)+l($(h.amount_paid)),1),e("td",eo,l(a.currencySymbol)+l($(h.total-h.amount_paid)),1),e("td",to,[e("button",{onClick:V=>x("customer",h.id,h.total-h.amount_paid,h.order_number),class:"text-indigo-600 hover:text-indigo-900 font-bold uppercase border border-indigo-200 px-3 py-1 rounded-full hover:bg-indigo-50 transition text-[10px]"}," Record Payment ",8,so)])]))),128)),a.receivables.length===0?(o(),n("tr",oo,[...g[21]||(g[21]=[e("td",{colspan:"7",class:"px-6 py-12 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center justify-center text-sm"},[e("svg",{class:"w-12 h-12 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("p",null,"No outstanding receivables found."),e("p",{class:"text-xs mt-1"},"Great job! All customer orders are paid.")])],-1)])])):j("",!0)])]),a.receivablesHasPages?(o(),n("div",no,[ie(M.$slots,"receivables-pagination")])):j("",!0)])],512),[[G,u.value==="receivables"]]),v(e("div",null,[e("div",ro,[e("table",lo,[g[24]||(g[24]=e("thead",{class:"bg-gray-50 text-gray-500 border-b border-gray-100 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Invoice #"),e("th",{class:"px-6 py-3"},"Supplier"),e("th",{class:"px-6 py-3"},"Date"),e("th",{class:"px-6 py-3 text-right"},"Total"),e("th",{class:"px-6 py-3 text-right"},"Paid"),e("th",{class:"px-6 py-3 text-right"},"Balance Due"),e("th",{class:"px-6 py-3 text-right"},"Action")])],-1)),e("tbody",io,[(o(!0),n(B,null,N(a.payables,h=>(o(),n("tr",{key:h.id,class:"hover:bg-gray-50 transition-colors"},[e("td",ao,l(h.invoice_number),1),e("td",uo,l(h.supplier?.name),1),e("td",co,l(A(h.invoice_date)),1),e("td",mo,l(a.currencySymbol)+l($(h.total)),1),e("td",go,l(a.currencySymbol)+l($(h.amount_paid)),1),e("td",po,l(a.currencySymbol)+l($(h.total-h.amount_paid)),1),e("td",fo,[e("button",{onClick:V=>x("supplier",h.id,h.total-h.amount_paid,h.invoice_number),class:"text-red-600 hover:text-red-900 font-bold uppercase border border-red-200 px-3 py-1 rounded-full hover:bg-red-50 transition text-[10px]"}," Pay Bill ",8,bo)])]))),128)),a.payables.length===0?(o(),n("tr",xo,[...g[23]||(g[23]=[e("td",{colspan:"7",class:"px-6 py-12 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center justify-center text-sm"},[e("svg",{class:"w-12 h-12 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("p",null,"No outstanding bills found.")])],-1)])])):j("",!0)])]),a.payablesHasPages?(o(),n("div",yo,[ie(M.$slots,"payables-pagination")])):j("",!0)])],512),[[G,u.value==="payables"]]),v(e("div",null,[e("div",vo,[e("table",ho,[g[26]||(g[26]=e("thead",{class:"bg-gray-50 text-gray-500 border-b border-gray-100 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Date"),e("th",{class:"px-6 py-3"},"Entity"),e("th",{class:"px-6 py-3"},"Source"),e("th",{class:"px-6 py-3 text-right"},"Total Amount"),e("th",{class:"px-6 py-3 text-right"},"Unallocated"),e("th",{class:"px-6 py-3 text-right"},"Action")])],-1)),e("tbody",wo,[(o(!0),n(B,null,N(a.unallocatedPayments,h=>(o(),n("tr",{key:h.id,class:"hover:bg-gray-50 transition-colors"},[e("td",_o,l(A(h.payment_date)),1),e("td",ko,l(h.entity?.name),1),e("td",$o,[e("span",{class:I([h.entity_type.includes("Customer")?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700","px-2 py-0.5 rounded-full font-semibold"])},l(h.entity_type.includes("Customer")?"Customer":"Supplier"),3)]),e("td",So,l(a.currencySymbol)+l($(h.amount)),1),e("td",Co,l(a.currencySymbol)+l($(h.unallocated_amount)),1),e("td",jo,[e("button",{onClick:V=>b(h),class:"text-green-600 hover:text-green-900 font-bold uppercase border border-green-200 px-3 py-1 rounded-full hover:bg-green-50 transition text-[10px]"}," Allocate ",8,Uo)])]))),128)),a.unallocatedPayments.length===0?(o(),n("tr",Po,[...g[25]||(g[25]=[e("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500"},[e("div",{class:"flex flex-col items-center justify-center text-sm"},[e("svg",{class:"w-12 h-12 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm3-2a2 2 0 11-4 0 2 2 0 014 0z"})]),e("p",null,"No unallocated payments found.")])],-1)])])):j("",!0)])]),a.unallocatedHasPages?(o(),n("div",To,[ie(M.$slots,"unallocated-pagination")])):j("",!0)])],512),[[G,u.value==="unallocated"]]),Q(ce,{"is-open":y.open,"max-width":"lg",onClose:g[6]||(g[6]=h=>y.open=!1)},{default:Z(()=>[e("form",{method:"POST",action:w(),class:"w-full"},[e("input",{type:"hidden",name:"_token",value:a.csrfToken},null,8,Mo),e("div",Vo,[e("div",Oo,[g[34]||(g[34]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Eo,[e("h3",qo,[g[27]||(g[27]=F(" Record Payment ",-1)),e("span",null,l(y.type==="customer"?"from Customer":"to Supplier"),1)]),e("div",Do,[g[28]||(g[28]=F(" Record payment for ",-1)),e("span",Io,l(y.ref),1),g[29]||(g[29]=F(". ",-1))]),e("div",Fo,[e("div",null,[g[30]||(g[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amount",-1)),e("div",Bo,[e("div",No,[e("span",Lo,l(a.currencySymbol),1)]),v(e("input",{type:"number",name:"amount",step:"0.01","onUpdate:modelValue":g[4]||(g[4]=h=>y.amount=h),class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md border-2"},null,512),[[O,y.amount]])])]),e("div",Ro,[e("div",null,[g[31]||(g[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Payment Date",-1)),e("input",{type:"date",name:"payment_date",value:ue(i),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md border-2"},null,8,zo)]),g[32]||(g[32]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Method"),e("select",{name:"payment_method",class:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[e("option",{value:"bank_transfer"},"Bank Transfer"),e("option",{value:"cash"},"Cash"),e("option",{value:"check"},"Check"),e("option",{value:"credit_card"},"Credit Card")])],-1))]),g[33]||(g[33]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Reference / Notes"),e("input",{type:"text",name:"reference",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md border-2"})],-1))])])])]),e("div",Ho,[g[35]||(g[35]=e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm"}," Confirm Payment ",-1)),e("button",{onClick:g[5]||(g[5]=h=>y.open=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border-2 border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],8,Ao)]),_:1},8,["is-open"]),Q(ce,{"is-open":f.open,"max-width":"lg",onClose:g[10]||(g[10]=h=>f.open=!1)},{default:Z(()=>[e("form",{method:"POST",action:`/${a.tenantSlug}/admin/payments/advance`,class:"w-full"},[e("input",{type:"hidden",name:"_token",value:a.csrfToken},null,8,Go),e("div",Jo,[e("div",Ko,[g[44]||(g[44]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 sm:mx-0 sm:h-10 sm:w-10 text-indigo-600"},[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1)),e("div",Qo,[g[42]||(g[42]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Post Advance Payment",-1)),g[43]||(g[43]=e("div",{class:"mt-2 text-sm text-gray-500"},"Record a payment that isn't yet tied to a specific order or bill.",-1)),e("div",Xo,[e("div",null,[g[36]||(g[36]=e("label",{class:"block text-sm font-medium text-gray-700"},"Source Type",-1)),e("div",Yo,[e("button",{type:"button",onClick:g[7]||(g[7]=h=>f.type="customer"),class:I([f.type==="customer"?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500","flex-1 border py-2 px-3 rounded-md text-sm font-medium transition-all"])},"Customer",2),e("button",{type:"button",onClick:g[8]||(g[8]=h=>f.type="supplier"),class:I([f.type==="supplier"?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500","flex-1 border py-2 px-3 rounded-md text-sm font-medium transition-all"])},"Supplier",2),e("input",{type:"hidden",name:"type",value:f.type},null,8,Zo)])]),f.type?(o(),n("div",en,[e("label",tn,l(f.type==="customer"?"Customer":"Supplier"),1),e("select",sn,[e("option",on,"Select "+l(f.type==="customer"?"Customer":"Supplier"),1),(o(!0),n(B,null,N(f.type==="customer"?a.customers:a.suppliers,h=>(o(),n("option",{key:h.id,value:h.id},l(h.name),9,nn))),128))])])):j("",!0),e("div",null,[g[38]||(g[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amount",-1)),e("div",rn,[e("div",ln,[e("span",an,l(a.currencySymbol),1)]),g[37]||(g[37]=e("input",{type:"number",name:"amount",required:"",step:"0.01",class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md border-2"},null,-1))])]),e("div",dn,[e("div",null,[g[39]||(g[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),e("input",{type:"date",name:"payment_date",value:ue(i),required:"",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md border-2"},null,8,un)]),g[40]||(g[40]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Method"),e("select",{name:"payment_method",class:"mt-1 block w-full py-2 px-3 border-2 border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[e("option",{value:"bank_transfer"},"Bank Transfer"),e("option",{value:"cash"},"Cash"),e("option",{value:"check"},"Check")])],-1))]),g[41]||(g[41]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700"},"Reference / Notes"),e("input",{type:"text",name:"notes",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md border-2"})],-1))])])])]),e("div",cn,[g[45]||(g[45]=e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm"}," Save Advance Payment ",-1)),e("button",{onClick:g[9]||(g[9]=h=>f.open=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border-2 border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],8,Wo)]),_:1},8,["is-open"]),Q(ce,{"is-open":p.open,"max-width":"lg",onClose:g[12]||(g[12]=h=>p.open=!1)},{default:Z(()=>[p.payment?(o(),n("form",{key:0,method:"POST",action:`/${a.tenantSlug}/admin/payments/${p.payment.id}/allocate`,class:"w-full"},[e("input",{type:"hidden",name:"_token",value:a.csrfToken},null,8,gn),e("div",pn,[e("div",fn,[g[51]||(g[51]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10 text-green-600"},[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",bn,[g[50]||(g[50]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Allocate Payment",-1)),e("div",xn,[g[46]||(g[46]=F(" Allocating credit from ",-1)),e("span",yn,l(p.payment.entity?.name),1),g[47]||(g[47]=e("br",null,null,-1)),g[48]||(g[48]=F(" Available: ",-1)),e("span",vn,l(a.currencySymbol)+l($(p.payment.unallocated_amount)),1)]),e("div",hn,[e("div",null,[e("label",wn,"Match to Outstanding "+l(m(p.payment)?"Order":"Invoice"),1),e("select",_n,[e("option",kn,"Select "+l(m(p.payment)?"Order":"Invoice"),1),(o(!0),n(B,null,N(k(p.payment),h=>(o(),n("option",{key:h.id,value:h.id},l(m(p.payment)?h.order_number:h.invoice_number)+" ("+l(a.currencySymbol)+l($(h.total-h.amount_paid))+" due) ",9,$n))),128))]),e("input",{type:"hidden",name:"allocatable_type",value:m(p.payment)?"Order":"SupplierInvoice"},null,8,Sn)]),e("div",null,[g[49]||(g[49]=e("label",{class:"block text-sm font-medium text-gray-700 text-left"},"Amount to Allocate",-1)),e("div",Cn,[e("div",jn,[e("span",Un,l(a.currencySymbol),1)]),e("input",{type:"number",name:"amount",required:"",step:"0.01",max:p.payment.unallocated_amount,value:p.payment.unallocated_amount,class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 pr-12 sm:text-sm border-2 border-gray-300 rounded-md"},null,8,Pn)])])])])])]),e("div",Tn,[g[52]||(g[52]=e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm"}," Allocate Credit ",-1)),e("button",{onClick:g[11]||(g[11]=h=>p.open=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border-2 border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],8,mn)):j("",!0)]),_:1},8,["is-open"])]))}},Mn={class:"relative group flex-shrink-0"},Vn=["src","alt"],On={key:1,class:"h-10 w-10 md:h-16 md:w-16 bg-gray-200 rounded flex items-center justify-center text-gray-400"},En={key:0,class:"fas fa-upload text-white text-xs md:text-sm"},qn={key:1,class:"fas fa-spinner fa-spin text-white text-xs md:text-sm"},Me={__name:"ProductImageUpload",props:{productId:{type:Number,required:!0},initialImageUrl:{type:String,default:null},productName:{type:String,default:"Product Image"},uploadUrl:{type:String,required:!0},csrfToken:{type:String,required:!0}},setup(a){const t=a,u=C(t.initialImageUrl),y=C(!1),f=C(!1),p=b=>{f.value=!1;const m=b.dataTransfer.files[0];m&&m.type.startsWith("image/")&&x(m)},i=b=>{const m=b.target.files[0];m&&x(m)},x=async b=>{y.value=!0;const m=new FormData;m.append("image",b),m.append("_token",t.csrfToken);try{const T=await(await fetch(t.uploadUrl,{method:"POST",body:m,headers:{"X-CSRF-TOKEN":t.csrfToken,Accept:"application/json"}})).json();T.success?u.value=T.url:alert("Upload failed: "+(T.message||"Unknown error"))}catch(k){console.error("Upload error:",k),alert("Upload failed. Please try again.")}finally{y.value=!1}};return(b,m)=>(o(),n("div",Mn,[u.value?(o(),n("img",{key:0,src:u.value,alt:a.productName,class:"h-10 w-10 md:h-16 md:w-16 rounded object-cover"},null,8,Vn)):(o(),n("div",On,[...m[3]||(m[3]=[e("span",{class:"text-xl md:text-2xl"},"ðŸ“¦",-1)])])),e("div",{onDragover:m[0]||(m[0]=se(k=>f.value=!0,["prevent"])),onDragleave:m[1]||(m[1]=k=>f.value=!1),onDrop:se(p,["prevent"]),onClick:m[2]||(m[2]=k=>b.$refs.fileInput.click()),class:I([f.value?"opacity-100":"opacity-0 group-hover:opacity-100","absolute inset-0 bg-black bg-opacity-60 rounded flex items-center justify-center cursor-pointer transition-opacity duration-200"])},[y.value?(o(),n("i",qn)):(o(),n("i",En))],34),e("input",{type:"file",ref:"fileInput",onChange:i,accept:"image/*",class:"hidden"},null,544)]))}},Dn={class:"content-wrapper"},In={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 md:mb-6 gap-3"},Fn={class:"flex gap-2 w-full md:w-auto"},Bn={class:"relative"},Nn={class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-100"},Ln=["href"],Rn=["href"],zn=["href"],Hn=["href"],Wn={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Gn={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Jn={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Kn=["action"],Qn=["value"],Xn={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Yn={class:"sm:flex sm:items-start"},Zn={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},er={class:"mt-2"},tr={class:"mt-4 text-xs text-gray-400"},sr=["href"],or={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},nr={class:"bg-white rounded-lg shadow p-3 md:p-6 mb-4 md:mb-6"},rr={class:"bg-white rounded-lg shadow p-2 md:p-4 mb-3 md:mb-4"},lr={class:"flex flex-col md:flex-row items-start md:items-center justify-between gap-2"},ir={class:"flex items-center gap-2 md:gap-4 w-full md:w-auto"},ar={class:"text-xs md:text-sm text-gray-600"},dr={class:"flex gap-2"},ur={class:"flex items-center justify-center min-h-screen px-4"},cr={class:"space-y-4"},mr={class:"flex gap-2 pt-4"},gr={class:"hidden lg:block bg-white rounded-lg shadow overflow-hidden"},pr={class:"min-w-full divide-y divide-gray-200"},fr={class:"bg-gray-50"},br={class:"px-6 py-3 text-left"},xr=["checked"],yr={class:"bg-white divide-y divide-gray-200"},vr={class:"px-6 py-4"},hr=["value"],wr={class:"px-6 py-4 whitespace-nowrap"},_r={class:"flex items-center"},kr={class:"text-sm font-medium text-gray-900"},$r={key:0,class:"text-xs text-yellow-600"},Sr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Cr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},jr={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},Ur={class:"px-6 py-4 whitespace-nowrap"},Pr={key:1,class:"text-sm text-gray-400"},Tr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ar={class:"px-6 py-4 whitespace-nowrap"},Mr={key:0,class:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},Vr={key:1,class:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},Or={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Er=["href"],qr=["onClick"],Dr={key:0},Ir={colspan:"9",class:"px-6 py-12 text-center text-gray-500"},Fr=["href"],Br={class:"lg:hidden space-y-3"},Nr={class:"flex items-start justify-between mb-2"},Lr={class:"flex items-center gap-2"},Rr=["value"],zr={class:"text-sm font-semibold text-gray-900 line-clamp-2"},Hr={key:0,class:"text-lg"},Wr={class:"flex gap-3"},Gr={class:"flex-1 min-w-0 space-y-1"},Jr={class:"flex items-center gap-2"},Kr={class:"text-xs font-medium text-gray-900"},Qr={class:"flex items-center gap-2"},Xr={class:"text-xs text-gray-700"},Yr={class:"flex items-center gap-2"},Zr={class:"text-sm font-bold text-gray-900"},el={class:"flex items-center gap-2"},tl={key:1,class:"text-xs text-gray-400"},sl={class:"flex gap-2 mt-3 pt-3 border-t border-gray-200"},ol=["href"],nl=["onClick"],rl={class:"mt-6"},ll={__name:"ProductList",props:{products:{type:Object,required:!0},currencySymbol:String,csrfToken:String,tenantSlug:String,routes:{type:Object,required:!0}},setup(a){const t=a,u=C(!1),y=C(!1),f=C(""),p=C([]),i=C(!1),x=X({price:"",start:"",end:""}),b=Y({get:()=>p.value.length===t.products.data.length&&t.products.data.length>0,set:V=>{V?p.value=t.products.data.map(c=>c.id):p.value=[]}}),m=()=>{},k=V=>parseFloat(V).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),T=V=>V?new Date(V).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",w=V=>V.stock_quantity<=(V.low_stock_threshold||10),A=()=>{if(!f.value){alert("Please select an action first");return}if(p.value.length===0){alert("Please select at least one product");return}if(f.value==="enable_flash_sale"){i.value=!0;return}f.value==="delete"&&!confirm(`Are you sure you want to delete ${p.value.length} products?`)||M(f.value)},$=()=>{if(!x.price||!x.start||!x.end){alert("Please fill all flash sale fields");return}M("enable_flash_sale",{flash_sale_price:x.price,flash_sale_start:x.start,flash_sale_end:x.end})},M=(V,c={})=>{const S=document.createElement("form");S.method="POST",S.action=t.routes.bulkAction;const R=(q,d)=>{const _=document.createElement("input");_.type="hidden",_.name=q,_.value=d,S.appendChild(_)};R("_token",t.csrfToken),R("action",V);for(const[q,d]of Object.entries(c))R(q,d);p.value.forEach(q=>{R("product_ids[]",q)}),document.body.appendChild(S),S.submit()},g=V=>{if(!confirm("Are you sure you want to delete this product?"))return;const c=document.createElement("form");c.method="POST",c.action=`${t.routes.base}/${V}`;const S=(R,q)=>{const d=document.createElement("input");d.type="hidden",d.name=R,d.value=q,c.appendChild(d)};S("_token",t.csrfToken),S("_method","DELETE"),document.body.appendChild(c),c.submit()},h={mounted(V,c){V.clickOutsideEvent=function(S){V===S.target||V.contains(S.target)||c.value(S,V)},document.body.addEventListener("click",V.clickOutsideEvent)},unmounted(V){document.body.removeEventListener("click",V.clickOutsideEvent)}};return(V,c)=>(o(),n("div",Dn,[e("div",In,[c[18]||(c[18]=e("h2",{class:"text-xl md:text-2xl font-bold text-gray-800"},"Products",-1)),e("div",Fn,[e("div",Bn,[v((o(),n("button",{onClick:c[0]||(c[0]=S=>u.value=!u.value),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition border-2 border-gray-300 flex items-center gap-2"},[...c[13]||(c[13]=[e("i",{class:"fas fa-file-export"},null,-1),F(" Export / Import ",-1),e("i",{class:"fas fa-chevron-down text-xs ml-1"},null,-1)])])),[[h,()=>u.value=!1]]),v(e("div",Nn,[e("a",{href:a.routes.export,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...c[14]||(c[14]=[e("i",{class:"fas fa-download mr-2"},null,-1),F(" Export CSV ",-1)])],8,Ln),e("a",{href:a.routes.template,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...c[15]||(c[15]=[e("i",{class:"fas fa-file-csv mr-2"},null,-1),F(" Download Template ",-1)])],8,Rn),e("button",{onClick:c[1]||(c[1]=S=>{y.value=!0,u.value=!1}),class:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...c[16]||(c[16]=[e("i",{class:"fas fa-file-upload mr-2"},null,-1),F(" Import CSV ",-1)])]),e("a",{href:a.routes.bulkUpload,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...c[17]||(c[17]=[e("i",{class:"fas fa-images mr-2"},null,-1),F(" Bulk Upload Images ",-1)])],8,zn)],512),[[G,u.value]])]),e("a",{href:a.routes.create,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 md:px-6 py-2 rounded-lg transition flex-1 md:flex-none text-center"}," + Add Product ",8,Hn)])]),y.value?(o(),n("div",Wn,[e("div",Gn,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:c[2]||(c[2]=S=>y.value=!1),"aria-hidden":"true"}),c[23]||(c[23]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),e("div",Jn,[e("form",{action:a.routes.import,method:"POST",enctype:"multipart/form-data"},[e("input",{type:"hidden",name:"_token",value:a.csrfToken},null,8,Qn),e("div",Xn,[e("div",Yn,[c[21]||(c[21]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("i",{class:"fas fa-file-import text-blue-600"})],-1)),e("div",Zn,[c[20]||(c[20]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},"Import Products",-1)),e("div",er,[c[19]||(c[19]=ae(`<p class="text-sm text-gray-500 mb-4"> Upload a CSV file or ZIP file (containing CSV + images folder) to import products. Existing products with matching SKU will be updated. </p><div class="bg-blue-50 border-l-4 border-blue-400 p-3 mb-4"><p class="text-xs text-blue-700 font-medium mb-1">ZIP Import Structure:</p><pre class="text-xs text-blue-600 font-mono">products.zip
â”œâ”€â”€ products.csv
â””â”€â”€ images/
    â”œâ”€â”€ SKU-001.jpg
    â””â”€â”€ SKU-002.png</pre></div><div class="mt-2"><input type="file" name="file" accept=".csv,.txt,.zip" required class="w-full border-2 border-gray-300 p-2 rounded bg-gray-50 text-sm"></div>`,3)),e("div",tr,[e("a",{href:a.routes.template,class:"text-blue-600 hover:underline"},"Don't have a template? Download here.",8,sr)])])])])]),e("div",or,[c[22]||(c[22]=e("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"}," Import Data ",-1)),e("button",{type:"button",onClick:c[3]||(c[3]=S=>y.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border-2 border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],8,Kn)])])])):j("",!0),e("div",nr,[ie(V.$slots,"filters")]),e("div",rr,[e("div",lr,[e("div",ir,[e("span",ar,l(p.value.length)+" selected ",1),e("div",dr,[v(e("select",{"onUpdate:modelValue":c[4]||(c[4]=S=>f.value=S),class:"border-2 border-gray-300 rounded-lg px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm focus:ring-2 focus:ring-indigo-500"},[...c[24]||(c[24]=[ae('<option value="">Bulk Actions</option><option value="mark_featured">â­ Mark as Featured</option><option value="unmark_featured">Remove Featured</option><option value="enable_flash_sale">ðŸ”¥ Enable Flash Sale</option><option value="disable_flash_sale">Disable Flash Sale</option><option value="activate">âœ… Activate</option><option value="deactivate">âŒ Deactivate</option><option value="delete">ðŸ—‘ï¸ Delete</option>',8)])],512),[[K,f.value]]),e("button",{type:"button",onClick:A,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-1.5 md:py-2 rounded-lg text-xs md:text-sm transition"}," Apply ")])])])]),i.value?(o(),n("div",{key:1,class:"fixed inset-0 z-50 overflow-y-auto",onClick:c[10]||(c[10]=S=>i.value=!1)},[e("div",ur,[c[29]||(c[29]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75"},null,-1)),e("div",{class:"relative bg-white rounded-lg p-6 max-w-md w-full",onClick:c[9]||(c[9]=se(()=>{},["stop"]))},[c[28]||(c[28]=e("h3",{class:"text-lg font-bold mb-4"},"Set Flash Sale",-1)),e("div",cr,[e("div",null,[c[25]||(c[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Flash Sale Price",-1)),v(e("input",{type:"number","onUpdate:modelValue":c[5]||(c[5]=S=>x.price=S),step:"0.01",class:"w-full border-2 border-gray-300 rounded-lg px-4 py-2"},null,512),[[O,x.price]])]),e("div",null,[c[26]||(c[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Date & Time",-1)),v(e("input",{type:"datetime-local","onUpdate:modelValue":c[6]||(c[6]=S=>x.start=S),class:"w-full border-2 border-gray-300 rounded-lg px-4 py-2"},null,512),[[O,x.start]])]),e("div",null,[c[27]||(c[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"End Date & Time",-1)),v(e("input",{type:"datetime-local","onUpdate:modelValue":c[7]||(c[7]=S=>x.end=S),class:"w-full border-2 border-gray-300 rounded-lg px-4 py-2"},null,512),[[O,x.end]])]),e("div",mr,[e("button",{onClick:$,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg"}," Apply Flash Sale "),e("button",{onClick:c[8]||(c[8]=S=>i.value=!1),class:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg"}," Cancel ")])])])])])):j("",!0),e("div",gr,[e("table",pr,[e("thead",fr,[e("tr",null,[e("th",br,[e("input",{type:"checkbox",checked:b.value,onChange:m,class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,xr)]),c[30]||(c[30]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Product",-1)),c[31]||(c[31]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Serial Number",-1)),c[32]||(c[32]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category",-1)),c[33]||(c[33]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Price",-1)),c[34]||(c[34]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Stock",-1)),c[35]||(c[35]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Expiry",-1)),c[36]||(c[36]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status",-1)),c[37]||(c[37]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Actions",-1))])]),e("tbody",yr,[(o(!0),n(B,null,N(a.products.data,S=>(o(),n("tr",{key:S.id},[e("td",vr,[v(e("input",{type:"checkbox",value:S.id,"onUpdate:modelValue":c[11]||(c[11]=R=>p.value=R),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,hr),[[oe,p.value]])]),e("td",wr,[e("div",_r,[Q(Me,{"product-id":S.id,"initial-image-url":S.image_url,"product-name":S.name,"upload-url":`/admin/products/${S.id}/quick-image`,"csrf-token":a.csrfToken,"tenant-slug":a.tenantSlug,class:"mr-3"},null,8,["product-id","initial-image-url","product-name","upload-url","csrf-token","tenant-slug"]),e("div",null,[e("div",kr,l(S.name),1),S.is_featured?(o(),n("span",$r,"â­ Featured")):j("",!0)])])]),e("td",Sr,l(S.sku),1),e("td",Cr,l(S.category?.name||"-"),1),e("td",jr,l(a.currencySymbol)+l(k(S.price)),1),e("td",Ur,[S.track_inventory?(o(),n("span",{key:0,class:I(["text-sm",w(S)?"text-red-600 font-bold":"text-gray-900"])},l(S.stock_quantity),3)):(o(),n("span",Pr,"N/A"))]),e("td",Tr,l(T(S.expiry_date)),1),e("td",Ar,[S.is_active?(o(),n("span",Mr,"Active")):(o(),n("span",Vr,"Inactive"))]),e("td",Or,[e("a",{href:`${a.routes.base}/${S.id}/edit`,class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,Er),e("button",{type:"button",onClick:R=>g(S.id),class:"text-red-600 hover:text-red-900"},"Delete",8,qr)])]))),128)),a.products.data.length===0?(o(),n("tr",Dr,[e("td",Ir,[c[38]||(c[38]=F(" No products found. ",-1)),e("a",{href:a.routes.create,class:"text-indigo-600 hover:underline"},"Create your first product",8,Fr)])])):j("",!0)])])]),e("div",Br,[(o(!0),n(B,null,N(a.products.data,S=>(o(),n("div",{key:S.id,class:"bg-white rounded-lg shadow p-3"},[e("div",Nr,[e("div",Lr,[v(e("input",{type:"checkbox",value:S.id,"onUpdate:modelValue":c[12]||(c[12]=R=>p.value=R),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,Rr),[[oe,p.value]]),e("h3",zr,l(S.name),1)]),S.is_featured?(o(),n("span",Hr,"â­")):j("",!0)]),e("div",Wr,[Q(Me,{"product-id":S.id,"initial-image-url":S.image_url,"product-name":S.name,"upload-url":`/admin/products/${S.id}/quick-image`,"csrf-token":a.csrfToken,"tenant-slug":a.tenantSlug},null,8,["product-id","initial-image-url","product-name","upload-url","csrf-token","tenant-slug"]),e("div",Gr,[e("div",Jr,[c[39]||(c[39]=e("span",{class:"text-xs text-gray-500"},"S/N:",-1)),e("span",Kr,l(S.sku),1)]),e("div",Qr,[c[40]||(c[40]=e("span",{class:"text-xs text-gray-500"},"Category:",-1)),e("span",Xr,l(S.category?.name||"-"),1)]),e("div",Yr,[c[41]||(c[41]=e("span",{class:"text-xs text-gray-500"},"Price:",-1)),e("span",Zr,l(a.currencySymbol)+l(k(S.price)),1)]),e("div",el,[c[42]||(c[42]=e("span",{class:"text-xs text-gray-500"},"Stock:",-1)),S.track_inventory?(o(),n("span",{key:0,class:I(["text-xs",w(S)?"text-red-600 font-bold":"text-gray-900"])},l(S.stock_quantity)+" units ",3)):(o(),n("span",tl,"N/A"))])])]),e("div",sl,[e("a",{href:`${a.routes.base}/${S.id}/edit`,class:"flex-1 text-center bg-indigo-50 hover:bg-indigo-100 text-indigo-600 px-3 py-2 rounded text-sm font-medium transition"},[...c[43]||(c[43]=[e("i",{class:"fas fa-edit mr-1"},null,-1),F(" Edit ",-1)])],8,ol),e("button",{type:"button",onClick:R=>g(S.id),class:"flex-1 text-center bg-red-50 hover:bg-red-100 text-red-600 px-3 py-2 rounded text-sm font-medium transition"},[...c[44]||(c[44]=[e("i",{class:"fas fa-trash mr-1"},null,-1),F(" Delete ",-1)])],8,nl)])]))),128))]),e("div",rl,[ie(V.$slots,"pagination")])]))}},il={class:"max-w-4xl mx-auto px-3 md:px-0"},al={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 md:mb-6 gap-2"},dl={class:"text-xl md:text-2xl font-bold text-gray-800"},ul=["href"],cl=["action"],ml=["value"],gl={key:0,type:"hidden",name:"_method",value:"PUT"},pl={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fl={class:"md:col-span-2"},bl={key:0,class:"text-red-500 text-xs mt-1"},xl={class:"flex gap-2"},yl=["value"],vl={class:"flex gap-2"},hl=["value"],wl={key:0,class:"text-red-500 text-xs mt-1"},_l={key:0,class:"text-red-500 text-xs mt-1"},kl={key:0,class:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-red-50 rounded-lg border border-red-100"},$l={class:"md:col-span-2"},Sl={class:"md:col-span-2"},Cl={class:"md:col-span-2 border-t pt-6"},jl={class:"grid grid-cols-1 gap-4"},Ul={class:"flex items-center"},Pl={key:0,class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},Tl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Al={class:"block text-sm font-medium text-gray-700 mb-1"},Ml={class:"text-xs text-gray-500"},Vl=["name","onUpdate:modelValue"],Ol={class:"mt-4 p-3 bg-indigo-50 rounded border border-indigo-200"},El={class:"text-sm text-indigo-800"},ql={key:1},Dl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Il={key:1,class:"md:col-span-2 border-t pt-6"},Fl={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Bl=["src"],Nl={key:0,class:"absolute top-2 left-2 bg-indigo-600 text-white text-xs px-2 py-1 rounded"},Ll={class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition flex items-center justify-center rounded-lg"},Rl=["href","data-id"],zl=["id","action"],Hl=["value"],Wl={class:"md:col-span-2 border-t pt-6"},Gl={class:"block text-sm font-medium text-gray-700 mb-2"},Jl={class:"flex flex-col gap-4"},Kl={class:"flex gap-2"},Ql={class:"md:col-span-2 border-t pt-6"},Xl={class:"flex items-center space-x-6"},Yl={class:"flex items-center"},Zl={class:"flex items-center"},ei={class:"mt-6 md:mt-8 flex flex-col sm:flex-row justify-end gap-3 sm:gap-4"},ti=["href"],si={type:"submit",class:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition"},oi={class:"mt-4"},ni={key:0,class:"text-red-500 text-xs mt-1"},ri={class:"mt-4 flex justify-end gap-2"},li={class:"mt-4"},ii={key:0,class:"text-red-500 text-xs mt-1"},ai={class:"mt-4 flex justify-end gap-2"},di={class:"relative bg-black rounded-lg overflow-hidden aspect-video mb-4"},ui=["src"],ci={class:"flex justify-center gap-4"},mi={__name:"ProductForm",props:{isEdit:{type:Boolean,default:!1},initialProduct:{type:Object,default:()=>({})},oldInput:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})},categories:{type:Array,default:()=>[]},brands:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]},existingImages:{type:Array,default:()=>[]},actionUrl:{type:String,required:!0},csrfToken:{type:String,required:!0},routes:{type:Object,required:!0}},setup(a){const t=a,u=C([...t.categories]),y=C([...t.brands]),f=s=>{if(t.oldInput.warehouse_stock&&t.oldInput.warehouse_stock[s])return t.oldInput.warehouse_stock[s];if(t.initialProduct.warehouses){const r=t.initialProduct.warehouses.find(U=>U.id===s);return r?r.pivot.quantity:0}return 0},p={};t.warehouses.forEach(s=>{p[s.id]=f(s.id)});const i=X({name:t.oldInput.name||t.initialProduct.name||"",category_id:t.oldInput.category_id||t.initialProduct.category_id||"",brand_id:t.oldInput.brand_id||t.initialProduct.brand_id||"",sku:t.oldInput.sku||t.initialProduct.sku||"",price:t.oldInput.price||t.initialProduct.price||"",compare_at_price:t.oldInput.compare_at_price||t.initialProduct.compare_at_price||"",cost_price:t.oldInput.cost_price||t.initialProduct.cost_price||"",barcode:t.oldInput.barcode||t.initialProduct.barcode||"",flash_sale_price:t.oldInput.flash_sale_price||t.initialProduct.flash_sale_price||"",flash_sale_end_date:t.oldInput.flash_sale_end_date||(t.initialProduct.flash_sale_end_date?t.initialProduct.flash_sale_end_date.substring(0,16):"")||"",short_description:t.oldInput.short_description||t.initialProduct.short_description||"",description:t.oldInput.description||t.initialProduct.description||"",track_inventory:t.oldInput.track_inventory?!0:t.initialProduct.track_inventory!==void 0?!!t.initialProduct.track_inventory:!1,stock_quantity:t.oldInput.stock_quantity??t.initialProduct.stock_quantity??0,warehouse_stock:p,low_stock_threshold:t.oldInput.low_stock_threshold??t.initialProduct.low_stock_threshold??10,expiry_date:t.oldInput.expiry_date||(t.initialProduct.expiry_date?t.initialProduct.expiry_date.substring(0,10):"")||"",is_active:t.oldInput.is_active!==void 0?!!t.oldInput.is_active:t.initialProduct.is_active!==void 0?!!t.initialProduct.is_active:!0,is_featured:t.oldInput.is_featured!==void 0?!!t.oldInput.is_featured:!!t.initialProduct.is_featured}),x=Y(()=>Object.values(i.warehouse_stock).reduce((s,r)=>s+(parseInt(r)||0),0)),b=C(!1),m=C(""),k=C(""),T=C(!1),w=C(""),A=C(""),$=C(!1),M=C(null),g=C(null),h=C(null),V=C(null);let c=null;const S=s=>t.errors[s]?"border-red-500":"border-gray-300",R=async()=>{if(!m.value.trim()){k.value="Name is required";return}k.value="";try{const r=await(await fetch(t.routes.storeCategory,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t.csrfToken,Accept:"application/json"},body:JSON.stringify({name:m.value,is_active:!0})})).json();r.success?(u.value.push(r.category),i.category_id=r.category.id,b.value=!1,m.value=""):k.value=r.message||"Error"}catch{k.value="Error occurred"}},q=async()=>{if(!w.value.trim()){A.value="Name is required";return}A.value="";try{const r=await(await fetch(t.routes.storeBrand,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t.csrfToken,Accept:"application/json"},body:JSON.stringify({name:w.value,is_active:!0})})).json();r.success?(y.value.push(r.brand),i.brand_id=r.brand.id,T.value=!1,w.value=""):A.value=r.message||"Error"}catch{A.value="Error occurred"}},d=async()=>{$.value=!0,V.value=null;try{c=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),setTimeout(()=>{M.value&&(M.value.srcObject=c)},100)}catch{alert("Could not access camera."),$.value=!1}},_=()=>{c&&c.getTracks().forEach(s=>s.stop()),$.value=!1,c=null},z=()=>{const s=M.value,r=g.value;r.width=s.videoWidth,r.height=s.videoHeight,r.getContext("2d").drawImage(s,0,0,r.width,r.height),V.value=r.toDataURL("image/jpeg")},H=()=>{V.value=null},L=()=>{if(!V.value)return;const s=atob(V.value.split(",")[1]),r=V.value.split(",")[0].split(":")[1].split(";")[0],U=new ArrayBuffer(s.length),ee=new Uint8Array(U);for(let re=0;re<s.length;re++)ee[re]=s.charCodeAt(re);const _e=new Blob([U],{type:r}),te=new File([_e],"camera-capture-"+Date.now()+".jpg",{type:r}),me=new DataTransfer;h.value.files&&Array.from(h.value.files).forEach(re=>me.items.add(re)),me.items.add(te),h.value.files=me.files,_()};return(s,r)=>(o(),n("div",il,[e("div",al,[e("h2",dl,l(a.isEdit?"Edit Product":"Add New Product"),1),e("a",{href:a.routes.index,class:"text-sm text-gray-600 hover:text-gray-900"},"â† Back to Products",8,ul)]),e("form",{action:a.actionUrl,method:"POST",enctype:"multipart/form-data",class:"bg-white rounded-lg shadow p-4 md:p-8"},[e("input",{type:"hidden",name:"_token",value:a.csrfToken},null,8,ml),a.isEdit?(o(),n("input",gl)):j("",!0),e("div",pl,[e("div",fl,[r[26]||(r[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Name *",-1)),v(e("input",{type:"text",name:"name","onUpdate:modelValue":r[0]||(r[0]=U=>i.name=U),required:"",class:I(["w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-indigo-500",S("name")])},null,2),[[O,i.name]]),a.errors.name?(o(),n("p",bl,l(a.errors.name[0]),1)):j("",!0)]),e("div",null,[r[29]||(r[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category",-1)),e("div",xl,[v(e("select",{name:"category_id","onUpdate:modelValue":r[1]||(r[1]=U=>i.category_id=U),class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[r[27]||(r[27]=e("option",{value:""},"Select Category",-1)),(o(!0),n(B,null,N(u.value,U=>(o(),n("option",{key:U.id,value:U.id},l(U.name),9,yl))),128))],512),[[K,i.category_id]]),e("button",{type:"button",onClick:r[2]||(r[2]=U=>b.value=!0),class:"px-3 py-2 bg-gray-100 hover:bg-gray-200 border-2 border-gray-300 rounded-lg text-gray-600"},[...r[28]||(r[28]=[e("i",{class:"fas fa-plus"},null,-1)])])])]),e("div",null,[r[32]||(r[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Brand",-1)),e("div",vl,[v(e("select",{name:"brand_id","onUpdate:modelValue":r[3]||(r[3]=U=>i.brand_id=U),class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[r[30]||(r[30]=e("option",{value:""},"Select Brand",-1)),(o(!0),n(B,null,N(y.value,U=>(o(),n("option",{key:U.id,value:U.id},l(U.name),9,hl))),128))],512),[[K,i.brand_id]]),e("button",{type:"button",onClick:r[4]||(r[4]=U=>T.value=!0),class:"px-3 py-2 bg-gray-100 hover:bg-gray-200 border-2 border-gray-300 rounded-lg text-gray-600"},[...r[31]||(r[31]=[e("i",{class:"fas fa-plus"},null,-1)])])])]),e("div",null,[r[33]||(r[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Serial Number (Auto-generated if empty)",-1)),v(e("input",{type:"text",name:"sku","onUpdate:modelValue":r[5]||(r[5]=U=>i.sku=U),class:I(["w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-indigo-500",S("sku")])},null,2),[[O,i.sku]]),a.errors.sku?(o(),n("p",wl,l(a.errors.sku[0]),1)):j("",!0)]),e("div",null,[r[34]||(r[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Selling Price *",-1)),v(e("input",{type:"number",name:"price","onUpdate:modelValue":r[6]||(r[6]=U=>i.price=U),step:"0.01",min:"0",required:"",class:I(["w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-indigo-500",S("price")])},null,2),[[O,i.price]]),a.errors.price?(o(),n("p",_l,l(a.errors.price[0]),1)):j("",!0)]),a.isEdit?(o(),n("div",kl,[e("div",null,[r[35]||(r[35]=e("label",{class:"block text-sm font-medium text-red-600 mb-2"},"âš¡ Flash Sale Price",-1)),v(e("input",{type:"number",name:"flash_sale_price","onUpdate:modelValue":r[7]||(r[7]=U=>i.flash_sale_price=U),step:"0.01",min:"0",class:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 bg-white",placeholder:"Optional override"},null,512),[[O,i.flash_sale_price]])]),e("div",null,[r[36]||(r[36]=e("label",{class:"block text-sm font-medium text-red-600 mb-2"},"âš¡ Flash Sale Ends At",-1)),v(e("input",{type:"datetime-local",name:"flash_sale_end_date","onUpdate:modelValue":r[8]||(r[8]=U=>i.flash_sale_end_date=U),class:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 bg-white"},null,512),[[O,i.flash_sale_end_date]])])])):j("",!0),e("div",null,[r[37]||(r[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Compare At Price",-1)),v(e("input",{type:"number",name:"compare_at_price","onUpdate:modelValue":r[9]||(r[9]=U=>i.compare_at_price=U),step:"0.01",min:"0",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[O,i.compare_at_price]])]),e("div",null,[r[38]||(r[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cost Price",-1)),v(e("input",{type:"number",name:"cost_price","onUpdate:modelValue":r[10]||(r[10]=U=>i.cost_price=U),step:"0.01",min:"0",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[O,i.cost_price]])]),e("div",null,[r[39]||(r[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Barcode",-1)),v(e("input",{type:"text",name:"barcode","onUpdate:modelValue":r[11]||(r[11]=U=>i.barcode=U),class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[O,i.barcode]])]),e("div",$l,[r[40]||(r[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Short Description",-1)),v(e("textarea",{name:"short_description","onUpdate:modelValue":r[12]||(r[12]=U=>i.short_description=U),rows:"2",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[O,i.short_description]])]),e("div",Sl,[r[41]||(r[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),v(e("textarea",{name:"description","onUpdate:modelValue":r[13]||(r[13]=U=>i.description=U),rows:"4",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[O,i.description]])]),e("div",Cl,[r[49]||(r[49]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Inventory",-1)),e("div",jl,[e("div",null,[e("label",Ul,[v(e("input",{type:"checkbox",name:"track_inventory",value:"1","onUpdate:modelValue":r[14]||(r[14]=U=>i.track_inventory=U),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2"},null,512),[[oe,i.track_inventory]]),r[42]||(r[42]=e("span",{class:"text-sm font-medium text-gray-700"},"Track Inventory",-1))])]),a.warehouses.length>0?(o(),n("div",Pl,[r[45]||(r[45]=e("h4",{class:"text-sm font-bold text-gray-700 mb-3"},"Stock by Warehouse",-1)),e("div",Tl,[(o(!0),n(B,null,N(a.warehouses,U=>(o(),n("div",{key:U.id},[e("label",Al,[F(l(U.name)+" ",1),e("span",Ml,"("+l(U.code)+")",1)]),v(e("input",{type:"number",name:`warehouse_stock[${U.id}]`,"onUpdate:modelValue":ee=>i.warehouse_stock[U.id]=ee,min:"0",class:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,8,Vl),[[O,i.warehouse_stock[U.id]]])]))),128))]),e("div",Ol,[e("p",El,[r[43]||(r[43]=e("strong",null,"Total Stock:",-1)),e("span",null,l(x.value),1),r[44]||(r[44]=F(" units ",-1))])])])):(o(),n("div",ql,[r[46]||(r[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Stock Quantity",-1)),v(e("input",{type:"number",name:"stock_quantity","onUpdate:modelValue":r[15]||(r[15]=U=>i.stock_quantity=U),min:"0",ref:"totalStockInput",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[O,i.stock_quantity]])])),e("div",Dl,[e("div",null,[r[47]||(r[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Low Stock Threshold",-1)),v(e("input",{type:"number",name:"low_stock_threshold","onUpdate:modelValue":r[16]||(r[16]=U=>i.low_stock_threshold=U),min:"0",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[O,i.low_stock_threshold]])]),e("div",null,[r[48]||(r[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Expiry Date",-1)),v(e("input",{type:"date",name:"expiry_date","onUpdate:modelValue":r[17]||(r[17]=U=>i.expiry_date=U),class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[O,i.expiry_date]])])])])]),a.isEdit&&a.existingImages.length>0?(o(),n("div",Il,[r[52]||(r[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Images",-1)),e("div",Fl,[(o(!0),n(B,null,N(a.existingImages,U=>(o(),n("div",{key:U.id,class:"relative group"},[e("img",{src:U.url,class:"h-32 w-full object-cover rounded-lg border border-gray-200"},null,8,Bl),U.is_primary?(o(),n("span",Nl,"Primary")):j("",!0),e("div",Ll,[e("a",{href:`${a.routes.deleteImageBase}/${U.id}`,onclick:"event.preventDefault(); if(confirm('Delete this image?')) document.getElementById('delete-img-' + this.getAttribute('data-id')).submit()","data-id":U.id,class:"text-white hover:text-red-400 cursor-pointer"},[...r[50]||(r[50]=[e("i",{class:"fas fa-trash text-2xl"},null,-1)])],8,Rl)])]))),128))]),(o(!0),n(B,null,N(a.existingImages,U=>(o(),n("div",{key:`form-${U.id}`,class:"hidden"},[e("form",{id:`delete-img-${U.id}`,action:`${a.routes.deleteImageBase}/${U.id}`,method:"POST"},[e("input",{type:"hidden",name:"_token",value:a.csrfToken},null,8,Hl),r[51]||(r[51]=e("input",{type:"hidden",name:"_method",value:"DELETE"},null,-1))],8,zl)]))),128))])):j("",!0),e("div",Wl,[e("label",Gl,l(a.isEdit?"Add More Images":"Product Images"),1),e("div",Jl,[e("div",Kl,[e("input",{type:"file",ref_key:"imageInput",ref:h,name:"images[]",multiple:"",accept:"image/*",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),e("button",{type:"button",onClick:d,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2 whitespace-nowrap"},[...r[53]||(r[53]=[e("i",{class:"fas fa-camera"},null,-1),F(" Use Camera ",-1)])])]),r[54]||(r[54]=e("p",{class:"text-sm text-gray-500"},"You can select multiple images or capture them from your camera. First image will be the primary image.",-1))])]),e("div",Ql,[e("div",Xl,[e("label",Yl,[v(e("input",{type:"checkbox",name:"is_active",value:"1","onUpdate:modelValue":r[18]||(r[18]=U=>i.is_active=U),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2"},null,512),[[oe,i.is_active]]),r[55]||(r[55]=e("span",{class:"text-sm font-medium text-gray-700"},"Active",-1))]),e("label",Zl,[v(e("input",{type:"checkbox",name:"is_featured",value:"1","onUpdate:modelValue":r[19]||(r[19]=U=>i.is_featured=U),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2"},null,512),[[oe,i.is_featured]]),r[56]||(r[56]=e("span",{class:"text-sm font-medium text-gray-700"},"Featured Product",-1))])])])]),e("div",ei,[e("a",{href:a.routes.index,class:"px-6 py-2 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-center"}," Cancel ",8,ti),e("button",si,l(a.isEdit?"Update Product":"Create Product"),1)])],8,cl),Q(ce,{show:b.value,title:"Create New Category",onClose:r[22]||(r[22]=U=>b.value=!1)},{default:Z(()=>[e("div",oi,[r[57]||(r[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),v(e("input",{type:"text","onUpdate:modelValue":r[20]||(r[20]=U=>m.value=U),onKeydown:Ce(R,["enter"]),class:"w-full px-3 py-2 border-2 border-gray-300 rounded-md"},null,544),[[O,m.value]]),k.value?(o(),n("p",ni,l(k.value),1)):j("",!0)]),e("div",ri,[e("button",{onClick:r[21]||(r[21]=U=>b.value=!1),class:"px-4 py-2 bg-gray-200 rounded text-gray-700"},"Cancel"),e("button",{onClick:R,class:"px-4 py-2 bg-indigo-600 text-white rounded"},"Create")])]),_:1},8,["show"]),Q(ce,{show:T.value,title:"Create New Brand",onClose:r[25]||(r[25]=U=>T.value=!1)},{default:Z(()=>[e("div",li,[r[58]||(r[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),v(e("input",{type:"text","onUpdate:modelValue":r[23]||(r[23]=U=>w.value=U),onKeydown:Ce(q,["enter"]),class:"w-full px-3 py-2 border-2 border-gray-300 rounded-md"},null,544),[[O,w.value]]),A.value?(o(),n("p",ii,l(A.value),1)):j("",!0)]),e("div",ai,[e("button",{onClick:r[24]||(r[24]=U=>T.value=!1),class:"px-4 py-2 bg-gray-200 rounded text-gray-700"},"Cancel"),e("button",{onClick:q,class:"px-4 py-2 bg-indigo-600 text-white rounded"},"Create")])]),_:1},8,["show"]),Q(ce,{show:$.value,title:"Capture Image",onClose:_,"max-width":"max-w-2xl"},{default:Z(()=>[e("div",di,[e("video",{ref_key:"videoElement",ref:M,class:"w-full h-full object-contain",autoplay:"",playsinline:""},null,512),e("canvas",{ref_key:"canvasElement",ref:g,class:"hidden"},null,512),V.value?(o(),n("img",{key:0,src:V.value,class:"absolute inset-0 w-full h-full object-contain bg-black"},null,8,ui)):j("",!0)]),e("div",ci,[V.value?(o(),n(B,{key:1},[e("button",{onClick:H,class:"px-6 py-2 bg-gray-600 text-white rounded-full"},[...r[60]||(r[60]=[e("i",{class:"fas fa-redo mr-2"},null,-1),F(" Retake ",-1)])]),e("button",{onClick:L,class:"px-6 py-2 bg-green-600 text-white rounded-full"},[...r[61]||(r[61]=[e("i",{class:"fas fa-check mr-2"},null,-1),F(" Use Photo ",-1)])])],64)):(o(),n("button",{key:0,onClick:z,class:"px-6 py-2 bg-indigo-600 text-white rounded-full"},[...r[59]||(r[59]=[e("i",{class:"fas fa-camera mr-2"},null,-1),F(" Capture ",-1)])]))])]),_:1},8,["show"])]))}},gi={class:"bg-white rounded-lg shadow p-8"},pi={class:"text-center"},fi={class:"text-sm text-gray-500 mt-2"},bi={key:0,class:"mt-6"},xi={class:"text-lg font-medium text-gray-900 mb-4"},yi={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},vi=["src"],hi={class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded flex items-center justify-center"},wi=["onClick"],_i={class:"text-xs text-gray-600 mt-1 truncate"},ki={class:"text-xs font-mono text-indigo-600"},$i={key:0,class:"mt-6 bg-white rounded-lg shadow p-6"},Si={class:"grid grid-cols-3 gap-4 mb-6"},Ci={class:"bg-green-50 p-4 rounded-lg"},ji={class:"text-2xl font-bold text-green-700"},Ui={class:"bg-yellow-50 p-4 rounded-lg"},Pi={class:"text-2xl font-bold text-yellow-700"},Ti={class:"bg-red-50 p-4 rounded-lg"},Ai={class:"text-2xl font-bold text-red-700"},Mi={key:0,class:"mb-6"},Vi={class:"space-y-2"},Oi={class:"flex items-center"},Ei=["src"],qi={class:"text-sm font-medium text-gray-900"},Di={class:"text-xs text-gray-500"},Ii={key:1,class:"mb-6"},Fi={class:"space-y-2"},Bi={class:"text-sm font-medium text-gray-900"},Ni={class:"text-xs text-gray-500"},Li={key:2},Ri={class:"space-y-2"},zi={class:"text-sm font-medium text-gray-900"},Hi={class:"text-xs text-red-600"},Wi={__name:"BulkUploadManager",props:{uploadUrl:{type:String,required:!0},csrfToken:{type:String,required:!0}},setup(a){const t=a,u=C([]),y=C(!1),f=C(!1),p=C(0),i=C(null),x=C(null),b=M=>{const g=M.replace(/\.[^/.]+$/,""),h=[/^([A-Z0-9\-_]+)$/i,/^([A-Z0-9\-_]+?)[\-_](front|back|side|image|photo|main|\d+)/i,/[_\-]([A-Z0-9\-_]+)$/i];for(let V of h){const c=g.match(V);if(c)return c[1].toUpperCase()}return g.toUpperCase()},m=M=>{M.filter(h=>h.type.startsWith("image/")).forEach(h=>{const V=new FileReader;V.onload=c=>{u.value.push({file:h,name:h.name,preview:c.target.result,sku:b(h.name)})},V.readAsDataURL(h)})},k=M=>{y.value=!1;const g=Array.from(M.dataTransfer.files);m(g)},T=M=>{const g=Array.from(M.target.files);m(g),M.target.value=""},w=M=>{u.value.splice(M,1)},A=async()=>{if(u.value.length===0)return;f.value=!0,p.value=0;const M=new FormData;u.value.forEach((g,h)=>{M.append(`images[${h}]`,g.file)}),p.value=u.value.length;try{const h=await(await fetch(t.uploadUrl,{method:"POST",body:M,headers:{"X-CSRF-TOKEN":t.csrfToken,Accept:"application/json"}})).json();h.success?(i.value=h,u.value=[]):alert("Upload failed: "+(h.message||"Unknown error"))}catch(g){console.error("Upload error:",g),alert("Upload failed. Please try again.")}finally{f.value=!1}},$=()=>{u.value=[],i.value=null,p.value=0};return(M,g)=>(o(),n(B,null,[e("div",gi,[e("div",{onDragover:g[0]||(g[0]=se(h=>y.value=!0,["prevent"])),onDragleave:g[1]||(g[1]=h=>y.value=!1),onDrop:se(k,["prevent"]),onClick:g[2]||(g[2]=h=>M.$refs.fileInput.click()),class:I([y.value?"border-indigo-500 bg-indigo-50":"border-gray-300","border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-colors duration-200"])},[v(e("div",null,[...g[3]||(g[3]=[e("i",{class:"fas fa-cloud-upload-alt text-6xl text-gray-400 mb-4"},null,-1),e("p",{class:"text-lg font-medium text-gray-700 mb-2"},"Drag and drop images here",-1),e("p",{class:"text-sm text-gray-500"},"or click to browse",-1)])],512),[[G,!f.value&&u.value.length===0]]),v(e("div",pi,[g[4]||(g[4]=e("i",{class:"fas fa-spinner fa-spin text-6xl text-indigo-600 mb-4"},null,-1)),g[5]||(g[5]=e("p",{class:"text-lg font-medium text-gray-700"},"Uploading images...",-1)),e("p",fi,"Processing "+l(p.value)+" of "+l(u.value.length)+" images",1)],512),[[G,f.value]]),e("input",{type:"file",ref_key:"fileInput",ref:x,onChange:T,accept:"image/*",multiple:"",class:"hidden"},null,544)],34),u.value.length>0&&!f.value?(o(),n("div",bi,[e("h3",xi,"Selected Images ("+l(u.value.length)+")",1),e("div",yi,[(o(!0),n(B,null,N(u.value,(h,V)=>(o(),n("div",{key:V,class:"relative group"},[e("img",{src:h.preview,class:"w-full h-24 object-cover rounded border"},null,8,vi),e("div",hi,[e("button",{onClick:se(c=>w(V),["stop"]),class:"text-white hover:text-red-400"},[...g[6]||(g[6]=[e("i",{class:"fas fa-times-circle text-2xl"},null,-1)])],8,wi)]),e("p",_i,l(h.name),1),e("p",ki,l(h.sku),1)]))),128))]),e("button",{onClick:A,class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 rounded-lg transition"},[g[7]||(g[7]=e("i",{class:"fas fa-upload mr-2"},null,-1)),F(" Upload "+l(u.value.length)+" Images ",1)])])):j("",!0)]),i.value?(o(),n("div",$i,[g[16]||(g[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Upload Results",-1)),e("div",Si,[e("div",Ci,[g[8]||(g[8]=e("p",{class:"text-sm text-green-600 font-medium"},"Matched",-1)),e("p",ji,l(i.value.summary.matched||0),1)]),e("div",Ui,[g[9]||(g[9]=e("p",{class:"text-sm text-yellow-600 font-medium"},"Unmatched",-1)),e("p",Pi,l(i.value.summary.unmatched||0),1)]),e("div",Ti,[g[10]||(g[10]=e("p",{class:"text-sm text-red-600 font-medium"},"Errors",-1)),e("p",Ai,l(i.value.summary.errors||0),1)])]),i.value.results.matched&&i.value.results.matched.length>0?(o(),n("div",Mi,[g[12]||(g[12]=e("h4",{class:"font-medium text-green-700 mb-2"},"âœ“ Successfully Uploaded",-1)),e("div",Vi,[(o(!0),n(B,null,N(i.value.results.matched,h=>(o(),n("div",{key:h.filename,class:"flex items-center justify-between bg-green-50 p-3 rounded"},[e("div",Oi,[e("img",{src:h.url,class:"w-12 h-12 object-cover rounded mr-3"},null,8,Ei),e("div",null,[e("p",qi,l(h.product_name),1),e("p",Di,"SKU: "+l(h.sku)+" â€¢ "+l(h.filename),1)])]),g[11]||(g[11]=e("i",{class:"fas fa-check-circle text-green-600"},null,-1))]))),128))])])):j("",!0),i.value.results.unmatched&&i.value.results.unmatched.length>0?(o(),n("div",Ii,[g[14]||(g[14]=e("h4",{class:"font-medium text-yellow-700 mb-2"},"âš  No Matching Product Found",-1)),e("div",Fi,[(o(!0),n(B,null,N(i.value.results.unmatched,h=>(o(),n("div",{key:h.filename,class:"flex items-center justify-between bg-yellow-50 p-3 rounded"},[e("div",null,[e("p",Bi,l(h.filename),1),e("p",Ni,"Extracted SKU: "+l(h.sku),1)]),g[13]||(g[13]=e("i",{class:"fas fa-exclamation-triangle text-yellow-600"},null,-1))]))),128))])])):j("",!0),i.value.results.errors&&i.value.results.errors.length>0?(o(),n("div",Li,[g[15]||(g[15]=e("h4",{class:"font-medium text-red-700 mb-2"},"âœ— Upload Errors",-1)),e("div",Ri,[(o(!0),n(B,null,N(i.value.results.errors,h=>(o(),n("div",{key:h.filename,class:"bg-red-50 p-3 rounded"},[e("p",zi,l(h.filename),1),e("p",Hi,l(h.error),1)]))),128))])])):j("",!0),e("button",{onClick:$,class:"mt-6 w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 rounded-lg transition"}," Upload More Images ")])):j("",!0)],64))}},Gi={class:"mb-2 md:mb-6 flex flex-col gap-1.5 md:flex-row md:gap-4"},Ji=["value"],Ki={key:0,class:"fixed inset-0 bg-black z-50 flex flex-col"},Qi={class:"flex-1 relative"},Xi={key:1,class:"flex justify-center py-10"},Yi={key:2,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-1.5 md:gap-4"},Zi=["onClick"],ea={class:"aspect-square relative mb-1.5 md:mb-3 bg-gray-100 rounded overflow-hidden"},ta=["src"],sa={class:"font-semibold text-gray-800 text-[10px] md:text-sm mb-0.5 md:mb-1 leading-tight line-clamp-2"},oa={class:"text-indigo-600 font-bold text-[10px] md:text-base"},na={class:"w-[30%] bg-white flex flex-col h-full shadow-xl z-10 border-l border-gray-200"},ra={class:"p-3 md:p-6 border-b border-gray-100 bg-gray-50 flex items-center justify-between"},la={class:"text-lg md:text-xl font-bold text-gray-800 flex items-center gap-2"},ia={class:"text-xs md:text-sm font-normal text-gray-500 bg-white px-2 py-1 rounded border"},aa={class:"flex items-center gap-2"},da={class:"px-3 md:px-6 pt-3 md:pt-4"},ua=["value"],ca={class:"flex-1 overflow-y-auto p-2 md:p-4 space-y-2 md:space-y-3"},ma={key:0,class:"h-full flex flex-col items-center justify-center text-gray-400"},ga={class:"flex items-center justify-between mb-2"},pa={class:"flex-1 min-w-0 mr-2"},fa=["title"],ba={class:"text-xs text-gray-500"},xa={class:"flex items-center space-x-2"},ya=["onClick"],va={class:"font-bold w-6 text-center text-sm"},ha=["onClick"],wa={class:"text-right ml-2 w-16 md:w-20"},_a={class:"font-bold text-gray-800 text-xs md:text-sm"},ka={class:"flex justify-between items-center"},$a=["onClick"],Sa=["onUpdate:modelValue"],Ca=["value"],ja={class:"p-3 md:p-6 bg-gray-50 border-t border-gray-200 space-y-2"},Ua={class:"flex justify-between text-gray-600 text-sm"},Pa={class:"flex justify-between text-gray-600 text-sm"},Ta={class:"flex justify-between text-lg md:text-xl font-bold text-gray-900 border-t border-gray-200 pt-2 mt-2"},Aa={class:"mt-4"},Ma=["value"],Va={class:"mt-4"},Oa={class:"relative rounded-md shadow-sm"},Ea={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},qa={class:"text-gray-500 text-sm"},Da={class:"text-lg md:text-xl font-bold"},Ia={key:0,class:"text-xs text-red-500 mt-1 text-right"},Fa=["disabled"],Ba={key:0},Na={key:1,class:"animate-pulse flex items-center gap-2"},La={key:1,class:"mt-2 text-center text-xs text-orange-600 font-bold"},Ra={__name:"PosSystem",props:{initialCategories:{type:Array,default:()=>[]},initialProducts:{type:Array,default:()=>[]},initialPaymentTypes:{type:Array,default:()=>[]},initialCustomers:{type:Array,default:()=>[]},taxCodes:{type:Array,default:()=>[]},taxRate:{type:[Number,String],default:0},enableTax:{type:Boolean,default:!1},currencySymbol:{type:String,default:"$"},tenantId:{type:[String,Number],required:!0},tenantName:{type:String,default:"Store"},routes:{type:Object,required:!0},csrfToken:{type:String,required:!0}},setup(a){const t=a,u=C(null),y=C([]),f=C(t.initialCategories||[]),p=C(t.initialPaymentTypes||[]),i=C(t.initialCustomers||[]),x=C([]),b=C(""),m=C(""),k=C(null),T=C(""),w=C(""),A=C(!1),$=C(!0),M=C(navigator.onLine),g=C(0),h=C(!1),V=C(!1),c=C(null);let S=null,R="",q=null,d=null,_=null;const z=new(window.AudioContext||window.webkitAudioContext),H=Y(()=>y.value.filter(D=>{const P=D.name.toLowerCase().includes(b.value.toLowerCase()),E=m.value===""||D.category_id==m.value;return P&&E})),L=Y(()=>x.value.reduce((D,P)=>D+P.price*P.quantity,0)),s=Y(()=>x.value.reduce((D,P)=>{if(!P.tax_code_id)return D;const E=t.taxCodes.find(ne=>ne.id==P.tax_code_id),le=E?parseFloat(E.rate):0;return D+P.price*P.quantity*(le/100)},0)),r=Y(()=>L.value+s.value),U=Y(()=>(parseFloat(w.value)||0)-r.value),ee=Y(()=>x.value.length===0||A.value||!k.value?!1:(parseFloat(w.value)||0)>=r.value-.01);fe([x,w,k],()=>{ke()},{deep:!0}),fe(M,D=>{D&&Ne()}),de(async()=>{u.value=new We(`pos_db_${t.tenantId}`),u.value.version(1).stores({products:"id, category_id, name",customers:"id, name",paymentTypes:"id",orders:"++id, synced"}),window.addEventListener("online",()=>M.value=!0),window.addEventListener("offline",()=>M.value=!1),document.addEventListener("fullscreenchange",Ue),typeof ve<"u"&&document.addEventListener("keypress",ve),await _e(),$e(),ke(),nextTick(()=>{const D=document.getElementById("amount-tendered-input");D&&D.focus()}),p.value.length>0&&(k.value=p.value[0].id)}),be(()=>{window.removeEventListener("online",()=>M.value=!0),window.removeEventListener("offline",()=>M.value=!1),document.removeEventListener("fullscreenchange",Ue),typeof ve<"u"&&document.removeEventListener("keypress",ve),document.body.classList.remove("pos-fullscreen"),ye()});const _e=async()=>{$.value=!0;try{if(M.value){const P=t.initialProducts.map(E=>({id:E.id,name:E.name,price:parseFloat(E.price),category_id:E.category_id,image_url:E.image_url,stock:E.stock_quantity||0,sku:E.sku||"",barcode:E.barcode||""}));await u.value.products.bulkPut(P),await u.value.customers.bulkPut(t.initialCustomers.map(E=>({id:E.id,name:E.name}))),await u.value.paymentTypes.bulkPut(t.initialPaymentTypes.map(E=>({id:E.id,name:E.name})))}const D=await u.value.products.toArray();D.length===0&&t.initialProducts.length>0?y.value=t.initialProducts.map(P=>({id:P.id,name:P.name,price:parseFloat(P.price),category_id:P.category_id,image_url:P.image_url,stock:P.stock_quantity||0,sku:P.sku||"",barcode:P.barcode||""})):y.value=D}catch(D){console.error("Error loading data",D)}finally{$.value=!1}},te=D=>t.currencySymbol+Number(D).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),me=D=>{const P=x.value.find(E=>E.id===D.id);P?P.quantity++:x.value.push({...D,quantity:1,uniqueId:Date.now()}),Ie()},re=(D,P)=>{const E=x.value[D];E.quantity+=P,E.quantity<=0&&x.value.splice(D,1)},De=D=>{x.value.splice(D,1)},je=()=>{x.value=[],w.value="",T.value="",ke()},ke=()=>{const D={cart:x.value,subtotal:L.value,tax:s.value,total:r.value,currencySymbol:t.currencySymbol,amountTendered:w.value,change:U.value,taxRate:t.enableTax?t.taxRate:0,timestamp:Date.now()};localStorage.setItem("pos_state",JSON.stringify(D))},Ie=()=>{try{const D=z.createOscillator(),P=z.createGain();D.connect(P),P.connect(z.destination),D.frequency.value=800,D.type="sine",P.gain.setValueAtTime(.3,z.currentTime),P.gain.exponentialRampToValueAtTime(.01,z.currentTime+.1),D.start(z.currentTime),D.stop(z.currentTime+.1)}catch{}},xe=C(!1),Fe=()=>{const D=document.documentElement;document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():D.requestFullscreen?D.requestFullscreen().catch(P=>console.error(P)):D.webkitRequestFullscreen?D.webkitRequestFullscreen():D.msRequestFullscreen&&D.msRequestFullscreen()},Ue=()=>{xe.value=!!document.fullscreenElement,xe.value?document.body.classList.add("pos-fullscreen"):document.body.classList.remove("pos-fullscreen")},Be=async()=>{h.value=!0,await nextTick();try{S=new Ge;const D=document.querySelector("video");await S.decodeFromVideoDevice(null,D,(P,E)=>{P&&Pe(P.text)})}catch(D){console.error("Scanner error:",D),alert("Camera access denied or not available"),ye()}},ye=()=>{S&&(S.reset(),S=null),h.value=!1},Pe=D=>{const P=y.value.find(E=>E.sku===D||E.barcode===D);P?(me(P),ye()):alert("Product not found: "+D)},ve=D=>{D.target.tagName==="INPUT"||D.target.tagName==="TEXTAREA"||(q&&clearTimeout(q),D.key==="Enter"?(R.length>3&&Pe(R),R=""):(R+=D.key,q=setTimeout(()=>R="",100)))},Te=async()=>{if(!confirm("Process payment of "+te(r.value)+"?"))return;A.value=!0;const D={items:x.value,subtotal:L.value,tax:s.value,total:r.value,payment_method_id:k.value,amount_tendered:w.value,change:U.value,customer_id:T.value||null,created_at:new Date().toISOString()};if(M.value)try{const E=await(await fetch(t.routes.store,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t.csrfToken},body:JSON.stringify(D)})).json();if(E.success)alert("Order processed successfully!"),await Re({...D,order_id:E.order_id}),je();else throw new Error(E.message)}catch(P){console.error("Online payment failed, saving offline",P),await Ae(D)}else await Ae(D);A.value=!1},Ae=async D=>{try{const P=JSON.parse(JSON.stringify({...D,synced:0}));await u.value.orders.add(P),alert("Offline: Order saved locally. Will sync when online."),$e(),je()}catch(P){console.error("Error saving offline",P),alert("Error saving offline: "+P.message)}},$e=()=>{u.value.orders.where("synced").equals(0).count().then(D=>g.value=D)},Ne=async()=>{if(!M.value)return;const D=await u.value.orders.where("synced").equals(0).toArray();if(D.length!==0){for(const P of D)try{(await(await fetch(t.routes.store,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t.csrfToken},body:JSON.stringify(P)})).json()).success&&await u.value.orders.update(P.id,{synced:1})}catch(E){console.error("Sync failed",E)}$e()}},Le=async()=>{try{d=await navigator.bluetooth.requestDevice({filters:[{services:["000018f0-0000-1000-8000-00805f9b34fb"]}],optionalServices:["000018f0-0000-1000-8000-00805f9b34fb"]}),_=await(await(await d.gatt.connect()).getPrimaryService("000018f0-0000-1000-8000-00805f9b34fb")).getCharacteristic("00002af1-0000-1000-8000-00805f9b34fb"),V.value=!0,alert("Printer connected!")}catch(D){console.error(D),alert("Printer connection failed.")}},Re=async D=>{if(V.value&&_)alert("Printing thermal receipt...");else{const P=t.routes.receipt.replace(":id",D.order_id);window.open(P,"Receipt","width=400,height=600")}},ze=()=>{window.open(t.routes.display,"CustomerDisplay","width=800,height=600,menubar=no,toolbar=no,location=no,status=no")};return(D,P)=>(o(),n("div",{class:I(["flex","-m-6",xe.value?"h-screen p-6 bg-white":"h-[calc(100vh-6rem)]"])},[e("div",{class:I(["w-[70%] bg-gray-100 p-2 pr-2 md:p-6 overflow-y-auto border-r border-gray-200",{"rounded-l-lg":!xe.value}])},[e("div",Gi,[v(e("input",{type:"text","onUpdate:modelValue":P[0]||(P[0]=E=>b.value=E),placeholder:"Search...",class:"flex-1 px-2 py-1.5 md:px-4 md:py-3 rounded-lg border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-xs md:text-lg"},null,512),[[O,b.value]]),v(e("select",{"onUpdate:modelValue":P[1]||(P[1]=E=>m.value=E),class:"px-2 py-1.5 md:px-4 md:py-3 rounded-lg border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-xs md:text-base"},[P[7]||(P[7]=e("option",{value:""},"All",-1)),(o(!0),n(B,null,N(f.value,E=>(o(),n("option",{key:E.id,value:E.id},l(E.name),9,Ji))),128))],512),[[K,m.value]]),e("div",{class:"flex gap-2"},[e("button",{onClick:Be,class:"px-3 py-1.5 bg-indigo-600 text-white rounded-lg flex items-center justify-center gap-1 text-xs font-semibold hover:bg-indigo-700 transition"},[...P[8]||(P[8]=[e("i",{class:"fas fa-barcode"},null,-1),F(" Scan ",-1)])]),e("button",{onClick:Fe,class:"hidden md:flex px-3 py-1.5 bg-gray-700 text-white rounded-lg items-center justify-center gap-1 text-xs font-semibold hover:bg-gray-800 transition"},[...P[9]||(P[9]=[e("i",{class:"fas fa-expand"},null,-1),F(" Fullscreen ",-1)])])])]),h.value?(o(),n("div",Ki,[e("div",{class:"p-4 bg-gray-900 flex justify-between items-center"},[P[10]||(P[10]=e("h3",{class:"text-white font-bold"},"Scan Barcode",-1)),e("button",{onClick:ye,class:"text-white px-4 py-2 bg-red-600 rounded-lg"},"Close")]),e("div",Qi,[e("video",{ref_key:"videoElement",ref:c,class:"w-full h-full object-cover"},null,512),P[11]||(P[11]=e("div",{class:"absolute inset-0 flex items-center justify-center pointer-events-none"},[e("div",{class:"w-64 h-48 border-2 border-green-500 rounded-lg"})],-1))]),P[12]||(P[12]=e("div",{class:"p-4 bg-gray-900 text-white text-center text-sm"}," Position barcode within the frame ",-1))])):j("",!0),$.value?(o(),n("div",Xi,[...P[13]||(P[13]=[e("div",{class:"animate-spin rounded-full h-8 md:h-12 w-8 md:w-12 border-b-2 border-indigo-600"},null,-1)])])):(o(),n("div",Yi,[(o(!0),n(B,null,N(H.value,E=>(o(),n("div",{key:E.id,onClick:le=>me(E),class:"bg-white rounded-lg shadow cursor-pointer hover:shadow-md transition p-1.5 md:p-3 flex flex-col group relative"},[e("div",ea,[e("img",{src:E.image_url,class:"object-cover w-full h-full group-hover:scale-110 transition duration-500",onError:P[2]||(P[2]=le=>le.target.src="https://placehold.co/200x200?text=No+Image")},null,40,ta),e("div",{class:I(["absolute top-1 right-1 px-1.5 py-0.5 rounded text-[10px] font-bold text-white shadow",E.stock>10?"bg-green-500":E.stock>0?"bg-yellow-500":"bg-red-500"])},l(E.stock),3)]),e("h3",sa,l(E.name),1),e("p",oa,l(te(E.price)),1)],8,Zi))),128))]))],2),e("div",na,[e("div",ra,[e("h2",la,[P[14]||(P[14]=e("span",null,"Cart",-1)),e("span",ia,l(x.value.length)+" items",1)]),e("div",aa,[e("div",{class:I(["text-xs px-2 py-1 rounded transition-colors duration-300",M.value?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},l(M.value?"Online":"Offline"),3),e("button",{onClick:Le,class:I(["hidden md:block text-xs px-2 py-1 rounded hover:opacity-80 transition",V.value?"bg-green-600 text-white":"bg-gray-800 text-white"])},l(V.value?"Printer âœ“":"Connect Printer"),3),e("button",{onClick:ze,class:"hidden md:block text-xs bg-gray-800 text-white px-3 py-1 rounded hover:bg-gray-700"},"Display")])]),e("div",da,[v(e("select",{"onUpdate:modelValue":P[3]||(P[3]=E=>T.value=E),class:"block w-full rounded-md border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[P[15]||(P[15]=e("option",{value:""},"Walk-in Customer",-1)),(o(!0),n(B,null,N(i.value,E=>(o(),n("option",{key:E.id,value:E.id},l(E.name),9,ua))),128))],512),[[K,T.value]])]),e("div",ca,[x.value.length===0?(o(),n("div",ma,[...P[16]||(P[16]=[e("i",{class:"fas fa-shopping-cart text-5xl mb-4 opacity-30"},null,-1),e("p",{class:"text-sm md:text-base"},"Cart is empty",-1)])])):j("",!0),(o(!0),n(B,null,N(x.value,(E,le)=>(o(),n("div",{key:E.uniqueId||E.id,class:"flex flex-col p-2 md:p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition border border-gray-100"},[e("div",ga,[e("div",pa,[e("h4",{class:"font-medium text-gray-800 text-xs md:text-sm truncate",title:E.name},l(E.name),9,fa),e("p",ba,l(te(E.price)),1)]),e("div",xa,[e("button",{onClick:ne=>re(le,-1),class:"w-7 h-7 md:w-8 md:h-8 rounded-full bg-white border-2 border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-100 text-sm font-bold transition-colors"},"-",8,ya),e("span",va,l(E.quantity),1),e("button",{onClick:ne=>re(le,1),class:"w-7 h-7 md:w-8 md:h-8 rounded-full bg-white border-2 border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-100 text-sm font-bold transition-colors"},"+",8,ha)]),e("div",wa,[e("p",_a,l(te(E.price*E.quantity)),1)])]),e("div",ka,[e("button",{onClick:ne=>De(le),class:"text-[10px] text-red-500 hover:underline"},"Remove",8,$a),v(e("select",{"onUpdate:modelValue":ne=>E.tax_code_id=ne,class:"text-[10px] py-1 pl-2 pr-6 rounded border-gray-200 bg-white text-gray-600 focus:border-indigo-500 focus:ring-indigo-500 w-32"},[P[17]||(P[17]=e("option",{value:""},"No Tax",-1)),(o(!0),n(B,null,N(a.taxCodes,ne=>(o(),n("option",{key:ne.id,value:ne.id},l(ne.name)+" ("+l(Number(ne.rate))+"%)",9,Ca))),128))],8,Sa),[[K,E.tax_code_id]])])]))),128))]),e("div",ja,[e("div",Ua,[P[18]||(P[18]=e("span",null,"Subtotal",-1)),e("span",null,l(te(L.value)),1)]),e("div",Pa,[P[19]||(P[19]=e("span",null,"Tax",-1)),e("span",null,l(te(s.value)),1)]),e("div",Ta,[P[20]||(P[20]=e("span",null,"Total",-1)),e("span",null,l(te(r.value)),1)]),e("div",Aa,[P[21]||(P[21]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700 mb-1"},"Payment Method",-1)),v(e("select",{"onUpdate:modelValue":P[4]||(P[4]=E=>k.value=E),class:"block w-full rounded-md border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[(o(!0),n(B,null,N(p.value,E=>(o(),n("option",{key:E.id,value:E.id},l(E.name),9,Ma))),128))],512),[[K,k.value]])]),e("div",Va,[P[22]||(P[22]=e("label",{class:"block text-xs md:text-sm font-medium text-gray-700 mb-1"},"Amount Tendered",-1)),e("div",Oa,[e("div",Ea,[e("span",qa,l(a.currencySymbol),1)]),v(e("input",{type:"number","onUpdate:modelValue":P[5]||(P[5]=E=>w.value=E),step:"0.01",onKeydown:P[6]||(P[6]=Ce(E=>ee.value&&Te(),["enter"])),id:"amount-tendered-input",class:"block w-full rounded-md border-2 border-gray-300 pl-7 pr-12 focus:border-indigo-500 focus:ring-indigo-500 text-base md:text-lg font-bold",placeholder:"0.00"},null,544),[[O,w.value]])])]),e("div",{class:I(["mt-4 p-3 md:p-4 bg-gray-100 rounded-lg flex justify-between items-center",U.value<0?"bg-red-50 text-red-600":"bg-green-50 text-green-700"])},[P[23]||(P[23]=e("span",{class:"font-bold text-sm md:text-base"},"Change Due",-1)),e("span",Da,l(te(Math.max(0,U.value))),1)],2),U.value<0?(o(),n("div",Ia," Short by "+l(te(Math.abs(U.value))),1)):j("",!0),e("button",{onClick:Te,disabled:!ee.value,class:"w-full mt-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white text-base md:text-lg font-bold py-3 md:py-4 rounded-xl shadow-lg hover:shadow-xl transition transform active:scale-95 flex items-center justify-center"},[A.value?(o(),n("span",Na,[...P[24]||(P[24]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),F(" Processing... ",-1)])])):(o(),n("span",Ba,"Charge "+l(te(r.value)),1))],8,Fa),g.value>0?(o(),n("div",La,l(g.value)+" Offline Orders Waiting Sync ",1)):j("",!0)])])],2))}},za={class:"flex h-screen overflow-hidden font-sans"},Ha={class:"w-1/2 bg-indigo-900 flex flex-col items-center justify-center text-white p-12 relative"},Wa=["src"],Ga={key:1,class:"text-6xl font-black tracking-tighter mb-4"},Ja={class:"fixed bottom-4 left-4 flex items-center gap-2 text-xs opacity-50"},Ka={class:"w-1/2 bg-white p-8 flex flex-col shadow-2xl h-full text-black"},Qa={class:"flex-1 overflow-y-auto space-y-4 pr-2"},Xa={key:0,class:"h-full flex items-center justify-center text-gray-400 text-lg"},Ya={class:"font-bold text-xl text-gray-800"},Za={class:"text-gray-500"},ed={class:"font-bold text-xl text-gray-900"},td={class:"mt-auto pt-6 border-t-2 border-gray-100 space-y-3"},sd={class:"flex justify-between text-xl text-gray-600"},od={key:0,class:"flex justify-between text-xl text-gray-600"},nd={class:"flex justify-between text-4xl font-black text-indigo-900 py-4"},rd={key:1,class:"bg-indigo-50 p-4 rounded-xl space-y-2"},ld={class:"flex justify-between text-lg text-indigo-800"},id={__name:"CustomerDisplay",props:{logoUrl:{type:String,default:null},tenantName:{type:String,default:"Store"},currencySymbol:{type:String,default:"$"}},setup(a){const t=a,u=C(!1),y=C({cart:[],subtotal:0,tax:0,total:0,amountTendered:0,change:0,taxRate:0,currencySymbol:t.currencySymbol}),f=()=>{const x=localStorage.getItem("pos_state");if(x)try{y.value=JSON.parse(x),u.value=!0}catch(b){console.error("Error parsing POS state",b)}},p=x=>{x.key==="pos_state"&&f()};de(()=>{f(),window.addEventListener("storage",p)}),be(()=>{window.removeEventListener("storage",p)});const i=x=>(y.value.currencySymbol||t.currencySymbol)+Number(x).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return(x,b)=>(o(),n("div",za,[e("div",Ha,[a.logoUrl?(o(),n("img",{key:0,src:a.logoUrl,class:"max-w-xs mb-8 rounded-xl shadow-2xl bg-white p-4"},null,8,Wa)):(o(),n("h1",Ga,l(a.tenantName),1)),b[0]||(b[0]=e("p",{class:"text-2xl opacity-75 text-center"},"Thank you for shopping with us!",-1)),e("div",Ja,[e("div",{class:I(["w-2 h-2 rounded-full",u.value?"bg-green-400":"bg-red-400"])},null,2),e("span",null,l(u.value?"Connected":"Waiting for POS..."),1)])]),e("div",Ka,[b[7]||(b[7]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-6 border-b pb-4"},"Your Order",-1)),e("div",Qa,[y.value.cart.length===0?(o(),n("div",Xa," Processing... ")):j("",!0),(o(!0),n(B,null,N(y.value.cart,m=>(o(),n("div",{key:m.id||m.uniqueId,class:"flex justify-between items-center py-2 border-b-2 border-gray-200 last:border-0"},[e("div",null,[e("div",Ya,l(m.name),1),e("div",Za,[e("span",null,l(m.quantity),1),b[1]||(b[1]=F(" x ",-1)),e("span",null,l(i(m.price)),1)])]),e("div",ed,l(i(m.price*m.quantity)),1)]))),128))]),e("div",td,[e("div",sd,[b[2]||(b[2]=e("span",null,"Subtotal",-1)),e("span",null,l(i(y.value.subtotal||0)),1)]),y.value.tax>0?(o(),n("div",od,[b[3]||(b[3]=e("span",null,"Tax",-1)),e("span",null,l(i(y.value.tax||0)),1)])):j("",!0),e("div",nd,[b[4]||(b[4]=e("span",null,"Total",-1)),e("span",null,l(i(y.value.total||0)),1)]),y.value.amountTendered>0?(o(),n("div",rd,[e("div",ld,[b[5]||(b[5]=e("span",null,"Paid",-1)),e("span",null,l(i(y.value.amountTendered)),1)]),e("div",{class:I(["flex justify-between text-2xl font-bold",y.value.change<0?"text-red-600":"text-green-600"])},[b[6]||(b[6]=e("span",null,"Change",-1)),e("span",null,l(i(Math.max(0,y.value.change))),1)],2)])):j("",!0)])])]))}},ad={class:"space-y-6"},dd={class:"flex justify-between items-center mb-6"},ud=["disabled"],cd={key:0,class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"},md={key:0,class:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 relative"},gd={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 relative"},pd={key:0,class:"list-disc pl-5"},fd={key:1},bd={class:"border-b border-gray-200 overflow-x-auto"},xd={class:"-mb-px flex space-x-8"},yd=["onClick"],vd={class:"mt-6"},hd={class:"space-y-6"},wd={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},_d={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},kd={class:"grid grid-cols-2 gap-4"},$d={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Sd={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},Cd={class:"md:col-span-2"},jd={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Ud={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},Pd={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Td={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},Ad={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Md={class:"p-6 space-y-4"},Vd={class:"flex items-start"},Od={class:"flex items-center h-5"},Ed={class:"flex items-start border-t border-gray-100 pt-4"},qd={class:"flex items-center h-5"},Dd={class:"space-y-6"},Id={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Fd={class:"mb-6"},Bd={class:"flex items-center space-x-4"},Nd={class:"flex-shrink-0 w-24 h-24 border border-gray-200 rounded-lg bg-gray-50 flex items-center justify-center overflow-hidden"},Ld=["src"],Rd={key:1,class:"text-gray-400 text-xs"},zd={class:"mb-6"},Hd={class:"flex items-center space-x-4"},Wd={class:"flex-shrink-0 w-12 h-12 border border-gray-200 rounded-lg bg-gray-50 flex items-center justify-center overflow-hidden"},Gd=["src"],Jd={key:1,class:"text-gray-400 text-xs"},Kd={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Qd={class:"space-y-6"},Xd={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Yd={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zd={class:"flex items-center justify-between mb-4"},eu={class:"font-bold text-gray-700 uppercase"},tu={class:"relative inline-flex items-center cursor-pointer"},su=["onUpdate:modelValue"],ou={class:"space-y-3"},nu=["onUpdate:modelValue"],ru=["onUpdate:modelValue"],lu=["onUpdate:modelValue"],iu={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},au={class:"flex justify-between items-center mb-4 border-b pb-2"},du={class:"overflow-x-auto"},uu={class:"min-w-full divide-y divide-gray-200"},cu={class:"divide-y divide-gray-200"},mu={class:"px-4 py-2 text-sm"},gu={class:"px-4 py-2 text-sm uppercase"},pu={class:"px-4 py-2 text-sm text-gray-600"},fu={class:"px-4 py-2 text-sm text-gray-600"},bu={class:"px-4 py-2 text-center text-sm"},xu={class:"relative inline-flex items-center cursor-pointer"},yu=["checked","onChange"],vu={class:"px-4 py-2 text-right text-sm"},hu=["onClick"],wu={key:0},_u={class:"space-y-6"},ku={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},$u={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Su={class:"mt-6 pt-6 border-t border-gray-200"},Cu={class:"flex items-end gap-4"},ju={class:"flex-1"},Uu={class:"space-y-6"},Pu={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Tu={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 flex flex-col"},Au={class:"mt-4 pt-4 border-t border-gray-100"},Mu=["href"],Vu={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 flex flex-col"},Ou={class:"mt-4 pt-4 border-t border-gray-100"},Eu=["href"],qu={class:"space-y-6"},Du={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Iu={class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center"},Fu={class:"flex gap-2"},Bu=["href"],Nu=["href"],Lu={class:"p-6 space-y-6"},Ru={class:"flex justify-between items-center mb-2"},zu={class:"flex justify-between items-center mb-2"},Hu={class:"flex justify-between items-center mb-2"},Wu={class:"flex items-center space-x-6 bg-gray-50/50 p-4 rounded-xl border-2 border-dashed border-gray-200"},Gu={class:"flex-shrink-0 w-32 h-20 border border-gray-200 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden shadow-sm"},Ju=["src"],Ku={key:1,class:"fas fa-share-alt text-gray-300 text-2xl"},Qu={class:"flex-grow"},Xu={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Yu={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},Zu={class:"space-y-6"},e0={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},t0={class:"flex justify-between items-center mb-6"},s0=["href"],o0={class:"text-center py-8"},n0={class:"mt-6"},r0=["href"],l0={class:"px-6 py-4 space-y-6"},i0={class:"relative"},a0={key:0,class:"grid grid-cols-1 gap-4 bg-gray-50 p-4 rounded-lg border border-gray-100"},d0={key:0,class:"mt-3"},u0={class:"px-6 py-4 bg-gray-50 flex justify-end rounded-b-lg"},c0=["disabled"],m0={__name:"GeneralSettings",props:{initialSettings:{type:Object,required:!0,default:()=>({})},tenantName:{type:String,default:""},paymentTypes:{type:Array,default:()=>[]},initialStorefrontStatus:{type:Boolean,default:!1},hasFeature:{type:Boolean,default:!1},tenantSlug:{type:String,default:""},defaultTab:{type:String,default:"general"},routes:{type:Object,required:!0},csrfToken:String,currentUserEmail:String},setup(a){const t=a,u=C(t.defaultTab),y=C(!1),f=C(""),p=C(""),i=C(!1),x=C(!1),b=C([...t.paymentTypes]),m=C(t.currentUserEmail||""),k=["opay","moniepoint","paystack","flutterwave"],T=[{id:"general",name:"General"},{id:"branding",name:"Branding"},{id:"payments",name:"Payments"},{id:"integrations",name:"Integrations"},{id:"storefront",name:"Storefront & CMS"},{id:"seo",name:"SEO & Geo"},{id:"tax",name:"Tax"}],w=X({store_name:t.tenantName,currency_code:t.initialSettings.currency_code||"NGN",currency_symbol:t.initialSettings.currency_symbol||"â‚¦",company_address:t.initialSettings.company_address||"",company_email:t.initialSettings.company_email||"",company_phone:t.initialSettings.company_phone||"",po_prefix:t.initialSettings.po_prefix||"PO-",invoice_prefix:t.initialSettings.invoice_prefix||"INV-",shipping_cost:t.initialSettings.shipping_cost||"0",free_shipping_threshold:t.initialSettings.free_shipping_threshold||"0",hide_powered_by:!!t.initialSettings.hide_powered_by,guest_checkout:t.initialSettings.guest_checkout!==void 0?!!t.initialSettings.guest_checkout:!0,primary_color:t.initialSettings.primary_color||"#4f46e5",mail_host:t.initialSettings.mail_host||"",mail_port:t.initialSettings.mail_port||"587",mail_username:t.initialSettings.mail_username||"",mail_password:t.initialSettings.mail_password||"",mail_encryption:t.initialSettings.mail_encryption||"tls",mail_from_address:t.initialSettings.mail_from_address||"",gateway_opay_active:!!t.initialSettings.gateway_opay_active,gateway_opay_public_key:t.initialSettings.gateway_opay_public_key||"",gateway_opay_secret_key:t.initialSettings.gateway_opay_secret_key||"",gateway_opay_merchant_id:t.initialSettings.gateway_opay_merchant_id||"",gateway_moniepoint_active:!!t.initialSettings.gateway_moniepoint_active,gateway_moniepoint_public_key:t.initialSettings.gateway_moniepoint_public_key||"",gateway_moniepoint_secret_key:t.initialSettings.gateway_moniepoint_secret_key||"",gateway_moniepoint_merchant_id:t.initialSettings.gateway_moniepoint_merchant_id||"",gateway_paystack_active:!!t.initialSettings.gateway_paystack_active,gateway_paystack_public_key:t.initialSettings.gateway_paystack_public_key||"",gateway_paystack_secret_key:t.initialSettings.gateway_paystack_secret_key||"",gateway_flutterwave_active:!!t.initialSettings.gateway_flutterwave_active,gateway_flutterwave_public_key:t.initialSettings.gateway_flutterwave_public_key||"",gateway_flutterwave_secret_key:t.initialSettings.gateway_flutterwave_secret_key||"",meta_title:t.initialSettings.meta_title||"",meta_description:t.initialSettings.meta_description||"",meta_keywords:t.initialSettings.meta_keywords||"",store_country:t.initialSettings.store_country||"Nigeria",store_region:t.initialSettings.store_region||"",store_timezone:t.initialSettings.store_timezone||"Africa/Lagos",google_maps_url:t.initialSettings.google_maps_url||""}),A=C(null),$=C(null),M=C(t.initialSettings.logo?t.routes.media+"?path="+t.initialSettings.logo:null),g=C(t.initialSettings.favicon?t.routes.media+"?path="+t.initialSettings.favicon:null),h=C(t.initialSettings.og_image?t.routes.media+"?path="+t.initialSettings.og_image:null),V=C(null),c=X({name:"",type:"cash",bank_name:"",account_number:"",account_name:"",require_gateway:!1,gateway_provider:"",is_active_on_storefront:!1}),S=(L,s)=>{const r=L.target.files[0];if(r){const U=new FileReader;U.onload=ee=>{s==="logo"?(M.value=ee.target.result,A.value=r):s==="favicon"?(g.value=ee.target.result,$.value=r):s==="og_image"&&(h.value=ee.target.result,V.value=r)},U.readAsDataURL(r)}},R=async()=>{y.value=!0,p.value="",f.value="";const L=new FormData;for(const s in w)typeof w[s]=="boolean"?L.append(s,w[s]?"1":"0"):L.append(s,w[s]||"");A.value&&L.append("logo",A.value),$.value&&L.append("favicon",$.value),V.value&&L.append("og_image",V.value);try{await J.post(t.routes.update,L,{headers:{"Content-Type":"multipart/form-data"}}),window.location.reload()}catch(s){console.error(s),s.response&&s.response.data&&s.response.data.errors?p.value=s.response.data.errors:p.value="Failed to update settings. Please try again.",y.value=!1}},q=async()=>{x.value=!0;try{const L=await J.post(t.routes.paymentTypesStore,c,{headers:{Accept:"application/json"}});L.data.success&&(b.value.push(L.data.payment_type),i.value=!1,c.name="",c.type="cash",c.bank_name="",c.account_number="",c.account_name="",c.require_gateway=!1,c.gateway_provider="",f.value=L.data.message)}catch(L){console.error(L),alert("Failed to create payment type.")}finally{x.value=!1}},d=async L=>{if(confirm("Are you sure you want to delete this payment type?"))try{const s=t.routes.paymentTypesDestroy.replace(":id",L),r=await J.delete(s,{headers:{Accept:"application/json"}});r.data.success&&(b.value=b.value.filter(U=>U.id!==L),f.value=r.data.message)}catch(s){console.error(s),alert("Failed to delete payment type.")}},_=async()=>{if(!m.value){alert("Please enter an email address.");return}try{const L=await J.post(t.routes.testEmail,{test_email:m.value});L.data.success?alert(L.data.message):alert(L.data.message||"Email sent (check logs if not received).")}catch(L){console.error(L);const s=L.response?.data?.message||"Failed to send test email. Check logs or ensure settings are SAVED.";alert(s)}},z=async L=>{try{const s=t.routes.paymentTypesToggleStorefront.replace(":id",L),r=await J.post(s);if(r.data.success){const U=b.value.findIndex(ee=>ee.id===L);U!==-1&&(b.value[U].is_active_on_storefront=r.data.is_active_on_storefront)}}catch(s){console.error(s),alert("Failed to update status.")}},H=async L=>{try{const s=await J.post(t.routes.seoSuggest,{type:L});s.data.suggestion&&(L==="meta_title"&&(w.meta_title=s.data.suggestion),L==="meta_description"&&(w.meta_description=s.data.suggestion),L==="meta_keywords"&&(w.meta_keywords=s.data.suggestion))}catch(s){console.error(s),alert("Failed to get suggestion.")}};return fe(i,L=>{L&&(c.name="",c.type="cash",c.bank_name="",c.account_number="",c.account_name="",c.require_gateway=!1,c.gateway_provider="",c.is_active_on_storefront=!1)}),(L,s)=>(o(),n("div",ad,[e("div",dd,[s[46]||(s[46]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-800"},"Settings"),e("p",{class:"text-gray-600"},"Manage your store configuration.")],-1)),e("button",{onClick:R,disabled:y.value,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg transition shadow-md disabled:opacity-50 flex items-center gap-2"},[y.value?(o(),n("span",cd)):j("",!0),F(" "+l(y.value?"Saving...":"Save Changes"),1)],8,ud)]),f.value?(o(),n("div",md,[F(l(f.value)+" ",1),e("button",{onClick:s[0]||(s[0]=r=>f.value=""),class:"absolute top-2 right-2 text-green-500 hover:text-green-700"},"Ã—")])):j("",!0),p.value?(o(),n("div",gd,[typeof p.value=="object"?(o(),n("ul",pd,[(o(!0),n(B,null,N(p.value,(r,U)=>(o(),n("li",{key:U},l(r),1))),128))])):(o(),n("span",fd,l(p.value),1)),e("button",{onClick:s[1]||(s[1]=r=>p.value=""),class:"absolute top-2 right-2 text-red-500 hover:text-red-700"},"Ã—")])):j("",!0),e("div",bd,[e("nav",xd,[(o(),n(B,null,N(T,r=>e("button",{key:r.id,onClick:U=>u.value=r.id,class:I([u.value===r.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},l(r.name),11,yd)),64))])]),e("div",vd,[v(e("div",hd,[e("div",wd,[s[50]||(s[50]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Store Identity"),e("p",{class:"text-sm text-gray-500"},"Basic information about your store.")],-1)),e("div",_d,[e("div",null,[s[47]||(s[47]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Store Name",-1)),v(e("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>w.store_name=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.store_name]])]),e("div",kd,[e("div",null,[s[48]||(s[48]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Currency Code",-1)),v(e("input",{"onUpdate:modelValue":s[3]||(s[3]=r=>w.currency_code=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all uppercase"},null,512),[[O,w.currency_code]])]),e("div",null,[s[49]||(s[49]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Symbol",-1)),v(e("input",{"onUpdate:modelValue":s[4]||(s[4]=r=>w.currency_symbol=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.currency_symbol]])])])])]),e("div",$d,[s[54]||(s[54]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Contact Information"),e("p",{class:"text-sm text-gray-500"},"Displayed on Invoices and Purchase Orders.")],-1)),e("div",Sd,[e("div",Cd,[s[51]||(s[51]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Company Address",-1)),v(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=r=>w.company_address=r),rows:"3",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.company_address]])]),e("div",null,[s[52]||(s[52]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Company Email",-1)),v(e("input",{"onUpdate:modelValue":s[6]||(s[6]=r=>w.company_email=r),type:"email",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.company_email]])]),e("div",null,[s[53]||(s[53]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Company Phone",-1)),v(e("input",{"onUpdate:modelValue":s[7]||(s[7]=r=>w.company_phone=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.company_phone]])])])]),e("div",jd,[s[57]||(s[57]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Document Defaults"),e("p",{class:"text-sm text-gray-500"},"Set default prefixes for your documents.")],-1)),e("div",Ud,[e("div",null,[s[55]||(s[55]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"PO Prefix",-1)),v(e("input",{"onUpdate:modelValue":s[8]||(s[8]=r=>w.po_prefix=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.po_prefix]])]),e("div",null,[s[56]||(s[56]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Invoice Prefix",-1)),v(e("input",{"onUpdate:modelValue":s[9]||(s[9]=r=>w.invoice_prefix=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.invoice_prefix]])])])]),e("div",Pd,[s[61]||(s[61]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Shipping Configuration"),e("p",{class:"text-sm text-gray-500"},"Configure default shipping rates.")],-1)),e("div",Td,[e("div",null,[s[58]||(s[58]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Flat Rate Shipping Cost",-1)),v(e("input",{"onUpdate:modelValue":s[10]||(s[10]=r=>w.shipping_cost=r),type:"number",step:"0.01",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.shipping_cost]])]),e("div",null,[s[59]||(s[59]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Free Shipping Threshold",-1)),v(e("input",{"onUpdate:modelValue":s[11]||(s[11]=r=>w.free_shipping_threshold=r),type:"number",step:"0.01",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.free_shipping_threshold]]),s[60]||(s[60]=e("p",{class:"text-xs text-gray-500 mt-1"},"Orders above this amount will have free shipping. Set to 0 to disable.",-1))])])]),e("div",Ad,[s[64]||(s[64]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"White Label & Features")],-1)),e("div",Md,[e("div",Vd,[e("div",Od,[v(e("input",{"onUpdate:modelValue":s[12]||(s[12]=r=>w.hide_powered_by=r),id:"hide_powered_by",type:"checkbox",class:"focus:ring-indigo-500 h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-offset-0"},null,512),[[oe,w.hide_powered_by]])]),s[62]||(s[62]=e("div",{class:"ml-3 text-sm"},[e("label",{for:"hide_powered_by",class:"font-bold text-gray-700"},'Remove "Powered by" Branding'),e("p",{class:"text-gray-500"},"Hide the platform branding from the footer.")],-1))]),e("div",Ed,[e("div",qd,[v(e("input",{"onUpdate:modelValue":s[13]||(s[13]=r=>w.guest_checkout=r),id:"guest_checkout",type:"checkbox",class:"focus:ring-indigo-500 h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-offset-0"},null,512),[[oe,w.guest_checkout]])]),s[63]||(s[63]=e("div",{class:"ml-3 text-sm"},[e("label",{for:"guest_checkout",class:"font-bold text-gray-700"},"Enable Guest Checkout"),e("p",{class:"text-gray-500"},"Allow customers to purchase without creating an account.")],-1))])])])],512),[[G,u.value==="general"]]),v(e("div",Dd,[e("div",Id,[e("div",Fd,[s[65]||(s[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Store Logo",-1)),e("div",Bd,[e("div",Nd,[M.value?(o(),n("img",{key:0,src:M.value,alt:"Store Logo",class:"max-w-full max-h-full object-contain"},null,8,Ld)):(o(),n("span",Rd,"No Logo"))]),e("input",{type:"file",onChange:s[14]||(s[14]=r=>S(r,"logo")),accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:bg-indigo-50 file:text-indigo-700"},null,32)])]),e("div",zd,[s[66]||(s[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Favicon",-1)),e("div",Hd,[e("div",Wd,[g.value?(o(),n("img",{key:0,src:g.value,alt:"Favicon",class:"w-8 h-8 object-contain"},null,8,Gd)):(o(),n("span",Jd,"None"))]),e("input",{type:"file",onChange:s[15]||(s[15]=r=>S(r,"favicon")),accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:bg-indigo-50 file:text-indigo-700"},null,32)])])]),e("div",Kd,[s[67]||(s[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Primary Color",-1)),v(e("input",{"onUpdate:modelValue":s[16]||(s[16]=r=>w.primary_color=r),type:"color",class:"h-10 w-32 rounded-md border-gray-300 p-1"},null,512),[[O,w.primary_color]])])],512),[[G,u.value==="branding"]]),v(e("div",Qd,[e("div",Xd,[s[69]||(s[69]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2"},"Payment Gateways",-1)),e("div",Yd,[(o(),n(B,null,N(k,r=>e("div",{key:r,class:"border rounded-lg p-4 bg-gray-50"},[e("div",Zd,[e("span",eu,l(r),1),e("label",tu,[v(e("input",{type:"checkbox","onUpdate:modelValue":U=>w["gateway_"+r+"_active"]=U,class:"sr-only peer"},null,8,su),[[oe,w["gateway_"+r+"_active"]]]),s[68]||(s[68]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1))])]),e("div",ou,[v(e("input",{"onUpdate:modelValue":U=>w["gateway_"+r+"_public_key"]=U,type:"text",placeholder:"Public Key",class:"block w-full text-xs rounded-md border-gray-300"},null,8,nu),[[O,w["gateway_"+r+"_public_key"]]]),v(e("input",{"onUpdate:modelValue":U=>w["gateway_"+r+"_secret_key"]=U,type:"password",placeholder:"Secret Key",class:"block w-full text-xs rounded-md border-gray-300"},null,8,ru),[[O,w["gateway_"+r+"_secret_key"]]]),["opay","moniepoint"].includes(r)?v((o(),n("input",{key:0,"onUpdate:modelValue":U=>w["gateway_"+r+"_merchant_id"]=U,type:"text",placeholder:"Merchant ID",class:"block w-full text-xs rounded-md border-gray-300"},null,8,lu)),[[O,w["gateway_"+r+"_merchant_id"]]]):j("",!0)])])),64))])]),e("div",iu,[e("div",au,[s[70]||(s[70]=e("h3",{class:"text-lg font-semibold text-gray-800"},"Payment Types",-1)),e("button",{type:"button",onClick:s[17]||(s[17]=r=>i.value=!0),class:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded hover:bg-indigo-200 text-sm font-medium"},"+ Add Payment Type")]),e("div",du,[e("table",uu,[s[73]||(s[73]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"GL Account"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase"},"Storefront"),e("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Action")])],-1)),e("tbody",cu,[(o(!0),n(B,null,N(b.value,r=>(o(),n("tr",{key:r.id},[e("td",mu,l(r.name),1),e("td",gu,l(r.type),1),e("td",pu,l(r.account?r.account.account_code+" - "+r.account.account_name:"-"),1),e("td",fu,l(r.require_gateway?r.gateway_provider||"Linked":"-"),1),e("td",bu,[e("label",xu,[e("input",{type:"checkbox",checked:r.is_active_on_storefront,onChange:U=>z(r.id),class:"sr-only peer"},null,40,yu),s[71]||(s[71]=e("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none ring-0 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),e("td",vu,[e("button",{onClick:U=>d(r.id),class:"text-red-600 hover:text-red-900 border-none bg-transparent cursor-pointer"},"Delete",8,hu)])]))),128)),b.value.length===0?(o(),n("tr",wu,[...s[72]||(s[72]=[e("td",{colspan:"6",class:"px-4 py-4 text-center text-sm text-gray-500"},"No payment types registered.",-1)])])):j("",!0)])])])])],512),[[G,u.value==="payments"]]),v(e("div",_u,[e("div",ku,[s[84]||(s[84]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2"},"SMTP Mail Settings",-1)),e("div",$u,[e("div",null,[s[74]||(s[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mail Host",-1)),v(e("input",{"onUpdate:modelValue":s[18]||(s[18]=r=>w.mail_host=r),type:"text",class:"block w-full rounded-md border-gray-300"},null,512),[[O,w.mail_host]])]),e("div",null,[s[75]||(s[75]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mail Port",-1)),v(e("input",{"onUpdate:modelValue":s[19]||(s[19]=r=>w.mail_port=r),type:"number",class:"block w-full rounded-md border-gray-300"},null,512),[[O,w.mail_port]])]),e("div",null,[s[76]||(s[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Username",-1)),v(e("input",{"onUpdate:modelValue":s[20]||(s[20]=r=>w.mail_username=r),type:"text",class:"block w-full rounded-md border-gray-300"},null,512),[[O,w.mail_username]])]),e("div",null,[s[77]||(s[77]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Password",-1)),v(e("input",{"onUpdate:modelValue":s[21]||(s[21]=r=>w.mail_password=r),type:"password",class:"block w-full rounded-md border-gray-300"},null,512),[[O,w.mail_password]])]),e("div",null,[s[79]||(s[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Encryption",-1)),v(e("select",{"onUpdate:modelValue":s[22]||(s[22]=r=>w.mail_encryption=r),class:"block w-full rounded-md border-gray-300"},[...s[78]||(s[78]=[e("option",{value:"tls"},"TLS",-1),e("option",{value:"ssl"},"SSL",-1),e("option",{value:""},"None",-1)])],512),[[K,w.mail_encryption]])]),e("div",null,[s[80]||(s[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"From Address",-1)),v(e("input",{"onUpdate:modelValue":s[23]||(s[23]=r=>w.mail_from_address=r),type:"email",class:"block w-full rounded-md border-gray-300"},null,512),[[O,w.mail_from_address]])])]),e("div",Su,[s[82]||(s[82]=e("h4",{class:"text-md font-medium text-gray-900 mb-2"},"Test Configuration",-1)),e("div",Cu,[e("div",ju,[s[81]||(s[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Send Test Email To",-1)),v(e("input",{"onUpdate:modelValue":s[24]||(s[24]=r=>m.value=r),type:"email",class:"block w-full rounded-md border-gray-300"},null,512),[[O,m.value]])]),e("button",{onClick:_,type:"button",class:"bg-gray-800 hover:bg-gray-900 text-white font-medium py-2 px-4 rounded-md transition self-end"}," Send Test Email ")]),s[83]||(s[83]=e("p",{class:"text-xs text-gray-500 mt-2"},[F("Note: This tests your "),e("strong",null,"SAVED"),F(" settings. Please save any changes before testing.")],-1))])])],512),[[G,u.value==="integrations"]]),v(e("div",Uu,[Q(Ee,{"initial-status":a.initialStorefrontStatus,"has-feature":a.hasFeature,"tenant-slug":a.tenantSlug},null,8,["initial-status","has-feature","tenant-slug"]),e("div",Pu,[e("div",Tu,[s[85]||(s[85]=ae('<div class="flex items-center mb-4"><div class="p-3 bg-indigo-100 rounded-lg text-indigo-600 mr-4"><i class="fas fa-edit text-2xl"></i></div><div><h3 class="text-lg font-bold text-gray-900">Visual Editor</h3><p class="text-sm text-gray-500">Customize your storefront&#39;s look and feel.</p></div></div><div class="flex-grow"><p class="text-gray-600 text-sm mb-4">Use our visual editor to change colors, fonts, layouts, and content directly on your storefront.</p></div>',2)),e("div",Au,[e("a",{href:a.routes.storefrontHome,target:"_blank",class:"block w-full text-center bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition"},"Launch Visual Editor â†—",8,Mu)])]),e("div",Vu,[s[86]||(s[86]=ae('<div class="flex items-center mb-4"><div class="p-3 bg-green-100 rounded-lg text-green-600 mr-4"><i class="fas fa-magic text-2xl"></i></div><div><h3 class="text-lg font-bold text-gray-900">Setup Wizard</h3><p class="text-sm text-gray-500">Restart the store configuration wizard.</p></div></div><div class="flex-grow"><p class="text-gray-600 text-sm mb-4">Re-run the step-by-step wizard to reset your industry, catalog, and basic branding settings.</p></div>',2)),e("div",Ou,[e("a",{href:a.routes.wizardIndex,class:"block w-full text-center bg-white border-2 border-gray-300 hover:bg-gray-50 text-gray-700 font-bold py-2 px-4 rounded-lg transition"},"Restart Wizard",8,Eu)])])])],512),[[G,u.value==="storefront"]]),v(e("div",qu,[e("div",Du,[e("div",Iu,[s[87]||(s[87]=e("div",null,[e("h3",{class:"text-lg font-bold text-gray-900"},"Search Engine Optimization"),e("p",{class:"text-sm text-gray-500"},"Improve how your store appears in search results.")],-1)),e("div",Fu,[e("a",{href:a.routes.storefrontSitemap,target:"_blank",class:"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition"},"Sitemap.xml â†—",8,Bu),e("a",{href:a.routes.storefrontRobots,target:"_blank",class:"text-xs font-bold text-gray-600 bg-gray-50 px-3 py-1.5 rounded-lg hover:bg-gray-100 transition"},"Robots.txt â†—",8,Nu)])]),e("div",Lu,[e("div",null,[e("div",Ru,[s[89]||(s[89]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide"},"Meta Title",-1)),e("button",{onClick:s[25]||(s[25]=r=>H("meta_title")),class:"text-xs font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-1 bg-indigo-50 px-2 py-1 rounded transition"},[...s[88]||(s[88]=[e("i",{class:"fas fa-magic"},null,-1),F(" AI Suggest ",-1)])])]),v(e("input",{"onUpdate:modelValue":s[26]||(s[26]=r=>w.meta_title=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"Up to 60 characters recommended"},null,512),[[O,w.meta_title]])]),e("div",null,[e("div",zu,[s[91]||(s[91]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide"},"Meta Description",-1)),e("button",{onClick:s[27]||(s[27]=r=>H("meta_description")),class:"text-xs font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-1 bg-indigo-50 px-2 py-1 rounded transition"},[...s[90]||(s[90]=[e("i",{class:"fas fa-magic"},null,-1),F(" AI Suggest ",-1)])])]),v(e("textarea",{"onUpdate:modelValue":s[28]||(s[28]=r=>w.meta_description=r),rows:"3",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"Up to 160 characters recommended"},null,512),[[O,w.meta_description]])]),e("div",null,[e("div",Hu,[s[93]||(s[93]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide"},"Keywords",-1)),e("button",{onClick:s[29]||(s[29]=r=>H("meta_keywords")),class:"text-xs font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-1 bg-indigo-50 px-2 py-1 rounded transition"},[...s[92]||(s[92]=[e("i",{class:"fas fa-magic"},null,-1),F(" AI Suggest ",-1)])])]),v(e("input",{"onUpdate:modelValue":s[30]||(s[30]=r=>w.meta_keywords=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"Comma separated keywords"},null,512),[[O,w.meta_keywords]])]),e("div",null,[s[95]||(s[95]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Social Sharing Image (OG Image)",-1)),e("div",Wu,[e("div",Gu,[h.value?(o(),n("img",{key:0,src:h.value,alt:"OG Image",class:"max-w-full max-h-full object-cover"},null,8,Ju)):(o(),n("i",Ku))]),e("div",Qu,[e("input",{type:"file",onChange:s[31]||(s[31]=r=>S(r,"og_image")),accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32),s[94]||(s[94]=e("p",{class:"text-[10px] text-gray-400 mt-2 uppercase font-bold tracking-widest"},"Recommended: 1200x630px JPG or PNG",-1))])])])])]),e("div",Xu,[s[100]||(s[100]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Geo-Targeting & Presence"),e("p",{class:"text-sm text-gray-500"},"Provide geographical context for localized search.")],-1)),e("div",Yu,[e("div",null,[s[96]||(s[96]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Target Country",-1)),v(e("input",{"onUpdate:modelValue":s[32]||(s[32]=r=>w.store_country=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.store_country]])]),e("div",null,[s[97]||(s[97]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Region / State",-1)),v(e("input",{"onUpdate:modelValue":s[33]||(s[33]=r=>w.store_region=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"e.g. Lagos, California"},null,512),[[O,w.store_region]])]),e("div",null,[s[98]||(s[98]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Timezone",-1)),v(e("input",{"onUpdate:modelValue":s[34]||(s[34]=r=>w.store_timezone=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all"},null,512),[[O,w.store_timezone]])]),e("div",null,[s[99]||(s[99]=e("label",{class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Google Maps URL",-1)),v(e("input",{"onUpdate:modelValue":s[35]||(s[35]=r=>w.google_maps_url=r),type:"text",class:"block w-full rounded-xl border-2 border-gray-200 shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 py-3 text-base font-medium transition-all",placeholder:"Embed or Link URL"},null,512),[[O,w.google_maps_url]])])])])],512),[[G,u.value==="seo"]]),v(e("div",Zu,[e("div",e0,[e("div",t0,[s[101]||(s[101]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800"},"Tax Code Management"),e("p",{class:"text-sm text-gray-500 mt-1"},"Manage tax codes with auto-generated GL accounts")],-1)),e("a",{href:a.routes.taxCodesCreate,class:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition"},"+ Add Tax Code",8,s0)]),s[105]||(s[105]=e("div",{class:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded"},[e("p",{class:"text-sm text-blue-800"},[e("strong",null,"Note:"),F(" Tax codes are now managed separately with automatic GL account generation."),e("br"),F(" â€¢ Sales Tax â†’ 2100 series (Sales Tax Payable - Liability)"),e("br"),F(" â€¢ Purchase Tax â†’ 1300 series (Input Tax Receivable - Asset) ")])],-1)),e("div",o0,[s[102]||(s[102]=e("i",{class:"fas fa-money-bill-wave mx-auto h-12 w-12 text-gray-400 text-5xl"},null,-1)),s[103]||(s[103]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tax Code Management",-1)),s[104]||(s[104]=e("p",{class:"mt-1 text-sm text-gray-500"},"Click the button below to manage your tax codes",-1)),e("div",n0,[e("a",{href:a.routes.taxCodesIndex,class:"inline-flex items-center px-6 py-3 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"}," Manage Tax Codes ",8,r0)])])])],512),[[G,u.value==="tax"]])]),Q(ce,{"is-open":i.value,onClose:s[45]||(s[45]=r=>i.value=!1)},{default:Z(()=>[s[116]||(s[116]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Add Payment Type")],-1)),e("div",l0,[e("div",null,[s[106]||(s[106]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Name",-1)),v(e("input",{"onUpdate:modelValue":s[36]||(s[36]=r=>c.name=r),type:"text",class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2.5",placeholder:"e.g. Standard Delivery"},null,512),[[O,c.name]])]),e("div",null,[s[109]||(s[109]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Payment Type",-1)),e("div",i0,[v(e("select",{"onUpdate:modelValue":s[37]||(s[37]=r=>c.type=r),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2.5 appearance-none"},[...s[107]||(s[107]=[e("option",{value:"cash"},"Cash / Physical",-1),e("option",{value:"bank"},"Bank Transfer",-1)])],512),[[K,c.type]]),s[108]||(s[108]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1))])]),c.type==="bank"?(o(),n("div",a0,[e("div",null,[s[110]||(s[110]=e("label",{class:"block text-xs font-medium text-gray-500 uppercase mb-1"},"Bank Name",-1)),v(e("input",{"onUpdate:modelValue":s[38]||(s[38]=r=>c.bank_name=r),type:"text",placeholder:"e.g. GTBank",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"},null,512),[[O,c.bank_name]])]),e("div",null,[s[111]||(s[111]=e("label",{class:"block text-xs font-medium text-gray-500 uppercase mb-1"},"Account Number",-1)),v(e("input",{"onUpdate:modelValue":s[39]||(s[39]=r=>c.account_number=r),type:"text",placeholder:"0123456789",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"},null,512),[[O,c.account_number]])]),e("div",null,[s[112]||(s[112]=e("label",{class:"block text-xs font-medium text-gray-500 uppercase mb-1"},"Account Name",-1)),v(e("input",{"onUpdate:modelValue":s[40]||(s[40]=r=>c.account_name=r),type:"text",placeholder:"Account Name",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"},null,512),[[O,c.account_name]])])])):j("",!0),e("div",null,[e("div",{class:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:s[41]||(s[41]=r=>c.require_gateway=!c.require_gateway)},[s[113]||(s[113]=e("div",null,[e("span",{class:"block text-sm font-medium text-gray-900"},"Link to Payment Gateway"),e("span",{class:"block text-xs text-gray-500"},"Enable online processing via a provider")],-1)),e("div",{class:I(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",c.require_gateway?"bg-indigo-600":"bg-gray-200"])},[e("span",{class:I(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",c.require_gateway?"translate-x-5":"translate-x-0"])},null,2)],2)]),c.require_gateway?(o(),n("div",d0,[v(e("select",{"onUpdate:modelValue":s[42]||(s[42]=r=>c.gateway_provider=r),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2.5"},[...s[114]||(s[114]=[e("option",{value:""},"Select Provider...",-1),e("option",{value:"opay"},"Opay",-1),e("option",{value:"moniepoint"},"Moniepoint",-1),e("option",{value:"paystack"},"Paystack",-1),e("option",{value:"flutterwave"},"Flutterwave",-1)])],512),[[K,c.gateway_provider]])])):j("",!0)]),e("div",{class:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:s[43]||(s[43]=r=>c.is_active_on_storefront=!c.is_active_on_storefront)},[s[115]||(s[115]=e("div",null,[e("span",{class:"block text-sm font-medium text-gray-900"},"Available on Storefront?"),e("span",{class:"block text-xs text-gray-500"},"Show this payment option to customers")],-1)),e("div",{class:I(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",c.is_active_on_storefront?"bg-indigo-600":"bg-gray-200"])},[e("span",{class:I(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",c.is_active_on_storefront?"translate-x-5":"translate-x-0"])},null,2)],2)])]),e("div",u0,[e("button",{onClick:s[44]||(s[44]=r=>i.value=!1),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded text-sm hover:bg-gray-300 mr-2"},"Cancel"),e("button",{onClick:q,disabled:x.value,class:"bg-indigo-600 text-white px-4 py-2 rounded text-sm hover:bg-indigo-700 disabled:opacity-50"},l(x.value?"Creating...":"Create"),9,c0)])]),_:1},8,["is-open"])]))}},g0={class:"space-y-4"},p0={class:"bg-gray-50/50 p-6 rounded-2xl border border-gray-100"},f0={class:"space-y-4"},b0={class:"flex items-center justify-between"},x0={class:"flex items-center gap-4 flex-1"},y0={class:"flex flex-col flex-1"},v0={class:"text-base font-bold text-[#0A2540]"},h0={key:0,class:"mt-2 text-sm"},w0=["onUpdate:modelValue"],_0={class:"flex items-center"},k0=["onClick"],$0={key:0,class:"ml-10 mt-6 space-y-3 border-l-2 border-gray-50 pl-6"},S0={class:"flex items-center gap-3"},C0={class:"text-sm font-medium text-gray-600"},j0=["onUpdate:modelValue"],U0=["onClick"],P0={__name:"CatalogCurator",props:{modelValue:{type:Array,required:!0,default:()=>[]}},emits:["update:modelValue"],setup(a,{emit:t}){const u=a,y=t,f=C(u.modelValue);fe(()=>u.modelValue,i=>{f.value=i},{deep:!0}),fe(f,i=>{y("update:modelValue",i)},{deep:!0});const p=i=>{i.is_visible_online=!i.is_visible_online,!i.is_visible_online&&i.children&&i.children.forEach(x=>{x.is_visible_online=!1})};return(i,x)=>(o(),n("div",g0,[e("div",p0,[x[1]||(x[1]=e("h3",{class:"text-xl font-bold text-[#0A2540] mb-2"},"Build Your Online Menu",-1)),x[2]||(x[2]=e("p",{class:"text-sm text-gray-500 mb-8"},"Select which categories appear on your storefront. We've auto-hidden internal categories like 'Raw Materials'.",-1)),e("ul",f0,[(o(!0),n(B,null,N(f.value,b=>(o(),n("li",{key:b.id,class:"bg-white border border-gray-100 rounded-2xl p-5 shadow-sm hover:shadow-md transition-shadow"},[e("div",b0,[e("div",x0,[x[0]||(x[0]=e("div",{class:"cursor-move text-gray-300 hover:text-gray-400"},[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1)),e("div",y0,[e("span",v0,l(b.name),1),b.is_visible_online?(o(),n("div",h0,[v(e("input",{type:"text","onUpdate:modelValue":m=>b.public_display_name=m,class:"w-full max-w-xs text-sm border-2 border-gray-100 bg-gray-50 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#0A2540]/10 focus:border-[#0A2540] transition-all",placeholder:"Display name for customers..."},null,8,w0),[[O,b.public_display_name]])])):j("",!0)])]),e("div",_0,[e("button",{type:"button",class:I(["relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none",b.is_visible_online?"bg-[#0A2540]":"bg-gray-200"]),onClick:m=>p(b)},[e("span",{"aria-hidden":"true",class:I(["pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out",b.is_visible_online?"translate-x-5":"translate-x-0"])},null,2)],10,k0)])]),b.children&&b.children.length>0&&b.is_visible_online?(o(),n("ul",$0,[(o(!0),n(B,null,N(b.children,m=>(o(),n("li",{key:m.id,class:"flex items-center justify-between py-2 group"},[e("div",S0,[e("span",C0,l(m.name),1),v(e("input",{type:"text","onUpdate:modelValue":k=>m.public_display_name=k,class:"ml-2 text-xs border-2 border-gray-100 bg-gray-50 rounded-lg px-3 py-1 focus:ring-2 focus:ring-[#0A2540]/10 focus:border-[#0A2540] transition-all",placeholder:"Display name..."},null,8,j0),[[O,m.public_display_name],[G,m.is_visible_online]])]),e("button",{type:"button",class:I(["relative inline-flex h-6 w-10 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out",m.is_visible_online?"bg-[#0A2540]":"bg-gray-200"]),onClick:k=>p(m)},[e("span",{"aria-hidden":"true",class:I(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",m.is_visible_online?"translate-x-4":"translate-x-0"])},null,2)],10,U0)]))),128))])):j("",!0)]))),128))])])]))}},T0={class:"py-12"},A0={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},M0={class:"mb-12"},V0={class:"flex items-center space-x-4"},O0={class:"stepper-segment bg-gray-200"},E0={class:"mt-3 flex items-center"},q0={class:"bg-white overflow-hidden wizard-card border border-gray-100 p-6 text-gray-900 rounded-2xl shadow-lg"},D0={key:0,class:"animate-fade-in-right"},I0={class:"space-y-6"},F0={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},B0={class:"flex items-center gap-3 mt-1"},N0={class:"relative"},L0={class:"mt-1 flex items-center justify-center px-6 pt-5 pb-6 border-2 border-gray-100 border-dashed rounded-xl hover:border-[#0A2540] transition-colors group cursor-pointer relative"},R0={class:"space-y-1 text-center"},z0={key:0,class:"text-xs text-green-600 font-bold mt-2"},H0={key:1,class:"animate-fade-in-right"},W0={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-6"},G0=["onClick"],J0={class:"flex justify-between items-start mb-4"},K0={class:"text-5xl group-hover:scale-110 transition-transform duration-500"},Q0={class:"text-white bg-[#0A2540] rounded-full p-1 shadow-md"},X0={class:"font-bold text-[#0A2540] text-lg"},Y0={class:"text-sm text-gray-500 mt-2 leading-relaxed"},Z0={key:2,class:"animate-fade-in-right"},ec={key:3,class:"animate-fade-in-right"},tc={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},sc=["onClick"],oc={class:"bg-gray-50 h-40 border-b border-gray-100 relative group-hover:bg-gray-100 transition-colors"},nc=["innerHTML"],rc={class:"absolute top-3 right-3 text-white bg-[#0A2540] rounded-full p-1.5 shadow-lg"},lc={class:"p-5 flex-1 flex flex-col"},ic={class:"font-bold text-[#0A2540] text-lg"},ac={class:"text-xs text-gray-500 mt-2 mb-4 leading-relaxed flex-1"},dc={class:"flex gap-2 flex-wrap"},uc={key:0,class:"mt-12 rounded-2xl overflow-hidden shadow-2xl border border-gray-800"},cc={class:"bg-[#1a1a2e] p-6 text-xs font-mono leading-relaxed"},mc={class:"text-blue-300 overflow-x-auto"},gc={class:"mt-10 flex justify-between items-center border-t border-gray-100 pt-8"},pc=["disabled"],fc={key:0,class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"},bc=["disabled"],xc={key:0,class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"},yc={__name:"StoreWizard",props:{storeConfig:{type:Object,required:!0},categories:{type:Array,required:!0},routes:{type:Object,required:!0},csrfToken:String},setup(a){const t=a,u=C(1),y=C(!1),f=C(""),p=X({store_name:t.storeConfig.store_name||"",brand_color:t.storeConfig.brand_color||"#3b82f6",industry:t.storeConfig.industry||"",selected_categories:t.storeConfig.selected_categories||[],layout_preference:t.storeConfig.layout_preference||"minimal",logo:null}),i=C(JSON.parse(JSON.stringify(t.categories))),x=[{id:"fashion",label:"Fashion",icon:"ðŸ‘—",desc:"Stylish fonts & large images"},{id:"electronics",label:"Electronics",icon:"ðŸ“±",desc:"Tech-focused & clean"},{id:"grocery",label:"Grocery",icon:"ðŸŽ",desc:"Data-dense & practical"},{id:"hardware",label:"Hardware",icon:"ðŸ› ï¸",desc:"Bold & industrial"}],b={fashion:{label:"Fashion & Apparel",icon:"ðŸ›ï¸",fonts:{heading:"Playfair Display",body:"Lato"},radius:"0px",vibe:"minimalist",colors:{primary:["#000000","#F3F4F6"]}},electronics:{label:"Electronics & Gadgets",icon:"ðŸ”Œ",fonts:{heading:"Roboto",body:"Inter"},radius:"4px",vibe:"dark_mode",colors:{primary:["#0EA5E9","#1E293B"]}},grocery:{label:"Grocery & Essentials",icon:"ðŸ¥¦",fonts:{heading:"Poppins",body:"Open Sans"},radius:"8px",vibe:"fresh",colors:{primary:["#10B981","#ECFDF5"]}},hardware:{label:"Hardware & Tools",icon:"ðŸ› ï¸",fonts:{heading:"Oswald",body:"Roboto Condensed"},radius:"2px",vibe:"bold",colors:{primary:["#F59E0B","#FFFBEB"]}}},m={high_volume:{label:"High Volume Mart",description:"Amazon Style. Fast search, dense categories. Best for large inventories.",tags:["Search","Density","Hero"],structure:["HeroBanner","SearchFocus","CategoryGrid","FeaturedProductCarousel","Footer"],wireframe:`
            <div class="h-full flex flex-col items-center justify-center p-2">
                <div class="w-full h-1/4 bg-gray-800 rounded-sm mb-2 flex items-center justify-center text-[8px] text-white/50">HERO</div>
                <div class="w-2/3 h-3 bg-white rounded shadow-sm mb-2 border border-gray-100"></div>
                <div class="grid grid-cols-4 gap-1 w-full flex-1">
                    <div class="bg-blue-50 h-full rounded border border-blue-100"></div><div class="bg-blue-50 h-full rounded border border-blue-100"></div>
                    <div class="bg-blue-50 h-full rounded border border-blue-100"></div><div class="bg-blue-50 h-full rounded border border-blue-100"></div>
                </div>
            </div>`},brand_showcase:{label:"Brand Showcase",description:"Nike Style. Emotional connection, big visuals, brand story",tags:["Hero","Story"],structure:["HeroBanner","TextBlock","FeaturedProductCarousel","Newsletter","Footer"],wireframe:`
            <div class="h-full flex flex-col">
                <div class="w-full h-3/5 bg-gray-800 flex items-center justify-center text-white/20 text-xs">HERO</div>
                <div class="w-full h-2/5 bg-white flex items-center justify-center text-[8px] text-gray-300 p-2 text-center">Brand Story Block</div>
            </div>`},quick_order:{label:"Quick Order",description:"Wholesale/B2B. List view for efficiency. No fluff.",tags:["Tabular","Fast","Hero"],structure:["HeroBanner","QuickOrderTable","Footer"],wireframe:`
            <div class="h-full p-2 bg-gray-50 flex flex-col">
                <div class="w-full h-1/4 bg-gray-800 rounded-sm mb-2 flex items-center justify-center text-[8px] text-white/50">HERO</div>
                <div class="w-full h-3 bg-gray-300 rounded mb-2"></div>
                <div class="space-y-1 flex-1">
                    <div class="w-full h-1.5 bg-white rounded border border-gray-200"></div>
                    <div class="w-full h-1.5 bg-white rounded border border-gray-200"></div>
                    <div class="w-full h-1.5 bg-white rounded border border-gray-200"></div>
                    <div class="w-full h-1.5 bg-white rounded border border-gray-200"></div>
                </div>
            </div>`}},k=C(null),T=V=>{const c=V.target.files[0];c&&(p.logo=c,f.value=c.name)},w=V=>{if(p.industry=V,b[V]){const c=b[V].colors.primary[0];p.brand_color=c}},A=V=>{p.layout_preference=V,$(V)},$=V=>{if(!V||!m[V])return;const c=m[V],S=[],R=d=>{d.forEach(_=>{_.is_visible_online&&S.push({id:_.id,name:_.name}),_.children&&_.children.length&&R(_.children)})};R(i.value);const q=S.slice(0,3);k.value={layout_mode:V,components:c.structure,injected_data:{hero_title:`Welcome to ${p.store_name||"My Store"}`,hero_subtitle:`Browse our ${q.length} curated collections.`,highlight_categories:q},timestamp:new Date().toISOString()}},M=async()=>{const V=new FormData;V.append("step",u.value),V.append("store_name",p.store_name),V.append("brand_color",p.brand_color),p.industry&&V.append("industry",p.industry),p.layout_preference&&V.append("layout_preference",p.layout_preference),p.logo&&V.append("logo",p.logo),u.value===3&&V.append("catalog_curation",JSON.stringify(i.value));try{await J.post(t.routes.update,V,{headers:{"Content-Type":"multipart/form-data"}})}catch(c){throw console.error(c),c}},g=async()=>{if(u.value===1&&!p.store_name)return alert("Please enter a store name");if(u.value===2&&!p.industry)return alert("Please select an industry");y.value=!0;try{await M(),u.value++}catch{alert("Error saving progress. Please try again.")}finally{y.value=!1}},h=async()=>{if(!p.layout_preference)return alert("Please select a layout");y.value=!0;try{await M();const V=new FormData,c=[],S=q=>{q.forEach(d=>{d.is_visible_online&&c.push({id:d.id,name:d.name,slug:d.slug}),d.children&&d.children.length&&S(d.children)})};S(i.value),V.append("navigation_categories",JSON.stringify(c));const R=await J.post(t.routes.finish,V);R.data.success&&R.data.redirect&&(window.location.href=R.data.redirect)}catch(V){console.error(V),alert("Something went wrong generating your store. Please try again."),y.value=!1}};return de(()=>{p.layout_preference&&$(p.layout_preference)}),(V,c)=>(o(),n("div",T0,[e("div",A0,[e("div",M0,[e("div",V0,[(o(),n(B,null,N(4,S=>e("div",{key:S,class:"flex-1"},[e("div",O0,[e("div",{class:I(["h-full rounded-full transition-all duration-700",S<=u.value?"bg-[#0A2540]":""]),style:Je({width:S<u.value||S===u.value?"100%":"0%"})},null,6)]),e("div",E0,[e("span",{class:I(["text-[10px] font-bold tracking-widest uppercase transition-colors",S<=u.value?"text-[#0A2540]":"text-gray-400"])},l(["Identity","Niche","Catalog","Layout"][S-1]),3)])])),64))])]),e("div",q0,[u.value===1?(o(),n("div",D0,[c[10]||(c[10]=e("h3",{class:"text-xl font-bold text-[#0A2540] mb-6"},"Brand Identity",-1)),e("div",I0,[e("div",null,[c[5]||(c[5]=e("label",{class:"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2"},"Store Name",-1)),v(e("input",{"onUpdate:modelValue":c[0]||(c[0]=S=>p.store_name=S),type:"text",class:"block w-full input-premium py-3 px-4 rounded-xl shadow-sm border-2 border-gray-200 focus:border-[#0A2540] focus:ring-[#0A2540]/10",placeholder:"e.g. Acme Corp Marketplace",required:"",autofocus:""},null,512),[[O,p.store_name]])]),e("div",F0,[e("div",null,[c[6]||(c[6]=e("label",{class:"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2"},"Primary Brand Color",-1)),e("div",B0,[e("div",N0,[v(e("input",{type:"color","onUpdate:modelValue":c[1]||(c[1]=S=>p.brand_color=S),class:"h-12 w-12 border-0 rounded-xl cursor-pointer p-0 overflow-hidden shadow-sm"},null,512),[[O,p.brand_color]])]),v(e("input",{type:"text","onUpdate:modelValue":c[2]||(c[2]=S=>p.brand_color=S),class:"block flex-1 input-premium py-3 px-4 rounded-xl shadow-sm font-mono text-sm border-2 border-gray-200"},null,512),[[O,p.brand_color]])])]),e("div",null,[c[9]||(c[9]=e("label",{class:"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-2"},"Upload Logo",-1)),e("div",L0,[e("div",R0,[c[7]||(c[7]=e("svg",{class:"mx-auto h-8 w-8 text-gray-400 group-hover:text-[#0A2540] transition-colors",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),c[8]||(c[8]=e("div",{class:"flex text-xs text-gray-600"},[e("span",{class:"relative cursor-pointer bg-white rounded-md font-bold text-[#0A2540] hover:text-navy-soft focus-within:outline-none"},"Click to upload")],-1)),f.value?(o(),n("p",z0,l(f.value),1)):j("",!0)]),e("input",{type:"file",onChange:T,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/*"},null,32)])])])])])):j("",!0),u.value===2?(o(),n("div",H0,[c[13]||(c[13]=e("h3",{class:"text-xl font-bold text-[#0A2540] mb-2"},"Select Your Industry",-1)),c[14]||(c[14]=e("p",{class:"text-sm text-gray-500 mb-8"},"This helps us auto-configure your store's look and feel.",-1)),e("div",W0,[(o(),n(B,null,N(x,S=>e("div",{key:S.id,onClick:R=>w(S.id),class:I([{"border-[#0A2540] ring-2 ring-[#0A2540]/10 bg-gray-50":p.industry===S.id,"border-gray-100 bg-white":p.industry!==S.id},"group p-6 border rounded-2xl cursor-pointer transition-all duration-300 hover:shadow-xl hover:-translate-y-1 relative overflow-hidden h-full flex flex-col justify-between"])},[e("div",J0,[e("div",K0,l(S.icon),1),v(e("div",Q0,[...c[11]||(c[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])],512),[[G,p.industry===S.id]])]),e("div",null,[e("div",X0,l(S.label),1),e("div",Y0,l(S.desc),1)]),c[12]||(c[12]=e("div",{class:"absolute -bottom-4 -right-4 w-20 h-20 bg-[#0A2540]/5 rounded-full blur-2xl group-hover:bg-[#0A2540]/10 transition-colors"},null,-1))],10,G0)),64))])])):j("",!0),u.value===3?(o(),n("div",Z0,[Q(P0,{modelValue:i.value,"onUpdate:modelValue":c[3]||(c[3]=S=>i.value=S)},null,8,["modelValue"])])):j("",!0),u.value===4?(o(),n("div",ec,[c[17]||(c[17]=e("h3",{class:"text-xl font-bold text-[#0A2540] mb-2"},"Choose Layout Style",-1)),c[18]||(c[18]=e("p",{class:"text-sm text-gray-500 mb-8"},"Select the interface that best represents your brand's experience.",-1)),e("div",tc,[(o(),n(B,null,N(m,(S,R)=>e("div",{key:R,onClick:q=>A(R),class:I([{"border-[#0A2540] ring-4 ring-[#0A2540]/5 bg-gray-50":p.layout_preference===R,"border-gray-100 bg-white":p.layout_preference!==R},"group border-2 rounded-2xl overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-xl hover:-translate-y-1 relative flex flex-col h-full"])},[e("div",oc,[e("div",{innerHTML:S.wireframe,class:"w-full h-full p-6 text-gray-200 group-hover:text-gray-400 transition-colors"},null,8,nc),v(e("div",rc,[...c[15]||(c[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])],512),[[G,p.layout_preference===R]])]),e("div",lc,[e("h4",ic,l(S.label),1),e("p",ac,l(S.description),1),e("div",dc,[(o(!0),n(B,null,N(S.tags,q=>(o(),n("span",{key:q,class:"text-[9px] uppercase font-black text-[#0A2540] bg-[#0A2540]/5 px-2 py-1 rounded-md tracking-widest"},l(q),1))),128))])])],10,sc)),64))]),k.value?(o(),n("div",uc,[c[16]||(c[16]=ae('<div class="bg-[#0A2540] px-4 py-2 flex items-center justify-between" data-v-590dd1b4><div class="flex space-x-2" data-v-590dd1b4><div class="w-3 h-3 rounded-full bg-red-400" data-v-590dd1b4></div><div class="w-3 h-3 rounded-full bg-yellow-400" data-v-590dd1b4></div><div class="w-3 h-3 rounded-full bg-green-400" data-v-590dd1b4></div></div><div class="text-[10px] font-bold text-gray-400 uppercase tracking-widest" data-v-590dd1b4>generated_theme_schema.json</div></div>',1)),e("div",cc,[e("pre",mc,l(JSON.stringify(k.value,null,2)),1)])])):j("",!0)])):j("",!0),e("div",gc,[v(e("button",{onClick:c[4]||(c[4]=S=>u.value--),class:"text-gray-400 hover:text-[#0A2540] font-bold text-sm uppercase tracking-widest transition-colors flex items-center group"},[...c[19]||(c[19]=[e("span",{class:"mr-2 group-hover:-translate-x-1 transition-transform"},"â†",-1),F(" Back ",-1)])],512),[[G,u.value>1]]),v(e("div",null,null,512),[[G,u.value===1]]),v(e("button",{onClick:g,disabled:y.value,class:"bg-[#0A2540] hover:bg-navy-soft text-white font-bold py-4 px-10 rounded-xl transition shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex items-center group text-sm uppercase tracking-widest disabled:opacity-50"},[y.value?(o(),n("span",fc)):j("",!0),c[20]||(c[20]=F(" Next Step ",-1)),c[21]||(c[21]=e("span",{class:"ml-3 group-hover:translate-x-1 transition-transform"},"â†’",-1))],8,pc),[[G,u.value<4]]),v(e("button",{onClick:h,disabled:y.value,class:"bg-[#0A2540] hover:bg-navy-soft text-white font-bold py-4 px-10 rounded-xl transition shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex items-center animate-pulse text-sm uppercase tracking-widest disabled:opacity-50"},[y.value?(o(),n("span",xc)):j("",!0),c[22]||(c[22]=F(" Create My Store ",-1))],8,bc),[[G,u.value===4]])])])])]))}},vc=we(yc,[["__scopeId","data-v-590dd1b4"]]),hc={class:"container mx-auto px-4 py-6"},wc={class:"flex justify-between items-center mb-6"},_c=["href"],kc={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4"},$c={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Sc={class:"lg:col-span-2 space-y-6"},Cc={class:"bg-white rounded-lg shadow p-6"},jc={class:"mb-4"},Uc=["value"],Pc={class:"bg-white rounded-lg shadow p-6"},Tc={class:"w-full text-left border-collapse"},Ac={class:"py-3"},Mc=["onUpdate:modelValue","onChange"],Vc=["value"],Oc={class:"py-3"},Ec=["onUpdate:modelValue"],qc={class:"py-3"},Dc={class:"relative"},Ic={class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},Fc=["onUpdate:modelValue"],Bc={class:"py-3 text-right font-medium"},Nc={class:"py-3 text-right"},Lc=["onClick"],Rc={class:"lg:col-span-1 space-y-6"},zc={class:"bg-white rounded-lg shadow p-6"},Hc={class:"flex justify-between py-2 text-sm"},Wc={class:"font-medium"},Gc={class:"flex justify-between py-2 text-sm border-t border-gray-100 pt-2"},Jc={class:"font-bold text-lg text-indigo-600"},Kc={class:"bg-white rounded-lg shadow p-6"},Qc={class:"mb-4"},Xc={class:"mb-4"},Yc=["disabled"],Zc={key:0,class:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"},em={__name:"OrderCreate",props:{routes:{type:Object,required:!0},currencySymbol:{type:String,default:"$"}},setup(a){const t=a,u=C([]),y=C([]),f=C(!1),p=C(""),i=X({customer_id:"",items:[{product_id:"",quantity:1,price:0}],status:"pending",payment_status:"pending",due_date:"",notes:""});de(async()=>{try{const[A,$]=await Promise.all([J.get(t.routes.customers),J.get(t.routes.products)]);u.value=A.data,y.value=$.data}catch(A){console.error("Failed to load resources",A),p.value="Failed to load customers or products."}});const x=Y(()=>i.items.reduce((A,$)=>A+$.price*$.quantity,0)),b=()=>{i.items.push({product_id:"",quantity:1,price:0})},m=A=>{i.items.length>1&&i.items.splice(A,1)},k=A=>{const $=i.items[A],M=y.value.find(g=>g.id===$.product_id);M&&($.price=parseFloat(M.price||0))},T=A=>t.currencySymbol+Number(A).toFixed(2),w=async()=>{f.value=!0,p.value="";try{const A=await J.post(t.routes.store,i);window.location.href=t.routes.index}catch(A){console.error(A),A.response&&A.response.data&&A.response.data.errors?p.value=Object.values(A.response.data.errors).flat().join(" "):A.response&&A.response.data&&A.response.data.message?p.value=A.response.data.message:p.value="Failed to create order.",f.value=!1}};return(A,$)=>(o(),n("div",hc,[e("div",wc,[$[3]||($[3]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Record Credit Sale",-1)),e("a",{href:a.routes.index,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"},"Back to List",8,_c)]),p.value?(o(),n("div",kc,l(p.value),1)):j("",!0),e("form",{onSubmit:se(w,["prevent"])},[e("div",$c,[e("div",Sc,[e("div",Cc,[$[6]||($[6]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-800"},"Customer",-1)),e("div",jc,[$[5]||($[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Select Customer",-1)),v(e("select",{"onUpdate:modelValue":$[0]||($[0]=M=>i.customer_id=M),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},[$[4]||($[4]=e("option",{value:""},"-- Choose Customer --",-1)),(o(!0),n(B,null,N(u.value,M=>(o(),n("option",{key:M.id,value:M.id},l(M.name)+" ("+l(M.phone)+") ",9,Uc))),128))],512),[[K,i.customer_id]])])]),e("div",Pc,[$[9]||($[9]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-800"},"Items",-1)),e("table",Tc,[$[8]||($[8]=e("thead",null,[e("tr",{class:"text-sm font-medium text-gray-500 border-b border-gray-200"},[e("th",{class:"py-2 w-1/2"},"Product"),e("th",{class:"py-2 w-20"},"Qty"),e("th",{class:"py-2 w-32"},"Price"),e("th",{class:"py-2 w-32 text-right"},"Total"),e("th",{class:"py-2 w-10"})])],-1)),e("tbody",null,[(o(!0),n(B,null,N(i.items,(M,g)=>(o(),n("tr",{key:g,class:"border-b border-gray-100"},[e("td",Ac,[v(e("select",{"onUpdate:modelValue":h=>M.product_id=h,onChange:h=>k(g),class:"w-full rounded border-gray-300 text-sm",required:""},[$[7]||($[7]=e("option",{value:""},"Select Product",-1)),(o(!0),n(B,null,N(y.value,h=>(o(),n("option",{key:h.id,value:h.id},l(h.name),9,Vc))),128))],40,Mc),[[K,M.product_id]])]),e("td",Oc,[v(e("input",{type:"number","onUpdate:modelValue":h=>M.quantity=h,min:"1",class:"w-full rounded border-gray-300 text-sm",required:""},null,8,Ec),[[O,M.quantity,void 0,{number:!0}]])]),e("td",qc,[e("div",Dc,[e("span",Ic,l(a.currencySymbol),1),v(e("input",{type:"number","onUpdate:modelValue":h=>M.price=h,step:"0.01",class:"w-full rounded border-gray-300 pl-7 text-sm",required:""},null,8,Fc),[[O,M.price,void 0,{number:!0}]])])]),e("td",Bc,l(T(M.price*M.quantity)),1),e("td",Nc,[e("button",{type:"button",onClick:h=>m(g),class:"text-red-500 hover:text-red-700"},"Ã—",8,Lc)])]))),128))])]),e("button",{type:"button",onClick:b,class:"mt-4 px-4 py-2 bg-indigo-50 text-indigo-700 rounded hover:bg-indigo-100 text-sm font-medium"}," + Add Line Item ")])]),e("div",Rc,[e("div",zc,[$[12]||($[12]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-800"},"Order Summary",-1)),e("div",Hc,[$[10]||($[10]=e("span",{class:"text-gray-600"},"Subtotal",-1)),e("span",Wc,l(T(x.value)),1)]),e("div",Gc,[$[11]||($[11]=e("span",{class:"text-gray-800 font-bold"},"Total",-1)),e("span",Jc,l(T(x.value)),1)])]),e("div",Kc,[$[16]||($[16]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-800"},"Sale Details",-1)),e("div",Qc,[$[13]||($[13]=e("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Payment Due Date (Optional)",-1)),v(e("input",{type:"date","onUpdate:modelValue":$[1]||($[1]=M=>i.due_date=M),class:"w-full rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,i.due_date]])]),e("div",Xc,[$[14]||($[14]=e("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Notes / Reference",-1)),v(e("input",{type:"text","onUpdate:modelValue":$[2]||($[2]=M=>i.notes=M),class:"w-full rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"PO Number etc."},null,512),[[O,i.notes]])]),$[17]||($[17]=ae('<div class="p-3 bg-yellow-50 rounded-md mb-4 border border-yellow-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-yellow-800">Credit Sale</h3><div class="mt-2 text-sm text-yellow-700"><p>This will record the order as <strong>Pending</strong>. You can update the status to <strong>Completed</strong> later to record revenue.</p></div></div></div></div>',1)),e("button",{type:"submit",disabled:f.value,class:"w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 flex justify-center items-center"},[f.value?(o(),n("span",Zc)):j("",!0),$[15]||($[15]=F(" Record Sale ",-1))],8,Yc)])])])],32)]))}},tm={class:"bg-white rounded-lg shadow"},sm={class:"p-6 border-b border-gray-200"},om={class:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0"},nm={class:"flex space-x-2 bg-gray-100 p-1 rounded-lg"},rm=["onClick"],lm={class:"flex items-center space-x-4 w-full sm:w-auto"},im={class:"relative w-full sm:w-64"},am=["href"],dm={key:0,class:"mt-4 flex items-center justify-between bg-indigo-50 p-3 rounded-lg border border-indigo-100 animate-in fade-in slide-in-from-top-2"},um={class:"flex items-center"},cm={class:"text-sm font-semibold text-indigo-700 ml-2"},mm={class:"flex items-center space-x-2"},gm=["disabled"],pm=["disabled"],fm={key:0,class:"animate-spin -ml-1 mr-2 h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24"},bm={class:"mt-4 flex items-center justify-end text-xs text-gray-500"},xm={class:"flex h-2 w-2 relative mr-2"},ym={key:0,class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"},vm={class:"overflow-x-auto"},hm={class:"min-w-full divide-y divide-gray-200"},wm={class:"bg-gray-50"},_m={scope:"col",class:"px-6 py-3 text-left"},km=["checked"],$m={class:"bg-white divide-y divide-gray-200"},Sm={key:0,class:"animate-pulse"},Cm={key:1},jm={class:"px-6 py-4 whitespace-nowrap"},Um=["value"],Pm={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Tm={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Am={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Mm={class:"px-6 py-4 whitespace-nowrap"},Vm={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Om={class:"flex items-center"},Em={key:0,class:"mr-1.5 h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},qm={key:1,class:"mr-1.5 h-4 w-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Dm={key:2,class:"mr-1.5 h-4 w-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Im={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},Fm={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Bm=["href"],Nm={key:0,class:"px-6 py-4 border-t border-gray-200"},Lm={class:"flex items-center justify-between"},Rm={class:"text-sm text-gray-700"},zm={class:"font-medium"},Hm={class:"font-medium"},Wm={class:"font-medium"},Gm={class:"space-x-2"},Jm=["disabled"],Km=["disabled"],Qm={__name:"OmniChannelOrders",props:{initialOrders:{type:Object,default:()=>({data:[]})},routes:{type:Object,required:!0},currencySymbol:{type:String,default:"$"}},setup(a){const t=(q,d)=>{let _;return function(...H){const L=()=>{clearTimeout(_),q(...H)};clearTimeout(_),_=setTimeout(L,d)}},u=a,y=C(u.initialOrders),f=C(!1),p=C(!1),i=C(null),x=C([]),b=C(""),m=C(!1),k=C(!1),T=[{label:"All Orders",value:"all"},{label:"Online Store",value:"storefront"},{label:"Manual Sales",value:"admin"},{label:"POS Sales List",value:"pos"}],w=X({source:"all",search:""}),A={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},$=async(q=null)=>{p.value=!0;try{const d=q||u.routes.index,_=await J.get(d,{params:{source:w.source==="all"?null:w.source,search:w.search},headers:{Accept:"application/json"}});y.value=_.data,q&&(x.value=[])}catch(d){console.error("Failed to fetch orders",d)}finally{p.value=!1,f.value=!1}},M=()=>{x.value.length===y.value.data.length?(x.value=[],k.value=!1):(x.value=y.value.data.map(q=>q.id),k.value=!0)},g=async()=>{if(!(!b.value||x.value.length===0)&&!(b.value==="delete"&&!confirm(`Are you sure you want to delete ${x.value.length} orders?`))){m.value=!0;try{const q=await J.post(u.routes.bulkAction,{order_ids:x.value,action:b.value});q.data.success&&(x.value=[],b.value="",k.value=!1,$(),alert(q.data.message))}catch(q){console.error("Bulk action failed",q),alert(q.response?.data?.message||"Bulk action failed. Please try again.")}finally{m.value=!1}}},h=q=>{w.source=q,f.value=!0,x.value=[],k.value=!1,$()},V=t(()=>{f.value=!0,$()},300),c=q=>u.currencySymbol+Number(q).toFixed(2),S=q=>{const d={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(q).toLocaleDateString(void 0,d)},R=q=>q.charAt(0).toUpperCase()+q.slice(1);return de(()=>{i.value=setInterval(()=>{$()},15e3)}),be(()=>{i.value&&clearInterval(i.value)}),(q,d)=>(o(),n("div",tm,[e("div",sm,[e("div",om,[e("div",nm,[(o(),n(B,null,N(T,_=>e("button",{key:_.value,onClick:z=>h(_.value),class:I(["px-4 py-2 text-sm font-medium rounded-md transition-colors",w.source===_.value?"bg-white text-gray-900 shadow":"text-gray-500 hover:text-gray-700"])},l(_.label),11,rm)),64))]),e("div",lm,[e("div",im,[d[7]||(d[7]=e("span",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),v(e("input",{"onUpdate:modelValue":d[0]||(d[0]=_=>w.search=_),onInput:d[1]||(d[1]=(..._)=>ue(V)&&ue(V)(..._)),type:"text",placeholder:"Search orders...",class:"pl-10 block w-full rounded-md border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,544),[[O,w.search]])]),e("a",{href:a.routes.create,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," + New Order ",8,am)])]),x.value.length>0?(o(),n("div",dm,[e("div",um,[e("span",cm,l(x.value.length)+" orders selected",1)]),e("div",mm,[v(e("select",{"onUpdate:modelValue":d[2]||(d[2]=_=>b.value=_),class:"text-xs font-bold border-gray-300 rounded-md py-1 focus:ring-indigo-500 focus:border-indigo-500",disabled:m.value},[...d[8]||(d[8]=[ae('<option value="">Status Update</option><option value="status_pending">Set Pending</option><option value="status_processing">Set Processing</option><option value="status_shipped">Set Shipped</option><option value="status_delivered">Set Delivered</option><option value="status_completed">Set Completed</option><option value="status_cancelled">Set Cancelled</option><option value="delete">Delete Orders</option>',8)])],8,gm),[[K,b.value]]),e("button",{onClick:g,disabled:!b.value||m.value,class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-bold rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm"},[m.value?(o(),n("svg",fm,[...d[9]||(d[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):j("",!0),d[10]||(d[10]=F(" Apply Action ",-1))],8,pm),e("button",{onClick:d[3]||(d[3]=_=>x.value=[]),class:"text-xs font-bold text-gray-500 hover:text-gray-700 px-2"}," Cancel ")])])):j("",!0),e("div",bm,[e("span",xm,[p.value?(o(),n("span",ym)):j("",!0),e("span",{class:I(["relative inline-flex rounded-full h-2 w-2",p.value?"bg-indigo-500":"bg-green-500"])},null,2)]),F(" "+l(p.value?"Updating...":"Live"),1)])]),e("div",vm,[e("table",hm,[e("thead",wm,[e("tr",null,[e("th",_m,[e("input",{type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 h-4 w-4",checked:k.value,onChange:M},null,40,km)]),d[11]||(d[11]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order # ",-1)),d[12]||(d[12]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer ",-1)),d[13]||(d[13]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date ",-1)),d[14]||(d[14]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),d[15]||(d[15]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Source ",-1)),d[16]||(d[16]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total ",-1)),d[17]||(d[17]=e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")],-1))])]),e("tbody",$m,[f.value?(o(),n("tr",Sm,[...d[18]||(d[18]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"},"Loading orders...",-1)])])):y.value.data.length===0?(o(),n("tr",Cm,[...d[19]||(d[19]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"},"No orders found.",-1)])])):j("",!0),(o(!0),n(B,null,N(y.value.data,_=>(o(),n("tr",{key:_.id,class:I(["hover:bg-gray-50 transition-colors",{"bg-indigo-50/30":x.value.includes(_.id)}])},[e("td",jm,[v(e("input",{type:"checkbox","onUpdate:modelValue":d[4]||(d[4]=z=>x.value=z),value:_.id,class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 h-4 w-4"},null,8,Um),[[oe,x.value]])]),e("td",Pm,l(_.order_number),1),e("td",Tm,l(_.customer?_.customer.name:"Guest"),1),e("td",Am,l(S(_.created_at)),1),e("td",Mm,[e("span",{class:I(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",A[_.status]||"bg-gray-100 text-gray-800"])},l(R(_.status)),3)]),e("td",Vm,[e("span",Om,[_.order_source==="storefront"?(o(),n("svg",Em,[...d[20]||(d[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])])):_.order_source==="pos"?(o(),n("svg",qm,[...d[21]||(d[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])):(o(),n("svg",Dm,[...d[22]||(d[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])])),F(" "+l(R(_.order_source)),1)])]),e("td",Im,l(c(_.total)),1),e("td",Fm,[e("a",{href:`${a.routes.base}/${_.id}`,class:"text-indigo-600 hover:text-indigo-900"},"View",8,Bm)])],2))),128))])])]),y.value.data.length>0?(o(),n("div",Nm,[e("div",Lm,[e("div",Rm,[d[23]||(d[23]=F(" Showing ",-1)),e("span",zm,l(y.value.from),1),d[24]||(d[24]=F(" to ",-1)),e("span",Hm,l(y.value.to),1),d[25]||(d[25]=F(" of ",-1)),e("span",Wm,l(y.value.total),1),d[26]||(d[26]=F(" results ",-1))]),e("div",Gm,[e("button",{onClick:d[5]||(d[5]=_=>$(y.value.prev_page_url)),disabled:!y.value.prev_page_url,class:"px-3 py-1 border-2 border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Previous ",8,Jm),e("button",{onClick:d[6]||(d[6]=_=>$(y.value.next_page_url)),disabled:!y.value.next_page_url,class:"px-3 py-1 border-2 border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Next ",8,Km)])])])):j("",!0)]))}},Xm={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ym={class:"p-6 bg-white border-b border-gray-200"},Zm={class:"overflow-x-auto"},eg={class:"min-w-full divide-y divide-gray-200"},tg={class:"bg-white divide-y divide-gray-200"},sg=["onClick"],og={class:"px-6 py-4 whitespace-nowrap"},ng={class:"px-6 py-4 whitespace-nowrap"},rg={class:"text-sm font-medium text-gray-900"},lg={class:"text-sm text-gray-500"},ig={class:"px-6 py-4 whitespace-nowrap"},ag={class:"text-sm text-gray-900"},dg={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ug={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},cg=["onClick"],mg={key:0},gg={class:"mt-4"},pg={key:0,class:"fixed inset-0 z-50 overflow-hidden",role:"dialog","aria-modal":"true"},fg={class:"absolute inset-0 overflow-hidden"},bg={class:"fixed inset-y-0 right-0 pl-10 max-w-full flex"},xg={class:"h-full flex flex-col bg-white shadow-xl overflow-y-scroll"},yg={class:"py-6 px-4 sm:px-6 bg-[#0A2540]"},vg={class:"mt-1"},hg={class:"text-sm text-blue-100"},wg={class:"relative flex-1 py-6 px-4 sm:px-6"},_g={class:"space-y-6"},kg={class:"mt-1 flex items-center"},$g={class:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold uppercase mr-3"},Sg={class:"text-sm font-medium text-gray-900"},Cg=["href"],jg={class:"mt-1 text-sm text-gray-900 font-semibold"},Ug={class:"mt-2 text-sm text-gray-900 bg-gray-50 p-4 rounded-lg whitespace-pre-wrap leading-relaxed border border-gray-100"},Pg={class:"border-t border-gray-200 py-6 px-4 sm:px-6"},Tg=["href"],Ag={__name:"MessageInbox",props:{initialMessages:{type:Array,default:()=>[]},readUrlTemplate:{type:String,required:!0},csrfToken:String},setup(a){const t=a,u=C([...t.initialMessages]),y=C(!1),f=C({}),p=async m=>{if(f.value=m,y.value=!0,!m.is_read){const k=u.value.findIndex(T=>T.id===m.id);k!==-1&&(u.value[k].is_read=!0);try{const T=t.readUrlTemplate.replace(":id",m.id);await J.post(T)}catch(T){console.error("Failed to mark message as read",T)}}},i=()=>{y.value=!1},x=m=>m?new Date(m).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"",b=(m,k)=>m?m.length>k?m.substring(0,k)+"...":m:"";return fe(()=>t.initialMessages,m=>{u.value=[...m]}),(m,k)=>(o(),n("div",null,[e("div",Xm,[e("div",Ym,[e("div",Zm,[e("table",eg,[k[1]||(k[1]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Customer"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subject"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Action")])])],-1)),e("tbody",tg,[(o(!0),n(B,null,N(u.value,T=>(o(),n("tr",{key:T.id,class:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:w=>p(T)},[e("td",og,[e("span",{class:I(["inline-block h-3 w-3 rounded-full transition-colors duration-300",T.is_read?"bg-gray-300":"bg-blue-600"])},null,2)]),e("td",ng,[e("div",rg,l(T.name),1),e("div",lg,l(T.email),1)]),e("td",ig,[e("div",ag,l(b(T.subject,40)),1)]),e("td",dg,l(x(T.created_at)),1),e("td",ug,[e("button",{onClick:se(w=>p(T),["stop"]),class:"text-indigo-600 hover:text-indigo-900"},"View",8,cg)])],8,sg))),128)),u.value.length===0?(o(),n("tr",mg,[...k[0]||(k[0]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500"}," No messages found. ",-1)])])):j("",!0)])])]),e("div",gg,[ie(m.$slots,"pagination")])])]),(o(),Ve(Ke,{to:"body"},[y.value?(o(),n("div",pg,[e("div",fg,[e("div",{class:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:i,"aria-hidden":"true"}),e("div",bg,[e("div",{class:I(["w-screen max-w-md transform transition ease-in-out duration-500 sm:duration-700",y.value?"translate-x-0":"translate-x-full"])},[e("div",xg,[e("div",yg,[e("div",{class:"flex items-center justify-between"},[k[3]||(k[3]=e("h2",{class:"text-lg font-medium text-white"},"Message Details",-1)),e("div",{class:"ml-3 h-7 flex items-center"},[e("button",{type:"button",class:"bg-[#0A2540] rounded-md text-gray-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",onClick:i},[...k[2]||(k[2]=[e("span",{class:"sr-only"},"Close panel",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",vg,[e("p",hg," Received on "+l(x(f.value.created_at)),1)])]),e("div",wg,[e("div",_g,[e("div",null,[k[4]||(k[4]=e("label",{class:"block text-sm font-medium text-gray-500"},"From",-1)),e("div",kg,[e("div",$g,l(f.value.name?f.value.name.charAt(0):"?"),1),e("div",null,[e("p",Sg,l(f.value.name),1),e("a",{href:"mailto:"+f.value.email,class:"text-sm text-indigo-600 hover:text-indigo-900"},l(f.value.email),9,Cg)])])]),e("div",null,[k[5]||(k[5]=e("label",{class:"block text-sm font-medium text-gray-500"},"Subject",-1)),e("div",jg,l(f.value.subject),1)]),e("div",null,[k[6]||(k[6]=e("label",{class:"block text-sm font-medium text-gray-500"},"Message",-1)),e("div",Ug,l(f.value.message),1)])])]),e("div",Pg,[e("a",{href:"mailto:"+f.value.email+"?subject=Re: "+f.value.subject,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Reply via Email ",8,Tg)])])],2)])])])):j("",!0)]))]))}},Mg={class:"border-b border-gray-200 mb-6"},Vg={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Og={key:0,class:"bg-green-50 border-l-4 border-green-400 p-4 mb-4",role:"alert"},Eg={class:"text-sm text-green-600"},qg={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-4",role:"alert"},Dg={class:"text-sm text-red-600"},Ig={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Fg={class:"p-6 text-gray-900"},Bg={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ng={class:"space-y-4"},Lg={class:"mt-2 flex items-center justify-center w-full"},Rg={class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},zg={class:"flex flex-col items-center justify-center pt-5 pb-6 text-center"},Hg=["src"],Wg={key:1},Gg={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Jg={class:"p-6 text-gray-900"},Kg={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qg={class:"mt-2 text-center"},Xg=["src"],Yg={class:"mt-2 text-center"},Zg=["src"],ep={class:"mt-4"},tp={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},sp={class:"p-6 text-gray-900"},op={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},np={class:"inline-flex items-center cursor-pointer"},rp={class:"inline-flex items-center cursor-pointer"},lp={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},ip={class:"p-6 text-gray-900"},ap={class:"space-y-4"},dp={class:"space-y-2 mt-2"},up=["onUpdate:modelValue"],cp=["onUpdate:modelValue"],mp=["onClick"],gp={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},pp={class:"p-6 text-gray-900"},fp={class:"grid grid-cols-1 gap-6"},bp={class:"mt-2 text-center"},xp=["src"],yp={class:"space-y-4"},vp={class:"flex justify-between items-center mb-1"},hp=["disabled"],wp={class:"bg-gray-50 p-6 rounded-xl border border-gray-100"},_p={class:"flex justify-between items-center mb-4"},kp=["disabled"],$p={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Sp={class:"md:col-span-1"},Cp={class:"md:col-span-2"},jp={class:"space-y-3 mt-2"},Up={class:"flex-1"},Pp=["onUpdate:modelValue"],Tp={class:"flex-1"},Ap=["onUpdate:modelValue"],Mp={class:"pt-5"},Vp=["onClick"],Op={class:"space-y-6 mb-6"},Ep={class:"p-6 text-gray-900"},qp={class:"flex justify-between items-center border-b pb-2 mb-4"},Dp={class:"text-lg font-medium text-gray-900 uppercase"},Ip=["onClick","disabled"],Fp=["onUpdate:modelValue"],Bp={class:"flex justify-end sticky bottom-4 z-10"},Np=["disabled"],Lp={key:0,class:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"},Rp={__name:"StoreContent",props:{initialContent:{type:Object,default:()=>({})},initialContact:{type:Object,default:()=>({social_links:[]})},initialSplitBanner:{type:Object,default:()=>({})},initialAboutUs:{type:Object,default:()=>({stats:[]})},initialPolicies:{type:Object,default:()=>({})},showNewArrivals:{type:Boolean,default:!1},showBestSellers:{type:Boolean,default:!1},routes:{type:Object,required:!0},config:{type:Object,default:()=>({})}},setup(a){const t=a,u=C("home"),y=C(!1),f=C(!1),p=C(""),i=C(""),x=C(null),b=C(null),m=C(null),k=C(null),T=X({hero_title:t.initialContent.hero_title||"",hero_subtitle:t.initialContent.hero_subtitle||"",cta_text:t.initialContent.cta_text||"",hero_image:null,split_title:t.initialSplitBanner.center_text?.title||"",split_image_left:null,split_image_right:null,show_new_arrivals:t.showNewArrivals,show_best_sellers:t.showBestSellers,contact_email:t.initialContact.email||"",social_links:t.initialContact.social_links||[],about_title:t.initialAboutUs.title||"",about_content:t.initialAboutUs.content||"",about_mission_title:t.initialAboutUs.mission_title||"",about_mission_text:t.initialAboutUs.mission_text||"",about_hero_image:null,about_stats:t.initialAboutUs.stats||[],policy_faq:t.initialPolicies.faq||"",policy_shipping:t.initialPolicies.shipping||"",policy_returns:t.initialPolicies.returns||""}),w=()=>{t.initialContent.banner_image&&(x.value=A(t.initialContent.banner_image)),t.initialSplitBanner.image_left&&(b.value=A(t.initialSplitBanner.image_left)),t.initialSplitBanner.image_right&&(m.value=A(t.initialSplitBanner.image_right)),t.initialAboutUs.hero_image&&(k.value=A(t.initialAboutUs.hero_image))},A=q=>q?q.startsWith("http")?q:t.routes.media_base+"?path="+q:null,$=(q,d,_)=>{const z=q.target.files[0];if(z){T[d]=z;const H=new FileReader;H.onload=L=>{_==="previewHero"&&(x.value=L.target.result),_==="previewSplitLeft"&&(b.value=L.target.result),_==="previewSplitRight"&&(m.value=L.target.result),_==="previewAboutHero"&&(k.value=L.target.result)},H.readAsDataURL(z)}},M=()=>{T.social_links.push({platform:"facebook",url:""})},g=q=>{T.social_links.splice(q,1)},h=()=>{T.about_stats.push({label:"",value:""})},V=q=>{T.about_stats.splice(q,1)},c=async()=>{y.value=!0,p.value="",i.value="";const q=new FormData;for(const d in T)d==="social_links"||d==="about_stats"||T[d]!==null&&T[d]!==void 0&&(typeof T[d]=="boolean"?q.append(d,T[d]?"1":"0"):q.append(d,T[d]));T.social_links.forEach((d,_)=>{q.append(`social_links[${_}][platform]`,d.platform),q.append(`social_links[${_}][url]`,d.url)}),T.about_stats.forEach((d,_)=>{q.append(`about_stats[${_}][label]`,d.label),q.append(`about_stats[${_}][value]`,d.value)});try{await J.post(t.routes.update,q,{headers:{"Content-Type":"multipart/form-data"}}),p.value="Store content updated successfully!",window.scrollTo(0,0)}catch(d){console.error(d),d.response&&d.response.data&&d.response.data.errors?i.value=Object.values(d.response.data.errors).flat().join(" "):i.value="Failed to update content.",window.scrollTo(0,0)}finally{y.value=!1}},S=async q=>{f.value=!0,await new Promise(L=>setTimeout(L,800));const d=t.config.industry||"fashion",_=t.config.store_name||"Our Store";let z={fashion:{mission:"To empower individuals to express their unique identity through timeless style.",story:`We started ${_} with a simple belief: fashion should be accessible, sustainable, and personal.`,mission_title:"Our Mission"},electronics:{mission:"Bringing the future to your doorstep with cutting-edge technology.",story:`Technology moves fast. At ${_}, we curate the best gadgets to help you stay ahead of the curve.`,mission_title:"Our Mission"},grocery:{mission:"Farm-fresh quality for healthy, happy families.",story:"We believe good food brings people together. Thatâ€™s why we source only the freshest ingredients from trusted local farmers and deliver them straight to your table.",mission_title:"Our Mission"}};const H=z[d.toLowerCase()]||z.fashion;q==="mission"?(T.about_mission_text=H.mission,T.about_mission_title||(T.about_mission_title=H.mission_title)):q==="content"&&(T.about_content=H.story),f.value=!1},R=async q=>{f.value=!0;try{const d=await J.post(t.routes.generate_policy,{type:q});d.data.content&&(T["policy_"+q]=d.data.content)}catch{alert("Failed to generate policy.")}finally{f.value=!1}};return de(()=>{w()}),(q,d)=>(o(),n("div",null,[e("div",Mg,[e("nav",Vg,[e("button",{onClick:d[0]||(d[0]=_=>u.value="home"),class:I([u.value==="home"?"border-[#0A2540] text-[#0A2540]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}," Home Content ",2),e("button",{onClick:d[1]||(d[1]=_=>u.value="pages"),class:I([u.value==="pages"?"border-[#0A2540] text-[#0A2540]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}," Page Content ",2),e("button",{onClick:d[2]||(d[2]=_=>u.value="policies"),class:I([u.value==="policies"?"border-[#0A2540] text-[#0A2540]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}," Store Policies ",2)])]),p.value?(o(),n("div",Og,[d[20]||(d[20]=e("p",{class:"font-bold text-green-700"},"Success",-1)),e("p",Eg,l(p.value),1)])):j("",!0),i.value?(o(),n("div",qg,[d[21]||(d[21]=e("p",{class:"font-bold text-red-700"},"Error",-1)),e("p",Dg,l(i.value),1)])):j("",!0),e("form",{onSubmit:se(c,["prevent"])},[v(e("div",null,[e("div",Ig,[e("div",Fg,[d[27]||(d[27]=e("h3",{class:"text-lg font-medium text-gray-900 border-b pb-2 mb-4"},"Hero Section",-1)),e("div",Bg,[e("div",Ng,[e("div",null,[d[22]||(d[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Main Headline",-1)),v(e("input",{type:"text","onUpdate:modelValue":d[3]||(d[3]=_=>T.hero_title=_),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,T.hero_title]])]),e("div",null,[d[23]||(d[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Sub-Headline",-1)),v(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=_=>T.hero_subtitle=_),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,T.hero_subtitle]])]),e("div",null,[d[24]||(d[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Call to Action Text",-1)),v(e("input",{type:"text","onUpdate:modelValue":d[5]||(d[5]=_=>T.cta_text=_),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,T.cta_text]])])]),e("div",null,[d[26]||(d[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Hero Image",-1)),e("div",Lg,[e("label",Rg,[e("div",zg,[x.value?(o(),n("img",{key:0,src:x.value,class:"h-48 object-cover rounded-md mb-2"},null,8,Hg)):(o(),n("div",Wg,[...d[25]||(d[25]=[e("svg",{class:"w-8 h-8 mb-4 text-gray-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"text-sm text-gray-500"},"Click to upload",-1)])]))]),e("input",{type:"file",class:"hidden",accept:"image/*",onChange:d[6]||(d[6]=_=>$(_,"hero_image","previewHero"))},null,32)])])])])])]),e("div",Gg,[e("div",Jg,[d[31]||(d[31]=e("h3",{class:"text-lg font-medium text-gray-900 border-b pb-2 mb-4"},"Promotional Banners (Split Banner)",-1)),e("div",Kg,[e("div",null,[d[28]||(d[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Left Image",-1)),e("div",Qg,[b.value?(o(),n("img",{key:0,src:b.value,class:"h-32 object-cover rounded-md mx-auto mb-2"},null,8,Xg)):j("",!0),e("input",{type:"file",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",accept:"image/*",onChange:d[7]||(d[7]=_=>$(_,"split_image_left","previewSplitLeft"))},null,32)])]),e("div",null,[d[29]||(d[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Right Image",-1)),e("div",Yg,[m.value?(o(),n("img",{key:0,src:m.value,class:"h-32 object-cover rounded-md mx-auto mb-2"},null,8,Zg)):j("",!0),e("input",{type:"file",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",accept:"image/*",onChange:d[8]||(d[8]=_=>$(_,"split_image_right","previewSplitRight"))},null,32)])])]),e("div",ep,[d[30]||(d[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Center Title",-1)),v(e("input",{type:"text","onUpdate:modelValue":d[9]||(d[9]=_=>T.split_title=_),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,T.split_title]])])])]),e("div",tp,[e("div",sp,[d[36]||(d[36]=e("h3",{class:"text-lg font-medium text-gray-900 border-b pb-2 mb-4"},"Section Visibility",-1)),e("div",op,[e("label",np,[v(e("input",{type:"checkbox","onUpdate:modelValue":d[10]||(d[10]=_=>T.show_new_arrivals=_),class:"sr-only peer"},null,512),[[oe,T.show_new_arrivals]]),d[32]||(d[32]=e("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1)),d[33]||(d[33]=e("span",{class:"ms-3 text-sm font-medium text-gray-900"},"Show New Arrivals",-1))]),e("label",rp,[v(e("input",{type:"checkbox","onUpdate:modelValue":d[11]||(d[11]=_=>T.show_best_sellers=_),class:"sr-only peer"},null,512),[[oe,T.show_best_sellers]]),d[34]||(d[34]=e("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1)),d[35]||(d[35]=e("span",{class:"ms-3 text-sm font-medium text-gray-900"},"Show Best Sellers",-1))])])])]),e("div",lp,[e("div",ip,[d[42]||(d[42]=e("h3",{class:"text-lg font-medium text-gray-900 border-b pb-2 mb-4"},"Contact Info",-1)),e("div",ap,[e("div",null,[d[37]||(d[37]=e("label",{class:"block text-sm font-medium text-gray-700"},"Support Email",-1)),v(e("input",{type:"email","onUpdate:modelValue":d[12]||(d[12]=_=>T.contact_email=_),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,T.contact_email]])]),e("div",null,[d[41]||(d[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Social Media Links",-1)),e("div",dp,[(o(!0),n(B,null,N(T.social_links,(_,z)=>(o(),n("div",{key:z,class:"flex gap-2"},[v(e("select",{"onUpdate:modelValue":H=>_.platform=H,class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-1/3"},[...d[38]||(d[38]=[ae('<option value="facebook">Facebook</option><option value="instagram">Instagram</option><option value="twitter">Twitter/X</option><option value="linkedin">LinkedIn</option><option value="tiktok">TikTok</option><option value="youtube">YouTube</option>',6)])],8,up),[[K,_.platform]]),v(e("input",{type:"url","onUpdate:modelValue":H=>_.url=H,placeholder:"https://...",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm flex-1"},null,8,cp),[[O,_.url]]),e("button",{type:"button",onClick:H=>g(z),class:"text-red-500 hover:text-red-700"},[...d[39]||(d[39]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,mp)]))),128)),e("button",{type:"button",onClick:M,class:"mt-2 text-sm text-indigo-600 hover:text-indigo-900 font-medium flex items-center"},[...d[40]||(d[40]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),F(" Add Social Link ",-1)])])])])])])])],512),[[G,u.value==="home"]]),v(e("div",null,[e("div",gp,[e("div",pp,[d[54]||(d[54]=e("div",{class:"flex justify-between items-center border-b pb-2 mb-4"},[e("h3",{class:"text-lg font-medium text-gray-900"},"About Us Page"),e("span",{class:"bg-gray-100 text-gray-600 text-xs font-mono px-2 py-1 rounded"},"/about-us")],-1)),e("div",fp,[e("div",null,[d[43]||(d[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"About Hero Image",-1)),e("div",bp,[k.value?(o(),n("img",{key:0,src:k.value,class:"h-32 object-cover rounded-md mx-auto mb-2"},null,8,xp)):j("",!0),e("input",{type:"file",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",accept:"image/*",onChange:d[13]||(d[13]=_=>$(_,"about_hero_image","previewAboutHero"))},null,32)])]),e("div",yp,[e("div",null,[d[44]||(d[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Page Headline",-1)),v(e("input",{type:"text","onUpdate:modelValue":d[14]||(d[14]=_=>T.about_title=_),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,T.about_title]])]),e("div",null,[e("div",vp,[d[45]||(d[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Main Story (Content)",-1)),e("button",{type:"button",onClick:d[15]||(d[15]=_=>S("content")),disabled:f.value,class:"text-xs font-bold text-white bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 px-3 py-1 rounded-full shadow-md transition transform hover:scale-105 disabled:opacity-50"},l(f.value?"Generating...":"âœ¨ AI Suggest"),9,hp)]),v(e("textarea",{"onUpdate:modelValue":d[16]||(d[16]=_=>T.about_content=_),rows:"6",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,T.about_content]])])]),e("div",wp,[e("div",_p,[d[46]||(d[46]=e("h4",{class:"text-md font-bold text-gray-900"},"Mission Statement",-1)),e("button",{type:"button",onClick:d[17]||(d[17]=_=>S("mission")),disabled:f.value,class:"text-xs font-bold text-white bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 px-3 py-1 rounded-full shadow-md transition transform hover:scale-105 disabled:opacity-50"},l(f.value?"Generating...":"âœ¨ AI Suggest"),9,kp)]),e("div",$p,[e("div",Sp,[d[47]||(d[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mission Title",-1)),v(e("input",{type:"text","onUpdate:modelValue":d[18]||(d[18]=_=>T.about_mission_title=_),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,T.about_mission_title]])]),e("div",Cp,[d[48]||(d[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Mission Text",-1)),v(e("textarea",{"onUpdate:modelValue":d[19]||(d[19]=_=>T.about_mission_text=_),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,T.about_mission_text]])])])]),e("div",null,[d[53]||(d[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Company Stats",-1)),e("div",jp,[(o(!0),n(B,null,N(T.about_stats,(_,z)=>(o(),n("div",{key:z,class:"flex items-center gap-3 bg-gray-50 p-3 rounded-lg border border-gray-100"},[e("div",Up,[d[49]||(d[49]=e("label",{class:"block text-xs text-gray-500 mb-1"},"Label",-1)),v(e("input",{type:"text","onUpdate:modelValue":H=>_.label=H,class:"block w-full text-sm border-gray-300 rounded-md shadow-sm"},null,8,Pp),[[O,_.label]])]),e("div",Tp,[d[50]||(d[50]=e("label",{class:"block text-xs text-gray-500 mb-1"},"Value",-1)),v(e("input",{type:"text","onUpdate:modelValue":H=>_.value=H,class:"block w-full text-sm font-bold border-gray-300 rounded-md shadow-sm"},null,8,Ap),[[O,_.value]])]),e("div",Mp,[e("button",{type:"button",onClick:H=>V(z),class:"text-red-400 hover:text-red-600"},[...d[51]||(d[51]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Vp)])]))),128))]),e("button",{type:"button",onClick:h,class:"mt-3 text-sm text-[#0A2540] hover:text-indigo-600 font-bold flex items-center bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg inline-block"},[...d[52]||(d[52]=[e("svg",{class:"w-4 h-4 mr-1 inline-block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),F(" Add Metric ",-1)])])])])])])],512),[[G,u.value==="pages"]]),v(e("div",null,[e("div",Op,[(o(),n(B,null,N(["faq","shipping","returns"],_=>e("div",{key:_,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},[e("div",Ep,[e("div",qp,[e("h3",Dp,l(_)+" Policy",1),e("button",{type:"button",onClick:z=>R(_),disabled:f.value,class:"text-xs font-bold text-white bg-gradient-to-r from-teal-500 to-emerald-600 hover:from-teal-600 hover:to-emerald-700 px-3 py-1 rounded-full shadow-md transition transform hover:scale-105 disabled:opacity-50"},l(f.value?"Writing...":"âœ¨ AI Suggest"),9,Ip)]),v(e("textarea",{"onUpdate:modelValue":z=>T["policy_"+_]=z,rows:"10",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm font-mono text-sm"},null,8,Fp),[[O,T["policy_"+_]]])])])),64))])],512),[[G,u.value==="policies"]]),e("div",Bp,[e("button",{type:"submit",disabled:y.value,class:"bg-[#0A2540] hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-full shadow-xl hover:shadow-2xl transition transform hover:-translate-y-1 flex items-center"},[y.value?(o(),n("span",Lp)):j("",!0),d[55]||(d[55]=F(" Save Changes ",-1))],8,Np)])],32)]))}},zp={props:{tenant:{type:Object,default:null},tenantLogoUrl:{type:String,default:null},routes:{type:Object,required:!0},oldEmail:{type:String,default:""},errors:{type:Object,default:()=>({})},status:{type:String,default:null},csrfToken:{type:String,required:!0}},data(){return{form:{email:this.oldEmail,password:"",remember:!1},showPassword:!1}},computed:{targetRoute(){return this.routes.login}}},Hp={class:"font-sans antialiased bg-gray-950 text-white min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative overflow-hidden"},Wp={class:"relative z-10 sm:mx-auto sm:w-full sm:max-w-md"},Gp={class:"flex justify-center mb-6"},Jp={href:"/"},Kp={key:0,class:"bg-white/10 p-3 rounded-xl backdrop-blur-sm border border-white/10"},Qp=["src","alt"],Xp={key:1,class:"bg-white/10 p-3 rounded-full backdrop-blur-sm border border-white/10"},Yp={class:"text-center text-3xl font-bold tracking-tight text-white"},Zp={class:"mt-2 text-center text-sm text-gray-400"},ef={class:"relative z-10 mt-8 sm:mx-auto sm:w-full sm:max-w-md"},tf={class:"bg-white/5 backdrop-blur-xl border border-white/10 py-8 px-4 shadow-2xl rounded-2xl sm:px-10"},sf={key:0,class:"mb-6 rounded-lg bg-green-500/10 border border-green-500/20 p-4 text-green-400 text-sm"},of={key:1,class:"mb-6 rounded-lg bg-red-500/10 border border-red-500/20 p-4"},nf={class:"list-disc list-inside text-sm text-red-400"},rf=["action"],lf=["value"],af={class:"mt-1"},df={class:"mt-1 relative"},uf=["type"],cf={key:0,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},mf={key:1,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gf={class:"flex items-center justify-between"},pf={class:"flex items-center"},ff={key:0,class:"text-sm"},bf=["href"],xf={key:2,class:"mt-4 pt-4 border-t border-gray-700 text-center"},yf=["href"];function vf(a,t,u,y,f,p){return o(),n("div",Hp,[t[13]||(t[13]=e("div",{class:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none"},[e("div",{class:"absolute top-[-20%] right-[-10%] w-[50%] h-[50%] bg-blue-600/10 rounded-full blur-[120px]"}),e("div",{class:"absolute bottom-[-20%] left-[-10%] w-[50%] h-[50%] bg-purple-600/10 rounded-full blur-[120px]"})],-1)),e("div",Wp,[e("div",Gp,[e("a",Jp,[u.tenant&&u.tenantLogoUrl?(o(),n("div",Kp,[e("img",{src:u.tenantLogoUrl,alt:u.tenant.name,class:"h-16 w-auto object-contain"},null,8,Qp)])):(o(),n("div",Xp,[...t[4]||(t[4]=[e("svg",{class:"h-10 w-10 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)])]))])]),e("h2",Yp,l(u.tenant?u.tenant.name:"Admin Portal"),1),e("p",Zp,l(u.tenant?"Sign in to your dashboard":"Secure access for platform administrators"),1)]),e("div",ef,[e("div",tf,[u.status?(o(),n("div",sf,l(u.status),1)):j("",!0),u.errors&&Object.keys(u.errors).length>0?(o(),n("div",of,[e("ul",nf,[(o(!0),n(B,null,N(u.errors,(i,x)=>(o(),n("li",{key:x},l(i[0]||i),1))),128))])])):j("",!0),e("form",{class:"space-y-6",action:p.targetRoute,method:"POST"},[e("input",{type:"hidden",name:"_token",value:u.csrfToken},null,8,lf),e("div",null,[t[5]||(t[5]=e("label",{for:"email",class:"block text-sm font-medium text-gray-300"},"Email Address",-1)),e("div",af,[v(e("input",{id:"email",name:"email",type:"email",autocomplete:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=i=>f.form.email=i),autofocus:"",class:"appearance-none block w-full px-3 py-2 bg-gray-900/50 border-2 border-gray-700 rounded-lg shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm text-white transition-colors",placeholder:"you@example.com"},null,512),[[O,f.form.email]])])]),e("div",null,[t[8]||(t[8]=e("label",{for:"password",class:"block text-sm font-medium text-gray-300"},"Password",-1)),e("div",df,[v(e("input",{type:f.showPassword?"text":"password",id:"password",name:"password",required:"",autocomplete:"current-password","onUpdate:modelValue":t[1]||(t[1]=i=>f.form.password=i),class:"appearance-none block w-full px-3 py-2 bg-gray-900/50 border-2 border-gray-700 rounded-lg shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm text-white transition-colors pr-10"},null,8,uf),[[Qe,f.form.password]]),e("button",{type:"button",onClick:t[2]||(t[2]=i=>f.showPassword=!f.showPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-300 focus:outline-none"},[f.showPassword?(o(),n("svg",mf,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(o(),n("svg",cf,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),e("div",gf,[e("div",pf,[v(e("input",{id:"remember_me",name:"remember",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=i=>f.form.remember=i),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-700 bg-gray-900 rounded"},null,512),[[oe,f.form.remember]]),t[9]||(t[9]=e("label",{for:"remember_me",class:"ml-2 block text-sm text-gray-400"}," Remember me ",-1))]),u.routes.passwordRequest?(o(),n("div",ff,[e("a",{href:u.routes.passwordRequest,class:"font-medium text-blue-400 hover:text-blue-300 transition"}," Forgot password? ",8,bf)])):j("",!0)]),t[10]||(t[10]=e("div",null,[e("button",{type:"submit",class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-lg shadow-blue-600/20 text-sm font-semibold text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all transform hover:scale-[1.02]"}," Sign In ")],-1))],8,rf),u.tenant&&u.routes.supportInfo?(o(),n("div",xf,[t[11]||(t[11]=e("p",{class:"text-sm text-gray-400"},"Cannot login?",-1)),e("a",{href:u.routes.supportInfo,class:"mt-1 inline-block text-sm font-medium text-blue-400 hover:text-blue-300 transition"}," Submit a Ticket ",8,yf)])):j("",!0)]),t[12]||(t[12]=e("div",{class:"mt-6 text-center"},[e("a",{href:"/",class:"text-xs text-gray-500 hover:text-gray-300 transition flex items-center justify-center gap-1"},[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})]),F(" Back to Landing Page ")])],-1))])])}const hf=we(zp,[["render",vf]]),wf={class:"max-w-4xl mx-auto py-6"},_f={class:"mb-6 flex justify-between items-center"},kf=["href"],$f={key:0,class:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 relative"},Sf={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 relative"},Cf={key:0,class:"list-disc pl-5"},jf={key:1},Uf={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6"},Pf={class:"p-6"},Tf={class:"flex items-center space-x-2"},Af={class:"bg-gray-100 px-4 py-2 rounded text-indigo-600 font-mono text-lg block w-full border border-gray-200"},Mf=["href"],Vf={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},Of={class:"p-6"},Ef={class:"flex justify-between items-start"},qf={class:"mt-2 flex items-center space-x-2"},Df={key:0,class:"text-sm text-gray-500"},If={key:0},Ff=["disabled"],Bf={key:0,class:"mt-6 border-t border-yellow-200 pt-4"},Nf={class:"bg-white p-3 rounded border border-yellow-200 text-sm"},Lf={class:"grid grid-cols-3 gap-4 font-mono text-gray-800"},Rf={key:1},zf={class:"mb-6"},Hf={class:"relative rounded-md shadow-sm"},Wf={class:"bg-blue-50 border border-blue-100 rounded-lg p-4 mb-6"},Gf={class:"text-sm text-blue-800"},Jf={class:"bg-blue-100 px-1 py-0.5 rounded font-mono"},Kf=["disabled"],Qf={__name:"DomainSettings",props:{initialData:{type:Object,required:!0},routes:{type:Object,required:!0}},setup(a){const t=a,u=C(t.initialData.currentRequest),y=C(""),f=C(!1),p=C(""),i=C(""),x=async()=>{f.value=!0,i.value="",p.value="";try{const m=await J.post(t.routes.domainRequest,{domain:y.value});m.data.success&&(u.value={id:m.data.request.id,domain:m.data.request.domain,status:m.data.request.status,created_at:"Just now"},p.value=m.data.message,y.value="")}catch(m){m.response&&m.response.data&&m.response.data.errors?i.value=m.response.data.errors:m.response&&m.response.data&&m.response.data.message?i.value=m.response.data.message:i.value="Failed to submit domain request."}finally{f.value=!1}},b=async()=>{if(confirm("Are you sure you want to cancel this request?")){f.value=!0,i.value="",p.value="";try{const m=t.routes.domainCancel.replace(":id",u.value.id),k=await J.delete(m);k.data.success&&(u.value=null,p.value=k.data.message)}catch(m){m.response&&m.response.data&&m.response.data.message?i.value=m.response.data.message:i.value="Failed to cancel request."}finally{f.value=!1}}};return(m,k)=>(o(),n("div",wf,[e("div",_f,[k[3]||(k[3]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-800"},"Domain Settings"),e("p",{class:"text-gray-600"},"Manage your store's web address and custom domains.")],-1)),e("a",{href:a.routes.settingsIndex,class:"text-indigo-600 hover:text-indigo-800 font-medium"},"â† Back to Settings",8,kf)]),p.value?(o(),n("div",$f,[e("p",null,l(p.value),1),e("button",{onClick:k[0]||(k[0]=T=>p.value=""),class:"absolute top-2 right-2 text-green-500 hover:text-green-700"},"Ã—")])):j("",!0),i.value?(o(),n("div",Sf,[typeof i.value=="object"?(o(),n("ul",Cf,[(o(!0),n(B,null,N(i.value,(T,w)=>(o(),n("li",{key:w},l(T),1))),128))])):(o(),n("span",jf,l(i.value),1)),e("button",{onClick:k[1]||(k[1]=T=>i.value=""),class:"absolute top-2 right-2 text-red-500 hover:text-red-700"},"Ã—")])):j("",!0),e("div",Uf,[k[6]||(k[6]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Default Store Address"),e("span",{class:"px-3 py-1 text-xs font-semibold bg-green-100 text-green-800 rounded-full"},"Active")],-1)),e("div",Pf,[k[5]||(k[5]=e("p",{class:"text-gray-600 mb-2"},"Your store is accessible at:",-1)),e("div",Tf,[e("code",Af,l(a.initialData.storeUrl),1),e("a",{href:a.initialData.storeUrl,target:"_blank",class:"p-2 text-gray-500 hover:text-indigo-600 transition"},[...k[4]||(k[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,Mf)])])]),e("div",Vf,[k[20]||(k[20]=e("div",{class:"px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[e("h3",{class:"text-lg font-bold text-gray-900"},"Custom Domain"),e("p",{class:"text-sm text-gray-500"},"Connect your own domain name (e.g. myshop.com)")],-1)),e("div",Of,[u.value?(o(),n("div",{key:0,class:I(["border rounded-xl p-6",u.value.status==="approved"?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"])},[e("div",Ef,[e("div",null,[e("h4",{class:I(["font-bold text-lg",u.value.status==="approved"?"text-green-800":"text-yellow-800"])},l(u.value.domain),3),e("div",qf,[e("span",{class:I(["capitalize px-3 py-1 rounded-full text-xs font-bold",u.value.status==="approved"?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800"])},l(u.value.status),3),u.value.status==="pending"?(o(),n("span",Df,"Submitted on "+l(u.value.created_at),1)):j("",!0)])]),u.value.status==="pending"?(o(),n("div",If,[e("button",{onClick:b,disabled:f.value,class:"text-red-600 hover:text-red-800 font-medium text-sm underline bg-transparent border-none cursor-pointer"},l(f.value?"Cancelling...":"Cancel Request"),9,Ff)])):j("",!0)]),u.value.status==="pending"?(o(),n("div",Bf,[k[10]||(k[10]=e("h5",{class:"font-bold text-yellow-900 text-sm mb-2"},"DNS Configuration Required",-1)),k[11]||(k[11]=e("p",{class:"text-yellow-800 text-sm mb-3"},"To verify ownership, please configure the following DNS record at your domain provider:",-1)),e("div",Nf,[k[9]||(k[9]=e("div",{class:"grid grid-cols-3 gap-4 mb-2"},[e("span",{class:"font-semibold text-gray-600"},"Type"),e("span",{class:"font-semibold text-gray-600"},"Name"),e("span",{class:"font-semibold text-gray-600"},"Value / Target")],-1)),e("div",Lf,[k[7]||(k[7]=e("span",null,"CNAME",-1)),k[8]||(k[8]=e("span",null,"@ (or www)",-1)),e("span",null,l(a.initialData.appHost),1)])]),k[12]||(k[12]=e("p",{class:"text-xs text-yellow-700 mt-2"},"Note: DNS propagation may take up to 24 hours.",-1))])):j("",!0)],2)):(o(),n("div",Rf,[e("form",{onSubmit:se(x,["prevent"])},[e("div",zf,[k[13]||(k[13]=e("label",{for:"domain",class:"block text-sm font-bold text-gray-700 uppercase tracking-wide mb-2"},"Domain Name",-1)),e("div",Hf,[v(e("input",{"onUpdate:modelValue":k[2]||(k[2]=T=>y.value=T),type:"text",id:"domain",class:"block w-full rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-indigo-500 py-3 pl-4 pr-12 sm:text-sm",placeholder:"e.g. myshop.com"},null,512),[[O,y.value]])]),k[14]||(k[14]=e("p",{class:"mt-2 text-sm text-gray-500"},"Enter your domain name without https:// or www.",-1))]),e("div",Wf,[k[19]||(k[19]=e("h4",{class:"text-sm font-bold text-blue-900 mb-1"},"Before you connect:",-1)),e("p",Gf,[k[15]||(k[15]=F(" Make sure you have purchased the domain. You will need to add a ",-1)),k[16]||(k[16]=e("strong",null,"CNAME Record",-1)),k[17]||(k[17]=F(" pointing to ",-1)),e("code",Jf,l(a.initialData.appHost),1),k[18]||(k[18]=F(" in your domain's DNS settings. ",-1))])]),e("button",{type:"submit",disabled:f.value||!y.value,class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl shadow-md transition transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed"},l(f.value?"Submitting...":"Connect Domain"),9,Kf)],32)]))])])]))}},Xf={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},Yf={class:"bg-white rounded-lg shadow p-6"},Zf={class:"flex items-center justify-between"},eb={class:"text-3xl font-bold text-green-600 mt-2"},tb={class:"bg-white rounded-lg shadow p-6"},sb={class:"flex items-center justify-between"},ob={class:"text-3xl font-bold text-blue-600 mt-2"},nb={class:"bg-white rounded-lg shadow p-6"},rb={class:"flex items-center justify-between"},lb={class:"text-3xl font-bold text-red-600 mt-2"},ib={class:"bg-white rounded-lg shadow p-6 mb-6"},ab={class:"overflow-x-auto"},db={class:"min-w-full divide-y divide-gray-200"},ub={class:"bg-white divide-y divide-gray-200"},cb={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},mb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right"},gb={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right"},pb={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600 text-right"},fb={key:0},bb={class:"bg-white rounded-lg shadow overflow-hidden mb-6"},xb={class:"overflow-x-auto"},yb={class:"min-w-full divide-y divide-gray-200"},vb={class:"bg-white divide-y divide-gray-200"},hb={class:"px-6 py-4"},wb={class:"text-sm font-medium text-gray-900"},_b={class:"text-xs text-gray-500"},kb={class:"px-6 py-4 text-right text-sm text-gray-500"},$b={class:"px-6 py-4 text-right text-sm text-green-600"},Sb={class:"px-6 py-4 text-right text-sm text-red-600"},Cb={class:"px-6 py-4 text-right text-sm text-blue-600"},jb={class:"px-6 py-4 text-right text-sm font-bold text-gray-900"},Ub={key:0},Pb=["innerHTML"],Tb={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},Ab={class:"bg-white rounded-lg shadow overflow-hidden"},Mb={class:"overflow-x-auto max-h-96"},Vb={class:"min-w-full divide-y divide-gray-200"},Ob={class:"bg-white divide-y divide-gray-200"},Eb={class:"px-4 py-3 text-sm text-gray-900"},qb={class:"font-medium"},Db={class:"text-xs text-gray-500"},Ib={class:"px-4 py-3 text-sm text-right"},Fb={class:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},Bb={class:"px-4 py-3 text-sm text-gray-500 text-right"},Nb={key:0},Lb={class:"bg-white rounded-lg shadow overflow-hidden"},Rb={class:"overflow-x-auto max-h-96"},zb={class:"min-w-full divide-y divide-gray-200"},Hb={class:"bg-white divide-y divide-gray-200"},Wb={class:"px-4 py-3 text-sm text-gray-900"},Gb={class:"font-medium"},Jb={class:"text-xs text-gray-500"},Kb={class:"px-4 py-3 text-sm font-bold text-blue-600 text-right"},Qb={key:0},Xb={class:"bg-white rounded-lg shadow overflow-hidden"},Yb={class:"overflow-x-auto"},Zb={class:"min-w-full divide-y divide-gray-200"},ex={class:"bg-white divide-y divide-gray-200"},tx={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},sx={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},ox={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},nx={class:"px-6 py-4 whitespace-nowrap"},rx={key:0},lx={__name:"InventoryReport",props:{totalInventoryValue:{type:Number,default:0},totalInventoryUnits:{type:Number,default:0},lowStock:{type:Array,default:()=>[]},stockByWarehouse:{type:Array,default:()=>[]},inventoryReportData:{type:Array,default:()=>[]},fastMoving:{type:Array,default:()=>[]},stockMovements:{type:Array,default:()=>[]},currencySymbol:{type:String,default:"â‚¦"},paginationHtml:{type:String,default:""}},setup(a){const t=a,u=X({loading:!1,totalInventoryValue:t.totalInventoryValue,totalInventoryUnits:t.totalInventoryUnits,lowStock:t.lowStock,stockByWarehouse:t.stockByWarehouse,inventoryReportData:t.inventoryReportData,fastMoving:t.fastMoving,stockMovements:t.stockMovements});let y=null;const f=async()=>{if(!u.loading)try{const x=new URL(window.location.href),b=await fetch(x.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!b.ok)throw new Error("Network response was not ok");const m=await b.json();u.totalInventoryValue=m.totalInventoryValue,u.totalInventoryUnits=m.totalInventoryUnits,u.lowStock=m.lowStock,u.stockByWarehouse=m.stockByWarehouse,m.inventoryReport&&m.inventoryReport.data&&(u.inventoryReportData=m.inventoryReport.data),u.fastMoving=m.fastMoving,u.stockMovements=m.stockMovements}catch(x){console.error("Failed to fetch real-time data:",x)}finally{u.loading=!1}},p=(x,b=0)=>Number(x).toLocaleString("en-US",{minimumFractionDigits:b,maximumFractionDigits:b}),i=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"});return de(()=>{y=setInterval(f,45e3)}),be(()=>{y&&clearInterval(y)}),(x,b)=>(o(),n("div",null,[e("div",Xf,[e("div",Yf,[e("div",Zf,[e("div",null,[b[0]||(b[0]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Inventory Value",-1)),e("p",eb,[e("span",null,l(a.currencySymbol),1),e("span",null,l(p(u.totalInventoryValue,2)),1)])]),b[1]||(b[1]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1))])]),e("div",tb,[e("div",sb,[e("div",null,[b[2]||(b[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Units in Stock",-1)),e("p",ob,l(p(u.totalInventoryUnits)),1)]),b[3]||(b[3]=e("div",{class:"p-3 bg-blue-100 rounded-lg"},[e("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})])],-1))])]),e("div",nb,[e("div",rb,[e("div",null,[b[4]||(b[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Low Stock Items",-1)),e("p",lb,l(u.lowStock.length),1)]),b[5]||(b[5]=e("div",{class:"p-3 bg-red-100 rounded-lg"},[e("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1))])])]),e("div",ib,[b[8]||(b[8]=e("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Stock Distribution by Warehouse",-1)),e("div",ab,[e("table",db,[b[7]||(b[7]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Warehouse"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Products"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Units"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Value")])],-1)),e("tbody",ub,[(o(!0),n(B,null,N(u.stockByWarehouse,m=>(o(),n("tr",{key:m.warehouse,class:"hover:bg-gray-50"},[e("td",cb,l(m.warehouse),1),e("td",mb,l(p(m.product_count)),1),e("td",gb,l(p(m.total_units)),1),e("td",pb,[e("span",null,l(a.currencySymbol),1),e("span",null,l(p(m.total_value,2)),1)])]))),128)),u.stockByWarehouse.length===0?(o(),n("tr",fb,[...b[6]||(b[6]=[e("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500"},"No warehouse data available",-1)])])):j("",!0)])])])]),e("div",bb,[b[11]||(b[11]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-bold text-gray-800"},"Inventory Activity Report")],-1)),e("div",xb,[e("table",yb,[b[10]||(b[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Product"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Opening"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Purchased"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sold"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Adj/Trans/Ret"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Closing")])],-1)),e("tbody",vb,[(o(!0),n(B,null,N(u.inventoryReportData,m=>(o(),n("tr",{key:m.id,class:"hover:bg-gray-50"},[e("td",hb,[e("div",wb,l(m.name),1),e("div",_b,l(m.sku),1)]),e("td",kb,l(p(m.opening_stock)),1),e("td",$b,l("+"+p(m.purchased_qty)),1),e("td",Sb,l("-"+p(m.sold_qty)),1),e("td",Cb,l((m.adjustment_qty+m.transfer_qty+m.return_qty>=0?"+":"")+p(m.adjustment_qty+m.transfer_qty+m.return_qty)),1),e("td",jb,l(p(m.closing_stock)),1)]))),128)),u.inventoryReportData.length===0?(o(),n("tr",Ub,[...b[9]||(b[9]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"},"No data found",-1)])])):j("",!0)])]),!u.loading&&a.paginationHtml?(o(),n("div",{key:0,class:"px-6 py-4 border-t border-gray-200",innerHTML:a.paginationHtml},null,8,Pb)):j("",!0)])]),e("div",Tb,[e("div",Ab,[b[14]||(b[14]=e("div",{class:"px-6 py-4 bg-red-50 border-b border-red-200"},[e("h3",{class:"text-lg font-bold text-red-800"},"âš ï¸ Low Stock Alert")],-1)),e("div",Mb,[e("table",Vb,[b[13]||(b[13]=e("thead",{class:"bg-gray-50 sticky top-0"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Product"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Stock"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Threshold")])],-1)),e("tbody",Ob,[(o(!0),n(B,null,N(u.lowStock,m=>(o(),n("tr",{key:m.id,class:"hover:bg-gray-50"},[e("td",Eb,[e("div",qb,l(m.name),1),e("div",Db,l(m.sku),1)]),e("td",Ib,[e("span",Fb,l(m.stock_quantity),1)]),e("td",Bb,l(m.low_stock_threshold),1)]))),128)),u.lowStock.length===0?(o(),n("tr",Nb,[...b[12]||(b[12]=[e("td",{colspan:"3",class:"px-4 py-8 text-center text-green-600"},[e("i",{class:"fas fa-check-circle text-2xl mb-2"}),e("div",null,"All products are well stocked!")],-1)])])):j("",!0)])])])]),e("div",Lb,[b[17]||(b[17]=e("div",{class:"px-6 py-4 bg-blue-50 border-b border-blue-200"},[e("h3",{class:"text-lg font-bold text-blue-800"},"ðŸš€ Fast Moving Products")],-1)),e("div",Rb,[e("table",zb,[b[16]||(b[16]=e("thead",{class:"bg-gray-50 sticky top-0"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Product"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Sold Qty")])],-1)),e("tbody",Hb,[(o(!0),n(B,null,N(u.fastMoving,m=>(o(),n("tr",{key:m.sku,class:"hover:bg-gray-50"},[e("td",Wb,[e("div",Gb,l(m.name),1),e("div",Jb,l(m.sku),1)]),e("td",Kb,l(p(m.sold_qty)),1)]))),128)),u.fastMoving.length===0?(o(),n("tr",Qb,[...b[15]||(b[15]=[e("td",{colspan:"2",class:"px-4 py-8 text-center text-gray-500"},[e("div",null,"No sales data found!")],-1)])])):j("",!0)])])])])]),e("div",Xb,[b[20]||(b[20]=e("div",{class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},[e("h3",{class:"text-lg font-bold text-gray-800"},"Recent Movements"),e("a",{href:"/admin/reports/movement",class:"text-indigo-600 hover:text-indigo-900 text-sm font-medium"},"View All Dashboard â†’")],-1)),e("div",Yb,[e("table",Zb,[b[19]||(b[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Product"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Warehouse"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Quantity")])],-1)),e("tbody",ex,[(o(!0),n(B,null,N(u.stockMovements,m=>(o(),n("tr",{key:m.id,class:"hover:bg-gray-50"},[e("td",tx,l(i(m.created_at)),1),e("td",sx,l(m.product?m.product.name:"Deleted"),1),e("td",ox,l(m.warehouse?m.warehouse.name:"-"),1),e("td",nx,[e("span",{class:I(["px-2 py-1 text-xs font-semibold rounded-full capitalize",{"bg-green-100 text-green-800":m.type==="purchase","bg-blue-100 text-blue-800":m.type==="sale","bg-yellow-100 text-yellow-800":m.type==="adjustment","bg-gray-100 text-gray-800":!["purchase","sale","adjustment"].includes(m.type)}])},l(m.type),3)]),e("td",{class:I(["px-6 py-4 whitespace-nowrap text-sm font-bold text-right",m.quantity>0?"text-green-600":"text-red-600"])},l((m.quantity>0?"+":"")+m.quantity),3)]))),128)),u.stockMovements.length===0?(o(),n("tr",rx,[...b[18]||(b[18]=[e("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-500"},"No stock movements found",-1)])])):j("",!0)])])])])]))}};function ix(a,t,u){if(!a||typeof a!="object")return a;const y=JSON.parse(JSON.stringify(a)),f=t.replace(/\[(\d+)\]/g,".$1").split(".");let p=y;for(let i=0;i<f.length;i++){const x=f[i];i===f.length-1?p[x]=u:(p[x]||(p[x]=isNaN(f[i+1])?{}:[]),p=p[x])}return y}const ax={isEditMode:!1,liveConfig:{},draftConfig:{},init(){window.themeConfig&&(this.liveConfig=JSON.parse(JSON.stringify(window.themeConfig)),this.draftConfig=JSON.parse(JSON.stringify(window.themeConfig))),document.addEventListener("keydown",a=>{(a.ctrlKey||a.metaKey)&&a.key==="e"&&(a.preventDefault(),this.toggleEditMode())})},toggleEditMode(){this.isEditMode=!this.isEditMode,console.log("Edit Mode:",this.isEditMode?"ON":"OFF")},updateField(a,t){console.log(`[CMS] Updating ${a} to:`,t),this.draftConfig=ix(this.draftConfig,a,t),window.dispatchEvent(new CustomEvent("cms-update",{detail:{path:a,value:t}}))},saveChanges(){console.log("Saving config:",this.draftConfig),alert("Configuration saved! (Mock)"),this.liveConfig=JSON.parse(JSON.stringify(this.draftConfig))},resetChanges(){confirm("Discard unsaved changes?")&&(this.draftConfig=JSON.parse(JSON.stringify(this.liveConfig)))},get hasUnsavedChanges(){return JSON.stringify(this.liveConfig)!==JSON.stringify(this.draftConfig)}},dx=(a,t="text")=>({path:a,type:t,isEditing:!1,originalContent:"",init(){this.originalContent=this.$el.innerText.trim()},get isEditMode(){return Alpine.store("editor").isEditMode},get content(){return this.$el.innerText},startEditing(){this.isEditMode&&(this.isEditing=!0,this.$nextTick(()=>{this.$refs.input&&this.$refs.input.focus()}))},save(){const u=this.$refs.input.value;this.isEditing=!1,Alpine.store("editor").updateField(this.path,u)},cancel(){this.isEditing=!1}}),ux={class:"bg-white rounded-lg shadow p-8"},cx={key:0,class:"mb-6 p-4 bg-green-50 rounded-md"},mx={class:"flex"},gx={class:"ml-3"},px={class:"text-sm font-medium text-green-800"},fx={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},bx={class:"md:col-span-2"},xx=["value"],yx={key:0,class:"text-red-500 text-xs mt-1"},vx=["disabled"],hx=["value"],wx={key:0,class:"mt-1"},_x={class:"font-bold"},kx={key:1,class:"text-red-500 text-xs mt-1"},$x=["value","disabled"],Sx={key:0,class:"text-red-500 text-xs mt-1"},Cx=["max"],jx={key:0,class:"text-xs text-gray-500 mt-1"},Ux={key:1,class:"text-red-500 text-xs mt-1"},Px={class:"md:col-span-2"},Tx={key:0,class:"text-red-500 text-xs mt-1"},Ax={class:"mt-8 flex justify-end space-x-4"},Mx=["disabled"],Vx={key:0},Ox={key:1},Ex={__name:"StockTransferForm",props:{initialProducts:{type:Array,required:!0},initialWarehouses:{type:Array,required:!0},tenantSlug:{type:String,required:!0}},setup(a){const t=a,u=C(t.initialProducts),y=C(t.initialWarehouses),f=C(!1),p=C(""),i=X({}),x=X({product_id:"",from_warehouse_id:"",to_warehouse_id:"",quantity:"",notes:""}),b=Y(()=>{if(!x.product_id||!x.from_warehouse_id)return null;const w=u.value.find($=>$.id==x.product_id);if(!w||!w.warehouses)return 0;const A=w.warehouses.find($=>$.id==x.from_warehouse_id);return A&&A.pivot?Number(A.pivot.quantity):0}),m=Y(()=>x.product_id&&x.from_warehouse_id&&x.to_warehouse_id&&x.from_warehouse_id!==x.to_warehouse_id&&x.quantity>0&&b.value!==null&&x.quantity<=b.value),k=()=>{x.from_warehouse_id="",x.to_warehouse_id="",x.quantity="",delete i.from_warehouse_id,delete i.to_warehouse_id,delete i.quantity},T=async()=>{if(m.value){f.value=!0,Object.keys(i).forEach(w=>delete i[w]),p.value="";try{const w=await J.post(`/${t.tenantSlug}/admin/stock-transfers`,x);p.value="Stock transfer request created successfully!",setTimeout(()=>{window.location.href=`/${t.tenantSlug}/admin/stock-transfers`},1500)}catch(w){w.response&&w.response.status===422?Object.assign(i,w.response.data.errors):alert(w.response?.data?.message||"An error occurred while creating the transfer.")}finally{f.value=!1}}};return(w,A)=>(o(),n("div",ux,[p.value?(o(),n("div",cx,[e("div",mx,[A[5]||(A[5]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",gx,[e("p",px,l(p.value),1)])])])):j("",!0),e("form",{onSubmit:se(T,["prevent"])},[e("div",fx,[e("div",bx,[A[7]||(A[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product *",-1)),v(e("select",{"onUpdate:modelValue":A[0]||(A[0]=$=>x.product_id=$),onChange:k,class:I(["w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",{"border-red-500":i.product_id}])},[A[6]||(A[6]=e("option",{value:""},"Select Product",-1)),(o(!0),n(B,null,N(u.value,$=>(o(),n("option",{key:$.id,value:$.id},l($.name)+" (SKU: "+l($.sku)+") ",9,xx))),128))],34),[[K,x.product_id]]),i.product_id?(o(),n("p",yx,l(i.product_id),1)):j("",!0)]),e("div",null,[A[11]||(A[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"From Warehouse *",-1)),v(e("select",{"onUpdate:modelValue":A[1]||(A[1]=$=>x.from_warehouse_id=$),disabled:!x.product_id,class:I(["w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",{"border-red-500":i.from_warehouse_id,"bg-gray-100":!x.product_id}])},[A[8]||(A[8]=e("option",{value:""},"Select Source Warehouse",-1)),(o(!0),n(B,null,N(y.value,$=>(o(),n("option",{key:$.id,value:$.id},l($.name)+" ("+l($.code)+") ",9,hx))),128))],10,vx),[[K,x.from_warehouse_id]]),b.value!==null?(o(),n("div",wx,[e("p",{class:I(["text-sm",b.value>0?"text-green-600":"text-red-600"])},[A[9]||(A[9]=F(" Available: ",-1)),e("span",_x,l(b.value),1),A[10]||(A[10]=F(" units ",-1))],2)])):j("",!0),i.from_warehouse_id?(o(),n("p",kx,l(i.from_warehouse_id),1)):j("",!0)]),e("div",null,[A[13]||(A[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"To Warehouse *",-1)),v(e("select",{"onUpdate:modelValue":A[2]||(A[2]=$=>x.to_warehouse_id=$),class:I(["w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",{"border-red-500":i.to_warehouse_id}])},[A[12]||(A[12]=e("option",{value:""},"Select Destination Warehouse",-1)),(o(!0),n(B,null,N(y.value,$=>(o(),n("option",{key:$.id,value:$.id,disabled:$.id===x.from_warehouse_id},l($.name)+" ("+l($.code)+") ",9,$x))),128))],2),[[K,x.to_warehouse_id]]),i.to_warehouse_id?(o(),n("p",Sx,l(i.to_warehouse_id),1)):j("",!0)]),e("div",null,[A[14]||(A[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Quantity *",-1)),v(e("input",{type:"number","onUpdate:modelValue":A[3]||(A[3]=$=>x.quantity=$),min:"1",max:b.value,class:I(["w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",{"border-red-500":i.quantity}])},null,10,Cx),[[O,x.quantity,void 0,{number:!0}]]),b.value!==null&&x.quantity>0&&x.quantity<=b.value?(o(),n("p",jx," Remaining after transfer: "+l(b.value-x.quantity)+" units ",1)):j("",!0),i.quantity?(o(),n("p",Ux,l(i.quantity),1)):j("",!0)]),e("div",Px,[A[15]||(A[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes (Optional)",-1)),v(e("textarea",{"onUpdate:modelValue":A[4]||(A[4]=$=>x.notes=$),rows:"3",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Add any relevant notes about this transfer..."},null,512),[[O,x.notes]]),i.notes?(o(),n("p",Tx,l(i.notes),1)):j("",!0)])]),e("div",Ax,[A[17]||(A[17]=e("a",{href:"/admin/stock-transfers",class:"px-6 py-2 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition cursor-pointer"}," Cancel ",-1)),e("button",{type:"submit",disabled:f.value||!m.value,class:I(["px-6 py-2 text-white rounded-lg transition",m.value&&!f.value?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-400 cursor-not-allowed"])},[f.value?(o(),n("span",Vx,[...A[16]||(A[16]=[e("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),F("Processing... ",-1)])])):(o(),n("span",Ox," Create Transfer Request "))],10,Mx)])],32)]))}};window.OfflineManager=Oe;window.Alpine=he;const qe=X({sidebarOpen:!1});window.uiState=qe;const W=Xe({setup(){return{uiState:qe}}});W.component("stock-transfer-form",Ex);W.component("storefront-settings",Ee);W.component("purchase-order-form",ss);W.component("notification-dropdown",gs);W.component("user-dropdown",Cs);W.component("sidebar-toggle",js);W.component("mobile-sidebar",Ps);W.component("mobile-bottom-nav",qs);W.component("offline-indicator",Ns);W.component("outstanding-payments",An);W.component("product-list",ll);W.component("product-form",mi);W.component("bulk-upload-manager",Wi);W.component("pos-system",Ra);W.component("customer-display",id);W.component("general-settings",m0);W.component("store-wizard",vc);W.component("order-create",em);W.component("omni-channel-orders",Qm);W.component("message-inbox",Ag);W.component("store-content",Rp);W.component("tenant-login",hf);W.component("domain-settings",Qf);W.component("inventory-report",lx);W.mount("#app");he.store("editor",ax);he.data("editable",dx);he.start();
